function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(u){r=!0,o=u}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _construct(t,e,n){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&_setPrototypeOf(r,n.prototype),r}).apply(null,arguments)}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=_superPropBase(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},zUnb:function(t,e,n){"use strict";function i(t){return"function"==typeof t}n.r(e);var r=!1,o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}};function s(t){setTimeout((function(){throw t}))}var a={closed:!0,next:function(t){},error:function(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete:function(){}},u=Array.isArray||function(t){return t&&"number"==typeof t.length};function l(t){return null!==t&&"object"==typeof t}function h(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map((function(t,e){return"".concat(e+1,") ").concat(t.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}h.prototype=Object.create(Error.prototype);var c,d=h,f=((c=function(){function t(e){_classCallCheck(this,t),this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return _createClass(t,[{key:"unsubscribe",value:function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,o=this._unsubscribe,s=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,h=r?r.length:0;n;)n.remove(this),n=++a<h&&r[a]||null;if(i(o))try{o.call(this)}catch(f){e=!0,t=f instanceof d?p(f.errors):[f]}if(u(s))for(a=-1,h=s.length;++a<h;){var c=s[a];if(l(c))try{c.unsubscribe()}catch(f){e=!0,t=t||[],f instanceof d?t=t.concat(p(f.errors)):t.push(f)}}if(e)throw new d(t)}}},{key:"add",value:function(e){var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var i=n;(n=new t)._subscriptions=[i]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){var r=this._subscriptions;r?r.push(n):this._subscriptions=[n]}return n}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}},{key:"_addParent",value:function(t){var e=this._parent,n=this._parents;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))}}]),t}()).EMPTY=function(t){return t.closed=!0,t}(new c),c);function p(t){return t.reduce((function(t,e){return t.concat(e instanceof d?e.errors:e)}),[])}var v="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),y=function(t){function e(t,n,i){var r;switch(_classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=a;break;case 1:if(!t){r.destination=a;break}if("object"==typeof t){t instanceof e?(r.syncErrorThrowable=t.syncErrorThrowable,r.destination=t,t.add(_assertThisInitialized(r))):(r.syncErrorThrowable=!0,r.destination=new g(_assertThisInitialized(r),t));break}default:r.syncErrorThrowable=!0,r.destination=new g(_assertThisInitialized(r),t,n,i)}return r}return _inherits(e,t),_createClass(e,[{key:v,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(e.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this}}],[{key:"create",value:function(t,n,i){var r=new e(t,n,i);return r.syncErrorThrowable=!1,r}}]),e}(f),g=function(t){function e(t,n,r,o){var s,u;_classCallCheck(this,e),(s=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._parentSubscriber=t;var l=_assertThisInitialized(s);return i(n)?u=n:n&&(u=n.next,r=n.error,o=n.complete,n!==a&&(i((l=Object.create(n)).unsubscribe)&&s.add(l.unsubscribe.bind(l)),l.unsubscribe=s.unsubscribe.bind(_assertThisInitialized(s)))),s._context=l,s._next=u,s._error=r,s._complete=o,s}return _inherits(e,t),_createClass(e,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,n=o.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}},{key:"__tryOrSetError",value:function(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(i){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(s(i),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),e}(y),m="function"==typeof Symbol&&Symbol.observable||"@@observable";function b(){}var _,w=((_=function(){function t(e){_classCallCheck(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return _createClass(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(t,e,n){var i=this.operator,r=function(t,e,n){if(t){if(t instanceof y)return t;if(t[v])return t[v]()}return t||e||n?new y(t,e,n):new y(a)}(t,e,n);if(r.add(i?i.call(r,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),o.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,i=e.destination,r=e.isStopped;if(n||r)return!1;t=i&&i instanceof y?i:null}return!0}(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var n=this;return new(e=k(e))((function(e,i){var r;r=n.subscribe((function(e){try{t(e)}catch(n){i(n),r&&r.unsubscribe()}}),i,e)}))}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:m,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?this:((i=e)?1===i.length?i[0]:function(t){return i.reduce((function(t,e){return e(t)}),t)}:b)(this);var i}},{key:"toPromise",value:function(t){var e=this;return new(t=k(t))((function(t,n){var i;e.subscribe((function(t){return i=t}),(function(t){return n(t)}),(function(){return t(i)}))}))}}]),t}()).create=function(t){return new _(t)},_);function k(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function C(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}C.prototype=Object.create(Error.prototype);var S,x=C,E=function(t){function e(t,n){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).subject=t,i.subscriber=n,i.closed=!1,i}return _inherits(e,t),_createClass(e,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}}}]),e}(f),T=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).destination=t,n}return _inherits(e,t),e}(y),M=((S=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return _inherits(e,t),_createClass(e,[{key:v,value:function(){return new T(this)}},{key:"lift",value:function(t){var e=new A(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new x;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),r=0;r<n;r++)i[r].next(t)}},{key:"error",value:function(t){if(this.closed)throw new x;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),r=0;r<n;r++)i[r].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new x;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new x;return _get(_getPrototypeOf(e.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new x;return this.hasError?(t.error(this.thrownError),f.EMPTY):this.isStopped?(t.complete(),f.EMPTY):(this.observers.push(t),new E(this,t))}},{key:"asObservable",value:function(){var t=new w;return t.source=this,t}}]),e}(w)).create=function(t,e){return new A(t,e)},S),A=function(t){function e(t,n){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).destination=t,i.source=n,i}return _inherits(e,t),_createClass(e,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):f.EMPTY}}]),e}(M);function P(t){return t&&"function"==typeof t.schedule}var V=function(t){function e(t,n,i){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).parent=t,r.outerValue=n,r.outerIndex=i,r.index=0,r}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}},{key:"_error",value:function(t){this.parent.notifyError(t,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),e}(y),I=function(t){return function(e){for(var n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},D=function(t){return function(e){return t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,s),e}};var R="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",O=function(t){return function(e){for(var n=t[R]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e}},N=function(t){return function(e){var n=t[m]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},L=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function z(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var F=function(t){if(t instanceof w)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[m])return N(t);if(L(t))return I(t);if(z(t))return D(t);if(t&&"function"==typeof t[R])return O(t);var e=l(t)?"an invalid object":"'".concat(t,"'");throw new TypeError("You provided ".concat(e," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.")};function B(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new V(t,n,i);if(!r.closed)return F(e)(r)}var H=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"notifyNext",value:function(t,e,n,i,r){this.destination.next(e)}},{key:"notifyError",value:function(t,e){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.complete()}}]),e}(y);function j(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new U(t,e))}}var U=function(){function t(e,n){_classCallCheck(this,t),this.project=e,this.thisArg=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new W(t,this.project,this.thisArg))}}]),t}(),W=function(t){function e(t,n,i){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).project=n,r.count=0,r.thisArg=i||_assertThisInitialized(r),r}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),e}(y);function $(t,e){return new w(e?function(n){var i=new f,r=0;return i.add(e.schedule((function(){r!==t.length?(n.next(t[r++]),n.closed||i.add(this.schedule())):n.complete()}))),i}:I(t))}function q(t,e){if(!e)return t instanceof w?t:new w(F(t));if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new w(e?function(n){var i=new f;return i.add(e.schedule((function(){var r=t[m]();i.add(r.subscribe({next:function(t){i.add(e.schedule((function(){return n.next(t)})))},error:function(t){i.add(e.schedule((function(){return n.error(t)})))},complete:function(){i.add(e.schedule((function(){return n.complete()})))}}))}))),i}:N(t))}(t,e);if(z(t))return function(t,e){return new w(e?function(n){var i=new f;return i.add(e.schedule((function(){return t.then((function(t){i.add(e.schedule((function(){n.next(t),i.add(e.schedule((function(){return n.complete()})))})))}),(function(t){i.add(e.schedule((function(){return n.error(t)})))}))}))),i}:D(t))}(t,e);if(L(t))return $(t,e);if(function(t){return t&&"function"==typeof t[R]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new w(e?function(n){var i,r=new f;return r.add((function(){i&&"function"==typeof i.return&&i.return()})),r.add(e.schedule((function(){i=t[R](),r.add(e.schedule((function(){if(!n.closed){var t,e;try{var r=i.next();t=r.value,e=r.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}})))}))),r}:O(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function Z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?function(i){return i.pipe(Z((function(n,i){return q(t(n,i)).pipe(j((function(t,r){return e(n,t,i,r)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new K(t,n))})}var K=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,t),this.project=e,this.concurrent=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new Y(t,this.project,this.concurrent))}}]),t}(),Y=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e,t,n)}},{key:"_innerSub",value:function(t,e,n){var i=new V(this,void 0,void 0);this.destination.add(i),B(this,t,e,n,i)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t,e,n,i,r){this.destination.next(e)}},{key:"notifyComplete",value:function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),e}(H);function Q(t){return t}function X(){return function(t){return t.lift(new G(t))}}var G=function(){function t(e){_classCallCheck(this,t),this.connectable=e}return _createClass(t,[{key:"call",value:function(t,e){var n=this.connectable;n._refCount++;var i=new J(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r}}]),t}(),J=function(t){function e(t,n){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).connectable=n,i}return _inherits(e,t),_createClass(e,[{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null}}]),e}(y),tt=function(t){function e(t,n){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).source=t,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return _inherits(e,t),_createClass(e,[{key:"_subscribe",value:function(t){return this.getSubject().subscribe(t)}},{key:"getSubject",value:function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new f).add(this.source.subscribe(new nt(this.getSubject(),this))),t.closed?(this._connection=null,t=f.EMPTY):this._connection=t),t}},{key:"refCount",value:function(){return X()(this)}}]),e}(w).prototype,et={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:tt._subscribe},_isComplete:{value:tt._isComplete,writable:!0},getSubject:{value:tt.getSubject},connect:{value:tt.connect},refCount:{value:tt.refCount}},nt=function(t){function e(t,n){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).connectable=n,i}return _inherits(e,t),_createClass(e,[{key:"_error",value:function(t){this._unsubscribe(),_get(_getPrototypeOf(e.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(e.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}]),e}(T);function it(){return new M}var rt="__parameters__";function ot(t,e,n){var i=function(t){return function(){if(t){var e=t.apply(void 0,arguments);for(var n in e)this[n]=e[n]}}}(e);function r(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof r)return i.apply(this,e),this;var o=_construct(r,e);return s.annotation=o,s;function s(t,e,n){for(var i=t.hasOwnProperty(rt)?t[rt]:Object.defineProperty(t,rt,{value:[]})[rt];i.length<=n;)i.push(null);return(i[n]=i[n]||[]).push(o),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r}var st=ot("Inject",(function(t){return{token:t}})),at=ot("Optional"),ut=ot("Self"),lt=ot("SkipSelf"),ht=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function ct(t){for(var e in t)if(t[e]===ct)return e;throw Error("Could not find renamed property on target object.")}function dt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ft(t){var e=t[pt];return e&&e.token===t?e:null}var pt=ct({ngInjectableDef:ct});function vt(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(vt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return"".concat(t.overriddenName);if(t.name)return"".concat(t.name);var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}var yt=ct({__forward_ref__:ct});function gt(t){return t.__forward_ref__=gt,t.toString=function(){return vt(this())},t}function mt(t){var e=t;return"function"==typeof e&&e.hasOwnProperty(yt)&&e.__forward_ref__===gt?e():t}var bt="undefined"!=typeof globalThis&&globalThis,_t="undefined"!=typeof window&&window,wt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,kt="undefined"!=typeof global&&global,Ct=bt||kt||_t||wt,St=function(){function t(e,n){_classCallCheck(this,t),this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.ngInjectableDef=dt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(t,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),t}(),xt=new St("INJECTOR",-1),Et=new Object,Tt=/\n/gm,Mt="\u0275",At="__source",Pt=ct({provide:String,useValue:ct}),Vt=void 0;function It(t){var e=Vt;return Vt=t,e}function Dt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ht.Default;if(void 0===Vt)throw new Error("inject() must be called from an injection context");return null===Vt?function(t,e,n){var i=ft(t);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&ht.Optional)return null;throw new Error("Injector: NOT_FOUND [".concat(vt(t),"]"))}(t,0,e):Vt.get(t,e&ht.Optional?null:void 0,e)}var Rt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Et;if(e===Et){var n=new Error("NullInjectorError: No provider for ".concat(vt(t),"!"));throw n.name="NullInjectorError",n}return e}}]),t}();function Ot(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=t&&"\n"===t.charAt(0)&&t.charAt(1)==Mt?t.substr(2):t;var r=vt(e);if(e instanceof Array)r=e.map(vt).join(" -> ");else if("object"==typeof e){var o=[];for(var s in e)if(e.hasOwnProperty(s)){var a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):vt(a)))}r="{".concat(o.join(", "),"}")}return"".concat(n).concat(i?"("+i+")":"","[").concat(r,"]: ").concat(t.replace(Tt,"\n  "))}var Nt=function t(){_classCallCheck(this,t)},Lt=function t(){_classCallCheck(this,t)};function zt(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ft(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Bt=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),Ht=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ct),jt="ngDebugContext",Ut="ngOriginalError",Wt="ngErrorLogger";function $t(t){return t[jt]}function qt(t){return t[Ut]}function Zt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t.error.apply(t,n)}var Kt=function(){function t(){_classCallCheck(this,t),this._console=console}return _createClass(t,[{key:"handleError",value:function(t){var e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t[Wt]||Zt}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(t){return t?$t(t)?$t(t):this._findContext(qt(t)):null}},{key:"_findOriginalError",value:function(t){for(var e=qt(t);e&&qt(e);)e=qt(e);return e}}]),t}(),Yt=!0,Qt=!1;function Xt(){return Qt=!0,Yt}var Gt=function(){function t(e){if(_classCallCheck(this,t),this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n),this.inertBodyElement=this.inertDocument.createElement("body"),n.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return _createClass(t,[{key:"getInertBodyElement_XHR",value:function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(i){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);var n=e.response.body;return n.removeChild(n.firstChild),n}},{key:"getInertBodyElement_DOMParser",value:function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(n){return null}}},{key:"getInertBodyElement_InertDocument",value:function(t){var e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}},{key:"stripCustomNsAttrs",value:function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var i=e.item(n).name;"xmlns:ns1"!==i&&0!==i.indexOf("ns1:")||t.removeAttribute(i)}for(var r=t.firstChild;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}]),t}(),Jt=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,te=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ee(t){return(t=String(t)).match(Jt)||t.match(te)?t:(Xt()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(t," (see http://g.co/ng/security#xss)")),"unsafe:"+t)}function ne(t){var e={},n=!0,i=!1,r=void 0;try{for(var o,s=t.split(",")[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){e[o.value]=!0}}catch(a){i=!0,r=a}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return e}function ie(){for(var t={},e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(var r=0,o=n;r<o.length;r++){var s=o[r];for(var a in s)s.hasOwnProperty(a)&&(t[a]=!0)}return t}var re,oe=ne("area,br,col,hr,img,wbr"),se=ne("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ae=ne("rp,rt"),ue=ie(ae,se),le=ie(oe,ie(se,ne("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ie(ae,ne("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ue),he=ne("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ce=ne("srcset"),de=ie(he,ce,ne("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ne("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),fe=ne("script,style,template"),pe=function(){function t(){_classCallCheck(this,t),this.sanitizedSomething=!1,this.buf=[]}return _createClass(t,[{key:"sanitizeChildren",value:function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var i=this.checkClobberedElement(e,e.nextSibling);if(i){e=i;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(t){var e=t.nodeName.toLowerCase();if(!le.hasOwnProperty(e))return this.sanitizedSomething=!0,!fe.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);for(var n,i=t.attributes,r=0;r<i.length;r++){var o=i.item(r),s=o.name,a=s.toLowerCase();if(de.hasOwnProperty(a)){var u=o.value;he[a]&&(u=ee(u)),ce[a]&&(n=u,u=(n=String(n)).split(",").map((function(t){return ee(t.trim())})).join(", ")),this.buf.push(" ",s,'="',ge(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(t){var e=t.nodeName.toLowerCase();le.hasOwnProperty(e)&&!oe.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}},{key:"chars",value:function(t){this.buf.push(ge(t))}},{key:"checkClobberedElement",value:function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(t.outerHTML));return e}}]),t}(),ve=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ye=/([^\#-~ |!])/g;function ge(t){return t.replace(/&/g,"&amp;").replace(ve,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(ye,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function me(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var be=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}(),_e=function t(){_classCallCheck(this,t)},we=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),ke=/^url\(([^)]+)\)$/,Ce=/([A-Z])/g;function Se(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}var xe=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return Ee()},t}(),Ee=function(){},Te=new St("The presence of this token marks an injector as being the root injector."),Me=function(t,e,n){return new Re(t,e,n)},Ae=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"create",value:function(t,e){return Array.isArray(t)?Me(t,e,""):Me(t.providers,t.parent,t.name||"")}}]),t}();return t.THROW_IF_NOT_FOUND=Et,t.NULL=new Rt,t.ngInjectableDef=dt({token:t,providedIn:"any",factory:function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ht.Default;return Dt(t,e)}(xt)}}),t.__NG_ELEMENT_ID__=-1,t}(),Pe=function(t){return t},Ve=[],Ie=Pe,De=function(){return Array.prototype.slice.call(arguments)},Re=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae.NULL,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,t),this.parent=n,this.source=i;var r=this._records=new Map;r.set(Ae,{token:Ae,fn:Pe,deps:Ve,value:this,useNew:!1}),r.set(xt,{token:xt,fn:Pe,deps:Ve,value:this,useNew:!1}),function t(e,n){if(n)if((n=mt(n))instanceof Array)for(var i=0;i<n.length;i++)t(e,n[i]);else{if("function"==typeof n)throw Ne("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Ne("Unexpected provider",n);var r=mt(n.provide),o=function(t){var e=function(t){var e=Ve,n=t.deps;if(n&&n.length){e=[];for(var i=0;i<n.length;i++){var r=6,o=mt(n[i]);if(o instanceof Array)for(var s=0,a=o;s<a.length;s++){var u=a[s];u instanceof at||u==at?r|=1:u instanceof lt||u==lt?r&=-3:u instanceof ut||u==ut?r&=-5:o=u instanceof st?u.token:mt(u)}e.push({token:o,options:r})}}else if(t.useExisting)e=[{token:mt(t.useExisting),options:6}];else if(!(n||Pt in t))throw Ne("'deps' required",t);return e}(t),n=Pe,i=Ve,r=!1,o=mt(t.provide);if(Pt in t)i=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)r=!0,n=mt(t.useClass);else{if("function"!=typeof o)throw Ne("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);r=!0,n=o}return{deps:e,fn:n,useNew:r,value:i}}(n);if(!0===n.multi){var s=e.get(r);if(s){if(s.fn!==De)throw Oe(r)}else e.set(r,s={token:n.provide,deps:[],useNew:!1,fn:De,value:Ve});s.deps.push({token:r=n,options:6})}var a=e.get(r);if(a&&a.fn==De)throw Oe(r);e.set(r,o)}}(r,e)}return _createClass(t,[{key:"get",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ht.Default,i=this._records.get(t);try{return function t(e,n,i,r,o,s){try{return function(e,n,i,r,o,s){var a;if(!n||s&ht.SkipSelf)s&ht.Self||(a=r.get(e,o,ht.Default));else{if((a=n.value)==Ie)throw Error("\u0275Circular dependency");if(a===Ve){n.value=Ie;var u=n.useNew,l=n.fn,h=n.deps,c=Ve;if(h.length){c=[];for(var d=0;d<h.length;d++){var f=h[d],p=f.options,v=2&p?i.get(f.token):void 0;c.push(t(f.token,v,i,v||4&p?r:Ae.NULL,1&p?null:Ae.THROW_IF_NOT_FOUND,ht.Default))}}n.value=a=u?_construct(l,_toConsumableArray(c)):l.apply(void 0,c)}}return a}(e,n,i,r,o,s)}catch(a){throw a instanceof Error||(a=new Error(a)),(a.ngTempTokenPath=a.ngTempTokenPath||[]).unshift(e),n&&n.value==Ie&&(n.value=Ve),a}}(t,i,this._records,this.parent,e,n)}catch(r){return function(t,e,n,i){var r=t.ngTempTokenPath;throw e[At]&&r.unshift(e[At]),t.message=Ot("\n"+t.message,r,"StaticInjectorError",i),t.ngTokenPath=r,t.ngTempTokenPath=null,t}(r,t,0,this.source)}}},{key:"toString",value:function(){var t=[];return this._records.forEach((function(e,n){return t.push(vt(n))})),"StaticInjector[".concat(t.join(", "),"]")}}]),t}();function Oe(t){return Ne("Cannot mix multi providers and regular providers",t)}function Ne(t,e){return new Error(Ot(t,e,"StaticInjectorError"))}var Le=null;function ze(){if(!Le){var t=Ct.Symbol;if(t&&t.iterator)Le=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var i=e[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Le=i)}}return Le}function Fe(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function Be(t,e){var n=je(t),i=je(e);return n&&i?function(t,e,n){for(var i=t[ze()](),r=e[ze()]();;){var o=i.next(),s=r.next();if(o.done&&s.done)return!0;if(o.done||s.done)return!1;if(!n(o.value,s.value))return!1}}(t,e,Be):!(n||!(t&&("object"==typeof t||"function"==typeof t))||i||!(e&&("object"==typeof e||"function"==typeof e)))||Fe(t,e)}var He=function(){function t(e){_classCallCheck(this,t),this.wrapped=e}return _createClass(t,null,[{key:"wrap",value:function(e){return new t(e)}},{key:"unwrap",value:function(e){return t.isWrapped(e)?e.wrapped:e}},{key:"isWrapped",value:function(e){return e instanceof t}}]),t}();function je(t){return!!Ue(t)&&(Array.isArray(t)||!(t instanceof Map)&&ze()in t)}function Ue(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function We(t){return!!t&&"function"==typeof t.then}function $e(t){return!!t&&"function"==typeof t.subscribe}var qe=function(){function t(e,n,i){_classCallCheck(this,t),this.previousValue=e,this.currentValue=n,this.firstChange=i}return _createClass(t,[{key:"isFirstChange",value:function(){return this.firstChange}}]),t}(),Ze=function t(){_classCallCheck(this,t)},Ke=function t(){_classCallCheck(this,t)};function Ye(t){var e=Error("No component factory found for ".concat(vt(t),". Did you add it to @NgModule.entryComponents?"));return e[Qe]=t,e}var Qe="ngComponent",Xe=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"resolveComponentFactory",value:function(t){throw Ye(t)}}]),t}(),Ge=function(){var t=function t(){_classCallCheck(this,t)};return t.NULL=new Xe,t}(),Je=function(){function t(e,n,i){_classCallCheck(this,t),this._parent=n,this._ngModule=i,this._factories=new Map;for(var r=0;r<e.length;r++){var o=e[r];this._factories.set(o.componentType,o)}}return _createClass(t,[{key:"resolveComponentFactory",value:function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw Ye(t);return new tn(e,this._ngModule)}}]),t}(),tn=function(t){function e(t,n){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).factory=t,i.ngModule=n,i.selector=t.selector,i.componentType=t.componentType,i.ngContentSelectors=t.ngContentSelectors,i.inputs=t.inputs,i.outputs=t.outputs,i}return _inherits(e,t),_createClass(e,[{key:"create",value:function(t,e,n,i){return this.factory.create(t,e,n,i||this.ngModule)}}]),e}(Ke);function en(){}var nn=function(){var t=function t(e){_classCallCheck(this,t),this.nativeElement=e};return t.__NG_ELEMENT_ID__=function(){return rn(t)},t}(),rn=en,on=function t(){_classCallCheck(this,t)},sn=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}(),an=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return un()},t}(),un=en,ln=new function t(e){_classCallCheck(this,t),this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}("8.2.14"),hn=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"supports",value:function(t){return je(t)}},{key:"create",value:function(t){return new dn(t)}}]),t}(),cn=function(t,e){return e},dn=function(){function t(e){_classCallCheck(this,t),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||cn}return _createClass(t,[{key:"forEachItem",value:function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)}},{key:"forEachOperation",value:function(t){for(var e=this._itHead,n=this._removalsHead,i=0,r=null;e||n;){var o=!n||e&&e.currentIndex<yn(n,i,r)?e:n,s=yn(o,i,r),a=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)i++;else{r||(r=[]);var u=s-i,l=a-i;if(u!=l){for(var h=0;h<u;h++){var c=h<r.length?r[h]:r[h]=0,d=c+h;l<=d&&d<u&&(r[h]=c+1)}r[o.previousIndex]=l-u}}s!==a&&t(o,s,a)}}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachMovedItem",value:function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"forEachIdentityChange",value:function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!je(t))throw new Error("Error trying to diff '".concat(vt(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n,i,r,o=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(var a=0;a<this.length;a++)r=this._trackByFn(a,i=t[a]),null!==o&&Fe(o.trackById,r)?(s&&(o=this._verifyReinsertion(o,i,r,a)),Fe(o.item,i)||this._addIdentityChange(o,i)):(o=this._mismatch(o,i,r,a),s=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var i,r=t[ze()]();!(i=r.next()).done;)e(i.value)}(t,(function(t){r=e._trackByFn(n,t),null!==o&&Fe(o.trackById,r)?(s&&(o=e._verifyReinsertion(o,t,r,n)),Fe(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,r,n),s=!0),o=o._next,n++})),this.length=n;return this._truncate(o),this.collection=t,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,e,n,i){var r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Fe(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,i)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Fe(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,i)):t=this._addAfter(new fn(e,n),r,i),t}},{key:"_verifyReinsertion",value:function(t,e,n,i){var r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var i=t._prevRemoved,r=t._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_moveAfter",value:function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_addAfter",value:function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,e,n){var i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new vn),this._linkedRecords.put(t),t.currentIndex=n,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}},{key:"_addToMoves",value:function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vn),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),t}(),fn=function t(e,n){_classCallCheck(this,t),this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},pn=function(){function t(){_classCallCheck(this,t),this._head=null,this._tail=null}return _createClass(t,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Fe(n.trackById,t))return n;return null}},{key:"remove",value:function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}]),t}(),vn=function(){function t(){_classCallCheck(this,t),this.map=new Map}return _createClass(t,[{key:"put",value:function(t){var e=t.trackById,n=this.map.get(e);n||(n=new pn,this.map.set(e,n)),n.add(t)}},{key:"get",value:function(t,e){var n=this.map.get(t);return n?n.get(t,e):null}},{key:"remove",value:function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),t}();function yn(t,e,n){var i=t.previousIndex;if(null===i)return i;var r=0;return n&&i<n.length&&(r=n[i]),i+e+r}var gn=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"supports",value:function(t){return t instanceof Map||Ue(t)}},{key:"create",value:function(){return new mn}}]),t}(),mn=function(){function t(){_classCallCheck(this,t),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(t,[{key:"forEachItem",value:function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachChangedItem",value:function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||Ue(t)))throw new Error("Error trying to diff '".concat(vt(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(function(t,i){if(n&&n.key===i)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var r=e._getOrCreateRecordForKey(i,t);n=e._insertBeforeOrAppend(n,r)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}},{key:"_getOrCreateRecordForKey",value:function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}var o=new bn(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,e){Fe(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach((function(n){return e(t[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),t}(),bn=function t(e){_classCallCheck(this,t),this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},_n=function(){var t=function(){function t(e){_classCallCheck(this,t),this.factories=e}return _createClass(t,[{key:"find",value:function(t){var e,n=this.factories.find((function(e){return e.supports(t)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'"))}}],[{key:"create",value:function(e,n){if(null!=n){var i=n.factories.slice();e=e.concat(i)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new lt,new at]]}}}]),t}();return t.ngInjectableDef=dt({token:t,providedIn:"root",factory:function(){return new t([new hn])}}),t}(),wn=function(){var t=function(){function t(e){_classCallCheck(this,t),this.factories=e}return _createClass(t,[{key:"find",value:function(t){var e=this.factories.find((function(e){return e.supports(t)}));if(e)return e;throw new Error("Cannot find a differ supporting object '".concat(t,"'"))}}],[{key:"create",value:function(e,n){if(n){var i=n.factories.slice();e=e.concat(i)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new lt,new at]]}}}]),t}();return t.ngInjectableDef=dt({token:t,providedIn:"root",factory:function(){return new t([new gn])}}),t}(),kn=[new gn],Cn=new _n([new hn]),Sn=new wn(kn),xn=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return En(t,nn)},t}(),En=en,Tn=function(){var t=function t(){_classCallCheck(this,t)};return t.__NG_ELEMENT_ID__=function(){return Mn(t,nn)},t}(),Mn=en;function An(t,e,n,i){var r="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '".concat(e,"'. Current value: '").concat(n,"'.");return i&&(r+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return Pn(n,e),n}(r,t)}function Pn(t,e){t[jt]=e,t[Wt]=e.logError.bind(e)}function Vn(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: ".concat(t))}function In(t,e,n){var i=t.state,r=1792&i;return r===e?(t.state=-1793&i|n,t.initIndex=-1,!0):r===n}function Dn(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Rn(t,e){return t.nodes[e]}function On(t,e){return t.nodes[e]}function Nn(t,e){return t.nodes[e]}function Ln(t,e){return t.nodes[e]}function zn(t,e){return t.nodes[e]}var Fn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Bn=function(){},Hn=new Map;function jn(t){var e=Hn.get(t);return e||(e=vt(t)+"_"+Hn.size,Hn.set(t,e)),e}var Un="$$undefined",Wn="$$empty";function $n(t){return{id:Un,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var qn=0;function Zn(t,e,n,i){return!(!(2&t.state)&&Fe(t.oldValues[e.bindingIndex+n],i))}function Kn(t,e,n,i){return!!Zn(t,e,n,i)&&(t.oldValues[e.bindingIndex+n]=i,!0)}function Yn(t,e,n,i){var r=t.oldValues[e.bindingIndex+n];if(1&t.state||!Be(r,i)){var o=e.bindings[n].name;throw An(Fn.createDebugContext(t,e.nodeIndex),"".concat(o,": ").concat(r),"".concat(o,": ").concat(i),0!=(1&t.state))}}function Qn(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function Xn(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function Gn(t,e,n,i){try{return Qn(33554432&t.def.nodes[e].flags?On(t,e).componentView:t),Fn.handleEvent(t,e,n,i)}catch(r){t.root.errorHandler.handleError(r)}}function Jn(t){return t.parent?On(t.parent,t.parentNodeDef.nodeIndex):null}function ti(t){return t.parent?t.parentNodeDef.parent:null}function ei(t,e){switch(201347067&e.flags){case 1:return On(t,e.nodeIndex).renderElement;case 2:return Rn(t,e.nodeIndex).renderText}}function ni(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function ii(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function ri(t){var e={},n=0,i={};return t&&t.forEach((function(t){var r=_slicedToArray(t,2),o=r[0],s=r[1];"number"==typeof o?(e[o]=s,n|=function(t){return 1<<t%32}(o)):i[o]=s})),{matchedQueries:e,references:i,matchedQueryIds:n}}function oi(t,e){return t.map((function(t){var n,i,r;return Array.isArray(t)?(r=(n=_slicedToArray(t,2))[0],i=n[1]):(r=0,i=t),i&&("function"==typeof i||"object"==typeof i)&&e&&Object.defineProperty(i,At,{value:e,configurable:!0}),{flags:r,token:i,tokenKey:jn(i)}}))}function si(t,e,n){var i=n.renderParent;return i?0==(1&i.flags)||0==(33554432&i.flags)||i.element.componentRendererType&&i.element.componentRendererType.encapsulation===Bt.Native?On(t,n.renderParent.nodeIndex).renderElement:void 0:e}var ai=new WeakMap;function ui(t){var e=ai.get(t);return e||((e=t((function(){return Bn}))).factory=t,ai.set(t,e)),e}function li(t,e,n,i,r){3===e&&(n=t.renderer.parentNode(ei(t,t.def.lastRenderRootNode))),hi(t,e,0,t.def.nodes.length-1,n,i,r)}function hi(t,e,n,i,r,o,s){for(var a=n;a<=i;a++){var u=t.def.nodes[a];11&u.flags&&di(t,u,e,r,o,s),a+=u.childCount}}function ci(t,e,n,i,r,o){for(var s=t;s&&!ni(s);)s=s.parent;for(var a=s.parent,u=ti(s),l=u.nodeIndex+u.childCount,h=u.nodeIndex+1;h<=l;h++){var c=a.def.nodes[h];c.ngContentIndex===e&&di(a,c,n,i,r,o),h+=c.childCount}if(!a.parent){var d=t.root.projectableNodes[e];if(d)for(var f=0;f<d.length;f++)fi(t,d[f],n,i,r,o)}}function di(t,e,n,i,r,o){if(8&e.flags)ci(t,e.ngContent.index,n,i,r,o);else{var s=ei(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&fi(t,s,n,i,r,o),32&e.bindingFlags&&fi(On(t,e.nodeIndex).componentView,s,n,i,r,o)):fi(t,s,n,i,r,o),16777216&e.flags)for(var a=On(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<a.length;u++)li(a[u],n,i,r,o);1&e.flags&&!e.element.name&&hi(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,i,r,o)}}function fi(t,e,n,i,r,o){var s=t.renderer;switch(n){case 1:s.appendChild(i,e);break;case 2:s.insertBefore(i,e,r);break;case 3:s.removeChild(i,e);break;case 0:o.push(e)}}var pi=/^:([^:]+):(.+)$/;function vi(t){if(":"===t[0]){var e=t.match(pi);return[e[1],e[2]]}return["",t]}function yi(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}var gi=new Object,mi=jn(Ae),bi=jn(xt),_i=jn(Nt);function wi(t,e,n,i){return n=mt(n),{index:-1,deps:oi(i,vt(e)),flags:t,token:e,value:n}}function ki(t,e){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ae.THROW_IF_NOT_FOUND,o=It(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(r=null),1&e.flags)return t._parent.get(e.token,r);var s=e.tokenKey;switch(s){case mi:case bi:case _i:return t}var a,u=t._def.providersByKey[s];if(u){var l=t._providers[u.index];return void 0===l&&(l=t._providers[u.index]=Ci(t,u)),l===gi?void 0:l}if((a=ft(e.token))&&(n=t,null!=(i=a).providedIn&&(function(t,e){return t._def.modules.indexOf(e)>-1}(n,i.providedIn)||"root"===i.providedIn&&n._def.isRoot))){var h=t._providers.length;return t._def.providers[h]=t._def.providersByKey[e.tokenKey]={flags:5120,value:a.factory,deps:[],index:h,token:e.token},t._providers[h]=gi,t._providers[h]=Ci(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?r:t._parent.get(e.token,r)}finally{It(o)}}function Ci(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var i=n.length;switch(i){case 0:return new e;case 1:return new e(ki(t,n[0]));case 2:return new e(ki(t,n[0]),ki(t,n[1]));case 3:return new e(ki(t,n[0]),ki(t,n[1]),ki(t,n[2]));default:for(var r=new Array(i),o=0;o<i;o++)r[o]=ki(t,n[o]);return _construct(e,r)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var i=n.length;switch(i){case 0:return e();case 1:return e(ki(t,n[0]));case 2:return e(ki(t,n[0]),ki(t,n[1]));case 3:return e(ki(t,n[0]),ki(t,n[1]),ki(t,n[2]));default:for(var r=Array(i),o=0;o<i;o++)r[o]=ki(t,n[o]);return e.apply(void 0,r)}}(t,e.value,e.deps);break;case 2048:n=ki(t,e.deps[0]);break;case 256:n=e.value}return n===gi||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?gi:n}function Si(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var i=n[e];return i.viewContainerParent=null,Ft(n,e),Fn.dirtyParentQueries(i),Ei(i),i}function xi(t,e,n){var i=e?ei(e,e.def.lastRenderRootNode):t.renderElement,r=n.renderer.parentNode(i),o=n.renderer.nextSibling(i);li(n,2,r,o,void 0)}function Ei(t){li(t,3,null,null,void 0)}var Ti=new Object;var Mi=function(t){function e(t,n,i,r,o,s){var a;return _classCallCheck(this,e),(a=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).selector=t,a.componentType=n,a._inputs=r,a._outputs=o,a.ngContentSelectors=s,a.viewDefFactory=i,a}return _inherits(e,t),_createClass(e,[{key:"create",value:function(t,e,n,i){if(!i)throw new Error("ngModule should be provided");var r=ui(this.viewDefFactory),o=r.nodes[0].element.componentProvider.nodeIndex,s=Fn.createRootView(t,e||[],n,r,i,Ti),a=Nn(s,o).instance;return n&&s.renderer.setAttribute(On(s,0).renderElement,"ng-version",ln.full),new Ai(s,new Di(s),a)}},{key:"inputs",get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t}},{key:"outputs",get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}}]),e}(Ke),Ai=function(t){function e(t,n,i){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._view=t,r._viewRef=n,r._component=i,r._elDef=r._view.def.nodes[0],r.hostView=n,r.changeDetectorRef=n,r.instance=i,r}return _inherits(e,t),_createClass(e,[{key:"destroy",value:function(){this._viewRef.destroy()}},{key:"onDestroy",value:function(t){this._viewRef.onDestroy(t)}},{key:"location",get:function(){return new nn(On(this._view,this._elDef.nodeIndex).renderElement)}},{key:"injector",get:function(){return new Li(this._view,this._elDef)}},{key:"componentType",get:function(){return this._component.constructor}}]),e}(Ze);function Pi(t,e,n){return new Vi(t,e,n)}var Vi=function(){function t(e,n,i){_classCallCheck(this,t),this._view=e,this._elDef=n,this._data=i,this._embeddedViews=[]}return _createClass(t,[{key:"clear",value:function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Si(this._data,t);Fn.destroyView(e)}}},{key:"get",value:function(t){var e=this._embeddedViews[t];if(e){var n=new Di(e);return n.attachToViewContainerRef(this),n}return null}},{key:"createEmbeddedView",value:function(t,e,n){var i=t.createEmbeddedView(e||{});return this.insert(i,n),i}},{key:"createComponent",value:function(t,e,n,i,r){var o=n||this.parentInjector;r||t instanceof tn||(r=o.get(Nt));var s=t.create(o,i,void 0,r);return this.insert(s.hostView,e),s}},{key:"insert",value:function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,i,r,o,s,a=t;return n=this._view,i=this._data,r=e,o=a._view,s=i.viewContainer._embeddedViews,null==r&&(r=s.length),o.viewContainerParent=n,zt(s,r,o),function(t,e){var n=Jn(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var i=n.template._projectedViews;i||(i=n.template._projectedViews=[]),i.push(e),function(t,e){if(!(4&e.flags)){t.nodeFlags|=4,e.flags|=4;for(var n=e.parent;n;)n.childFlags|=4,n=n.parent}}(e.parent.def,e.parentNodeDef)}}(i,o),Fn.dirtyParentQueries(o),xi(i,r>0?s[r-1]:null,o),a.attachToViewContainerRef(this),t}},{key:"move",value:function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,i,r,o,s,a=this._embeddedViews.indexOf(t._view);return n=this._data,i=a,r=e,o=n.viewContainer._embeddedViews,s=o[i],Ft(o,i),null==r&&(r=o.length),zt(o,r,s),Fn.dirtyParentQueries(s),Ei(s),xi(n,r>0?o[r-1]:null,s),t}},{key:"indexOf",value:function(t){return this._embeddedViews.indexOf(t._view)}},{key:"remove",value:function(t){var e=Si(this._data,t);e&&Fn.destroyView(e)}},{key:"detach",value:function(t){var e=Si(this._data,t);return e?new Di(e):null}},{key:"element",get:function(){return new nn(this._data.renderElement)}},{key:"injector",get:function(){return new Li(this._view,this._elDef)}},{key:"parentInjector",get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=ti(t),t=t.parent;return t?new Li(t,e):new Li(this._view,null)}},{key:"length",get:function(){return this._embeddedViews.length}}]),t}();function Ii(t){return new Di(t)}var Di=function(){function t(e){_classCallCheck(this,t),this._view=e,this._viewContainerRef=null,this._appRef=null}return _createClass(t,[{key:"markForCheck",value:function(){Qn(this._view)}},{key:"detach",value:function(){this._view.state&=-5}},{key:"detectChanges",value:function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{Fn.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}},{key:"checkNoChanges",value:function(){Fn.checkNoChangesView(this._view)}},{key:"reattach",value:function(){this._view.state|=4}},{key:"onDestroy",value:function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}},{key:"destroy",value:function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Fn.destroyView(this._view)}},{key:"detachFromAppRef",value:function(){this._appRef=null,Ei(this._view),Fn.dirtyParentQueries(this._view)}},{key:"attachToAppRef",value:function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}},{key:"attachToViewContainerRef",value:function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}},{key:"rootNodes",get:function(){return li(this._view,0,void 0,void 0,t=[]),t;var t}},{key:"context",get:function(){return this._view.context}},{key:"destroyed",get:function(){return 0!=(128&this._view.state)}}]),t}();function Ri(t,e){return new Oi(t,e)}var Oi=function(t){function e(t,n){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._parentView=t,i._def=n,i}return _inherits(e,t),_createClass(e,[{key:"createEmbeddedView",value:function(t){return new Di(Fn.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}},{key:"elementRef",get:function(){return new nn(On(this._parentView,this._def.nodeIndex).renderElement)}}]),e}(xn);function Ni(t,e){return new Li(t,e)}var Li=function(){function t(e,n){_classCallCheck(this,t),this.view=e,this.elDef=n}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae.THROW_IF_NOT_FOUND;return Fn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:jn(t)},e)}}]),t}();function zi(t){return new Fi(t.renderer)}var Fi=function(){function t(e){_classCallCheck(this,t),this.delegate=e}return _createClass(t,[{key:"selectRootElement",value:function(t){return this.delegate.selectRootElement(t)}},{key:"createElement",value:function(t,e){var n=_slicedToArray(vi(e),2),i=n[0],r=n[1],o=this.delegate.createElement(r,i);return t&&this.delegate.appendChild(t,o),o}},{key:"createViewRoot",value:function(t){return t}},{key:"createTemplateAnchor",value:function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e}},{key:"createText",value:function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n}},{key:"projectNodes",value:function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])}},{key:"attachViewAfter",value:function(t,e){for(var n=this.delegate.parentNode(t),i=this.delegate.nextSibling(t),r=0;r<e.length;r++)this.delegate.insertBefore(n,e[r],i)}},{key:"detachView",value:function(t){for(var e=0;e<t.length;e++){var n=t[e],i=this.delegate.parentNode(n);this.delegate.removeChild(i,n)}}},{key:"destroyView",value:function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])}},{key:"listen",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"listenGlobal",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"setElementProperty",value:function(t,e,n){this.delegate.setProperty(t,e,n)}},{key:"setElementAttribute",value:function(t,e,n){var i=_slicedToArray(vi(e),2),r=i[0],o=i[1];null!=n?this.delegate.setAttribute(t,o,n,r):this.delegate.removeAttribute(t,o,r)}},{key:"setBindingDebugInfo",value:function(t,e,n){}},{key:"setElementClass",value:function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)}},{key:"setElementStyle",value:function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)}},{key:"invokeElementMethod",value:function(t,e,n){t[e].apply(t,n)}},{key:"setText",value:function(t,e){this.delegate.setValue(t,e)}},{key:"animate",value:function(){throw new Error("Renderer.animate is no longer supported!")}}]),t}();function Bi(t,e,n,i){return new Hi(t,e,n,i)}var Hi=function(){function t(e,n,i,r){_classCallCheck(this,t),this._moduleType=e,this._parent=n,this._bootstrapComponents=i,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),i=0;i<e.providers.length;i++){var r=e.providers[i];4096&r.flags||void 0===n[i]&&(n[i]=Ci(t,r))}}(this)}return _createClass(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ht.Default,i=0;return n&ht.SkipSelf?i|=1:n&ht.Self&&(i|=4),ki(this,{token:t,tokenKey:jn(t),flags:i},e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The ng module ".concat(vt(this.instance.constructor)," has already been destroyed."));this._destroyed=!0,function(t,e){for(var n=t._def,i=new Set,r=0;r<n.providers.length;r++)if(131072&n.providers[r].flags){var o=t._providers[r];if(o&&o!==gi){var s=o.ngOnDestroy;"function"!=typeof s||i.has(o)||(s.apply(o),i.add(o))}}}(this),this._destroyListeners.forEach((function(t){return t()}))}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"instance",get:function(){return this.get(this._moduleType)}},{key:"componentFactoryResolver",get:function(){return this.get(Ge)}}]),t}(),ji=jn((function t(){_classCallCheck(this,t)})),Ui=jn(an),Wi=jn(nn),$i=jn(Tn),qi=jn(xn),Zi=jn(xe),Ki=jn(Ae),Yi=jn(xt);function Qi(t,e,n,i,r,o,s,a){var u=[];if(s)for(var l in s){var h=_slicedToArray(s[l],2),c=h[0],d=h[1];u[c]={flags:8,name:l,nonMinifiedName:d,ns:null,securityContext:null,suffix:null}}var f=[];if(a)for(var p in a)f.push({type:1,propName:p,target:null,eventName:a[p]});return function(t,e,n,i,r,o,s,a,u){var l=ri(n),h=l.matchedQueries,c=l.references,d=l.matchedQueryIds;u||(u=[]),a||(a=[]),o=mt(o);var f=oi(s,vt(r));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:h,matchedQueryIds:d,references:c,ngContentIndex:-1,childCount:i,bindings:a,bindingFlags:yi(a),outputs:u,element:null,provider:{token:r,value:o,deps:f},text:null,query:null,ngContent:null}}(t,e|=16384,n,i,r,r,o,u,f)}function Xi(t,e){return er(t,e)}function Gi(t,e){for(var n=t;n.parent&&!ni(n);)n=n.parent;return nr(n.parent,ti(n),!0,e.provider.value,e.provider.deps)}function Ji(t,e){var n=nr(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var i=0;i<e.outputs.length;i++){var r=e.outputs[i],o=n[r.propName];if(!$e(o))throw new Error("@Output ".concat(r.propName," not initialized in '").concat(n.constructor.name,"'."));var s=o.subscribe(tr(t,e.parent.nodeIndex,r.eventName));t.disposables[e.outputIndex+i]=s.unsubscribe.bind(s)}return n}function tr(t,e,n){return function(i){return Gn(t,e,n,i)}}function er(t,e){var n=(8192&e.flags)>0,i=e.provider;switch(201347067&e.flags){case 512:return nr(t,e.parent,n,i.value,i.deps);case 1024:return function(t,e,n,i,r){var o=r.length;switch(o){case 0:return i();case 1:return i(rr(t,e,n,r[0]));case 2:return i(rr(t,e,n,r[0]),rr(t,e,n,r[1]));case 3:return i(rr(t,e,n,r[0]),rr(t,e,n,r[1]),rr(t,e,n,r[2]));default:for(var s=Array(o),a=0;a<o;a++)s[a]=rr(t,e,n,r[a]);return i.apply(void 0,s)}}(t,e.parent,n,i.value,i.deps);case 2048:return rr(t,e.parent,n,i.deps[0]);case 256:return i.value}}function nr(t,e,n,i,r){var o=r.length;switch(o){case 0:return new i;case 1:return new i(rr(t,e,n,r[0]));case 2:return new i(rr(t,e,n,r[0]),rr(t,e,n,r[1]));case 3:return new i(rr(t,e,n,r[0]),rr(t,e,n,r[1]),rr(t,e,n,r[2]));default:for(var s=new Array(o),a=0;a<o;a++)s[a]=rr(t,e,n,r[a]);return _construct(i,s)}}var ir={};function rr(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ae.THROW_IF_NOT_FOUND;if(8&i.flags)return i.token;var o=t;2&i.flags&&(r=null);var s=i.tokenKey;s===Zi&&(n=!(!e||!e.element.componentView)),e&&1&i.flags&&(n=!1,e=e.parent);for(var a=t;a;){if(e)switch(s){case ji:return zi(or(a,e,n));case Ui:return or(a,e,n).renderer;case Wi:return new nn(On(a,e.nodeIndex).renderElement);case $i:return On(a,e.nodeIndex).viewContainer;case qi:if(e.element.template)return On(a,e.nodeIndex).template;break;case Zi:return Ii(or(a,e,n));case Ki:case Yi:return Ni(a,e);default:var u=(n?e.element.allProviders:e.element.publicProviders)[s];if(u){var l=Nn(a,u.nodeIndex);return l||(l={instance:er(a,u)},a.nodes[u.nodeIndex]=l),l.instance}}n=ni(a),e=ti(a),a=a.parent,4&i.flags&&(a=null)}var h=o.root.injector.get(i.token,ir);return h!==ir||r===ir?h:o.root.ngModule.injector.get(i.token,r)}function or(t,e,n){var i;if(n)i=On(t,e.nodeIndex).componentView;else for(i=t;i.parent&&!ni(i);)i=i.parent;return i}function sr(t,e,n,i,r,o){if(32768&n.flags){var s=On(t,n.parent.nodeIndex).componentView;2&s.def.flags&&(s.state|=8)}if(e.instance[n.bindings[i].name]=r,524288&n.flags){o=o||{};var a=He.unwrap(t.oldValues[n.bindingIndex+i]);o[n.bindings[i].nonMinifiedName]=new qe(a,r,0!=(2&t.state))}return t.oldValues[n.bindingIndex+i]=r,o}function ar(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,i=0,r=0;r<n.length;r++){var o=n[r],s=o.parent;for(!s&&o.flags&e&&lr(t,r,o.flags&e,i++),0==(o.childFlags&e)&&(r+=o.childCount);s&&1&s.flags&&r===s.nodeIndex+s.childCount;)s.directChildFlags&e&&(i=ur(t,s,e,i)),s=s.parent}}function ur(t,e,n,i){for(var r=e.nodeIndex+1;r<=e.nodeIndex+e.childCount;r++){var o=t.def.nodes[r];o.flags&n&&lr(t,r,o.flags&n,i++),r+=o.childCount}return i}function lr(t,e,n,i){var r=Nn(t,e);if(r){var o=r.instance;o&&(Fn.setCurrentNode(t,e),1048576&n&&Dn(t,512,i)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Dn(t,768,i)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}var hr=new St("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Ht}}),cr={},dr=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}(),fr=void 0,pr=["en",[["a","p"],["AM","PM"],fr],[["AM","PM"],fr,fr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fr,"{1} 'at' {0}",fr],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],vr="en-US";function yr(t){null==t&&function(t){throw new Error("ASSERTION ERROR: ".concat("Expected localeId to be defined"))}(),"string"==typeof t&&t.toLowerCase().replace(/_/g,"-")}var gr=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).__isAsync=n,t}return _inherits(e,t),_createClass(e,[{key:"emit",value:function(t){_get(_getPrototypeOf(e.prototype),"next",this).call(this,t)}},{key:"subscribe",value:function(t,n,i){var r,o=function(t){return null},s=function(){return null};t&&"object"==typeof t?(r=this.__isAsync?function(e){setTimeout((function(){return t.next(e)}))}:function(e){t.next(e)},t.error&&(o=this.__isAsync?function(e){setTimeout((function(){return t.error(e)}))}:function(e){t.error(e)}),t.complete&&(s=this.__isAsync?function(){setTimeout((function(){return t.complete()}))}:function(){t.complete()})):(r=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)},n&&(o=this.__isAsync?function(t){setTimeout((function(){return n(t)}))}:function(t){n(t)}),i&&(s=this.__isAsync?function(){setTimeout((function(){return i()}))}:function(){i()}));var a=_get(_getPrototypeOf(e.prototype),"subscribe",this).call(this,r,o,s);return t instanceof f&&t.add(a),a}}]),e}(M);function mr(){return this._results[ze()]()}var br=function(){function t(){_classCallCheck(this,t),this.dirty=!0,this._results=[],this.changes=new gr,this.length=0;var e=ze(),n=t.prototype;n[e]||(n[e]=mr)}return _createClass(t,[{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,e){return this._results.reduce(t,e)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t){this._results=function t(e,n){void 0===n&&(n=e);for(var i=0;i<e.length;i++){var r=e[i];Array.isArray(r)?(n===e&&(n=e.slice(0,i)),t(r,n)):n!==e&&n.push(r)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),t}(),_r=new St("Application Initializer"),wr=function(){function t(e){var n=this;_classCallCheck(this,t),this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(t,e){n.resolve=t,n.reject=e}))}return _createClass(t,[{key:"runInitializers",value:function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var i=0;i<this.appInits.length;i++){var r=this.appInits[i]();We(r)&&e.push(r)}Promise.all(e).then((function(){n()})).catch((function(e){t.reject(e)})),0===e.length&&n(),this.initialized=!0}}}]),t}(),kr=new St("AppId");function Cr(){return"".concat(Sr()).concat(Sr()).concat(Sr())}function Sr(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var xr=new St("Platform Initializer"),Er=new St("Platform ID"),Tr=new St("appBootstrapListener"),Mr=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"log",value:function(t){console.log(t)}},{key:"warn",value:function(t){console.warn(t)}}]),t}(),Ar=new St("LocaleId"),Pr=!1;function Vr(){throw new Error("Runtime compiler is not loaded")}var Ir,Dr,Rr=Vr,Or=Vr,Nr=Vr,Lr=Vr,zr=function(){function t(){_classCallCheck(this,t),this.compileModuleSync=Rr,this.compileModuleAsync=Or,this.compileModuleAndAllComponentsSync=Nr,this.compileModuleAndAllComponentsAsync=Lr}return _createClass(t,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(t){}},{key:"getModuleId",value:function(t){}}]),t}(),Fr=function t(){_classCallCheck(this,t)};var Br,Hr=!(!(Br=Ct.wtf)||!(Ir=Br.trace)||(Dr=Ir.events,0));function jr(t,e){return null}var Ur=Hr?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Dr.createScope(t,e)}:function(t,e){return jr},Wr=Hr?function(t,e){return Ir.leaveScope(t,e),e}:function(t,e){return e},$r=Promise.resolve(0);function qr(t){"undefined"==typeof Zone?$r.then((function(){t&&t.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var Zr=function(){function t(e){var n,i=e.enableLongStackTrace,r=void 0!==i&&i;if(_classCallCheck(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gr(!1),this.onMicrotaskEmpty=new gr(!1),this.onStable=new gr(!1),this.onError=new gr(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,e,i,r,o,s){try{return Xr(n),t.invokeTask(i,r,o,s)}finally{Gr(n)}},onInvoke:function(t,e,i,r,o,s,a){try{return Xr(n),t.invoke(i,r,o,s,a)}finally{Gr(n)}},onHasTask:function(t,e,i,r){t.hasTask(i,r),e===i&&("microTask"==r.change?(n.hasPendingMicrotasks=r.microTask,Qr(n)):"macroTask"==r.change&&(n.hasPendingMacrotasks=r.macroTask))},onHandleError:function(t,e,i,r){return t.handleError(i,r),n.runOutsideAngular((function(){return n.onError.emit(r)})),!1}})}return _createClass(t,[{key:"run",value:function(t,e,n){return this._inner.run(t,e,n)}},{key:"runTask",value:function(t,e,n,i){var r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+i,t,Yr,Kr,Kr);try{return r.runTask(o,e,n)}finally{r.cancelTask(o)}}},{key:"runGuarded",value:function(t,e,n){return this._inner.runGuarded(t,e,n)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),t}();function Kr(){}var Yr={};function Qr(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular((function(){return t.onStable.emit(null)}))}finally{t.isStable=!0}}}function Xr(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Gr(t){t._nesting--,Qr(t)}var Jr,to=function(){function t(){_classCallCheck(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gr,this.onMicrotaskEmpty=new gr,this.onStable=new gr,this.onError=new gr}return _createClass(t,[{key:"run",value:function(t){return t()}},{key:"runGuarded",value:function(t){return t()}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t){return t()}}]),t}(),eo=function(){function t(e){var n=this;_classCallCheck(this,t),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(t,[{key:"_watchAngularEvents",value:function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){t._ngZone.onStable.subscribe({next:function(){Zr.assertNotInAngularZone(),qr((function(){t._isZoneStable=!0,t._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var t=this;if(this.isStable())qr((function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1}));else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}})):[]}},{key:"addCallback",value:function(t,e,n){var i=this,r=-1;e&&e>0&&(r=setTimeout((function(){i._callbacks=i._callbacks.filter((function(t){return t.timeoutId!==r})),t(i._didWork,i.getPendingTasks())}),e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}},{key:"whenStable",value:function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(t,e,n){return[]}}]),t}(),no=function(){function t(){_classCallCheck(this,t),this._applications=new Map,io.addToWindow(this)}return _createClass(t,[{key:"registerApplication",value:function(t,e){this._applications.set(t,e)}},{key:"unregisterApplication",value:function(t){this._applications.delete(t)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(t){return this._applications.get(t)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return io.findTestabilityInTree(this,t,e)}}]),t}(),io=new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,e,n){return null}}]),t}()),ro=function(t,e,n){return t.get(Fr).createCompiler([e]).compileModuleAsync(n)},oo=new St("AllowMultipleToken"),so=function t(e,n){_classCallCheck(this,t),this.name=e,this.token=n};function ao(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i="Platform: ".concat(e),r=new St(i);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=uo();if(!o||o.injector.get(oo,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{var s=n.concat(e).concat({provide:r,useValue:!0});!function(t){if(Jr&&!Jr.destroyed&&!Jr.injector.get(oo,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Jr=t.get(lo);var e=t.get(xr,null);e&&e.forEach((function(t){return t()}))}(Ae.create({providers:s,name:i}))}return function(t){var e=uo();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function uo(){return Jr&&!Jr.destroyed?Jr:null}var lo=function(){function t(e){_classCallCheck(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(t,[{key:"bootstrapModuleFactory",value:function(t,e){var n,i=this,r="noop"===(n=e?e.ngZone:void 0)?new to:("zone.js"===n?void 0:n)||new Zr({enableLongStackTrace:Xt()}),o=[{provide:Zr,useValue:r}];return r.run((function(){var e=Ae.create({providers:o,parent:i.injector,name:t.moduleType.name}),n=t.create(e),s=n.injector.get(Kt,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return Pr&&yr(n.injector.get(Ar,vr)||vr),n.onDestroy((function(){return po(i._modules,n)})),r.runOutsideAngular((function(){return r.onError.subscribe({next:function(t){s.handleError(t)}})})),function(t,e,r){try{var o=((s=n.injector.get(wr)).runInitializers(),s.donePromise.then((function(){return i._moduleDoBootstrap(n),n})));return We(o)?o.catch((function(n){throw e.runOutsideAngular((function(){return t.handleError(n)})),n})):o}catch(a){throw e.runOutsideAngular((function(){return t.handleError(a)})),a}var s}(s,r)}))}},{key:"bootstrapModule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=ho({},n);return ro(this.injector,i,t).then((function(t){return e.bootstrapModuleFactory(t,i)}))}},{key:"_moduleDoBootstrap",value:function(t){var e=t.injector.get(fo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach((function(t){return e.bootstrap(t)}));else{if(!t.instance.ngDoBootstrap)throw new Error("The module ".concat(vt(t.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(t){return t.destroy()})),this._destroyListeners.forEach((function(t){return t()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();function ho(t,e){return Array.isArray(e)?e.reduce(ho,t):Object.assign({},t,e)}var co,fo=((co=function(){function t(e,n,i,r,o,s){var a=this;_classCallCheck(this,t),this._zone=e,this._console=n,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=o,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Xt(),this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run((function(){a.tick()}))}});var u=new w((function(t){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular((function(){t.next(a._stable),t.complete()}))})),l=new w((function(t){var e;a._zone.runOutsideAngular((function(){e=a._zone.onStable.subscribe((function(){Zr.assertNotInAngularZone(),qr((function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,t.next(!0))}))}))}));var n=a._zone.onUnstable.subscribe((function(){Zr.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular((function(){t.next(!1)})))}));return function(){e.unsubscribe(),n.unsubscribe()}}));this.isStable=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=Number.POSITIVE_INFINITY,r=null,o=e[e.length-1];return P(o)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(i=e.pop())):"number"==typeof o&&(i=e.pop()),null===r&&1===e.length&&e[0]instanceof w?e[0]:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return Z(Q,t)}(i)($(e,r))}(u,l.pipe((function(t){return X()((e=it,function(t){var n;n="function"==typeof e?e:function(){return e};var i=Object.create(t,et);return i.source=t,i.subjectFactory=n,i})(t));var e})))}return _createClass(t,[{key:"bootstrap",value:function(t,e){var n,i=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof Ke?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var r=n instanceof tn?null:this._injector.get(Nt),o=n.create(Ae.NULL,[],e||n.selector,r);o.onDestroy((function(){i._unloadComponent(o)}));var s=o.injector.get(eo,null);return s&&o.injector.get(no).registerApplication(o.location.nativeElement,s),this._loadComponent(o),Xt()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=t._tickScope();try{this._runningTick=!0;var i=!0,r=!1,o=void 0;try{for(var s,a=this._views[Symbol.iterator]();!(i=(s=a.next()).done);i=!0)s.value.detectChanges()}catch(f){r=!0,o=f}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}if(this._enforceNoNewChanges){var u=!0,l=!1,h=void 0;try{for(var c,d=this._views[Symbol.iterator]();!(u=(c=d.next()).done);u=!0)c.value.checkNoChanges()}catch(f){l=!0,h=f}finally{try{u||null==d.return||d.return()}finally{if(l)throw h}}}}catch(p){this._zone.runOutsideAngular((function(){return e._exceptionHandler.handleError(p)}))}finally{this._runningTick=!1,Wr(n)}}},{key:"attachView",value:function(t){var e=t;this._views.push(e),e.attachToAppRef(this)}},{key:"detachView",value:function(t){var e=t;po(this._views,e),e.detachFromAppRef()}},{key:"_loadComponent",value:function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Tr,[]).concat(this._bootstrapListeners).forEach((function(e){return e(t)}))}},{key:"_unloadComponent",value:function(t){this.detachView(t.hostView),po(this.components,t)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(t){return t.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),t}())._tickScope=Ur("ApplicationRef#tick()"),co);function po(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var vo=function t(e,n){_classCallCheck(this,t),this.name=e,this.callback=n},yo=function(){function t(e,n,i){_classCallCheck(this,t),this.listeners=[],this.parent=null,this._debugContext=i,this.nativeNode=e,n&&n instanceof go&&n.addChild(this)}return _createClass(t,[{key:"injector",get:function(){return this._debugContext.injector}},{key:"componentInstance",get:function(){return this._debugContext.component}},{key:"context",get:function(){return this._debugContext.context}},{key:"references",get:function(){return this._debugContext.references}},{key:"providerTokens",get:function(){return this._debugContext.providerTokens}}]),t}(),go=function(t){function e(t,n,i){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,n,i))).properties={},r.attributes={},r.classes={},r.styles={},r.childNodes=[],r.nativeElement=t,r}return _inherits(e,t),_createClass(e,[{key:"addChild",value:function(t){t&&(this.childNodes.push(t),t.parent=this)}},{key:"removeChild",value:function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}},{key:"insertChildrenAfter",value:function(t,e){var n,i=this,r=this.childNodes.indexOf(t);-1!==r&&((n=this.childNodes).splice.apply(n,[r+1,0].concat(_toConsumableArray(e))),e.forEach((function(e){e.parent&&e.parent.removeChild(e),t.parent=i})))}},{key:"insertBefore",value:function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}},{key:"query",value:function(t){return this.queryAll(t)[0]||null}},{key:"queryAll",value:function(t){var n=[];return function t(n,i,r){n.childNodes.forEach((function(n){n instanceof e&&(i(n)&&r.push(n),t(n,i,r))}))}(this,t,n),n}},{key:"queryAllNodes",value:function(t){var n=[];return function t(n,i,r){n instanceof e&&n.childNodes.forEach((function(n){i(n)&&r.push(n),n instanceof e&&t(n,i,r)}))}(this,t,n),n}},{key:"triggerEventHandler",value:function(t,e){this.listeners.forEach((function(n){n.name==t&&n.callback(e)}))}},{key:"children",get:function(){return this.childNodes.filter((function(t){return t instanceof e}))}}]),e}(yo),mo=new Map,bo=function(t){return mo.get(t)||null};function _o(t){mo.set(t.nativeNode,t)}var wo=ao(null,"core",[{provide:Er,useValue:"unknown"},{provide:lo,deps:[Ae]},{provide:no,deps:[]},{provide:Mr,deps:[]}]);function ko(){return Cn}function Co(){return Sn}function So(t){return t?(Pr&&yr(t),t):vr}function xo(t){var e=[];return t.onStable.subscribe((function(){for(;e.length;)e.pop()()})),function(t){e.push(t)}}var Eo=function t(e){_classCallCheck(this,t)};function To(t,e,n,i,r,o){t|=1;var s=ri(e),a=s.matchedQueries,u=s.references;return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a,matchedQueryIds:s.matchedQueryIds,references:u,ngContentIndex:n,childCount:i,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?ui(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:r||Bn},provider:null,text:null,query:null,ngContent:null}}function Mo(t,e,n,i,r,o){var s,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0,h=arguments.length>9?arguments[9]:void 0,c=arguments.length>10?arguments[10]:void 0,d=arguments.length>11?arguments[11]:void 0;h||(h=Bn);var f=ri(n),p=f.matchedQueries,v=f.references,y=f.matchedQueryIds,g=null,m=null;o&&(g=(s=_slicedToArray(vi(o),2))[0],m=s[1]),u=u||[];for(var b=new Array(u.length),_=0;_<u.length;_++){var w=_slicedToArray(u[_],3),k=w[0],C=w[1],S=w[2],x=_slicedToArray(vi(C),2),E=x[0],T=x[1],M=void 0,A=void 0;switch(15&k){case 4:A=S;break;case 1:case 8:M=S}b[_]={flags:k,ns:E,name:T,nonMinifiedName:T,securityContext:M,suffix:A}}l=l||[];for(var P=new Array(l.length),V=0;V<l.length;V++){var I=_slicedToArray(l[V],2),D=I[0],R=I[1];P[V]={type:0,target:D,eventName:R,propName:null}}var O=(a=a||[]).map((function(t){var e=_slicedToArray(t,2),n=e[0],i=e[1],r=_slicedToArray(vi(n),2);return[r[0],r[1],i]}));return d=function(t){if(t&&t.id===Un){var e=null!=t.encapsulation&&t.encapsulation!==Bt.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c".concat(qn++):Wn}return t&&t.id===Wn&&(t=null),t||null}(d),c&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:p,matchedQueryIds:y,references:v,ngContentIndex:i,childCount:r,bindings:b,bindingFlags:yi(b),outputs:P,element:{ns:g,name:m,attrs:O,template:null,componentProvider:null,componentView:c||null,componentRendererType:d,publicProviders:null,allProviders:null,handleEvent:h||Bn},provider:null,text:null,query:null,ngContent:null}}function Ao(t,e,n){var i,r=n.element,o=t.root.selectorOrNode,s=t.renderer;if(t.parent||!o){i=r.name?s.createElement(r.name,r.ns):s.createComment("");var a=si(t,e,n);a&&s.appendChild(a,i)}else i=s.selectRootElement(o,!!r.componentRendererType&&r.componentRendererType.encapsulation===Bt.ShadowDom);if(r.attrs)for(var u=0;u<r.attrs.length;u++){var l=_slicedToArray(r.attrs[u],3),h=l[0],c=l[1],d=l[2];s.setAttribute(i,c,d,h)}return i}function Po(t,e,n,i){for(var r=0;r<n.outputs.length;r++){var o=n.outputs[r],s=Vo(t,n.nodeIndex,(c=o.eventName,(h=o.target)?"".concat(h,":").concat(c):c)),a=o.target,u=t;"component"===o.target&&(a=null,u=e);var l=u.renderer.listen(a||i,o.eventName,s);t.disposables[n.outputIndex+r]=l}var h,c}function Vo(t,e,n){return function(i){return Gn(t,e,n,i)}}function Io(t,e,n,i){if(!Kn(t,e,n,i))return!1;var r=e.bindings[n],o=On(t,e.nodeIndex),s=o.renderElement,a=r.name;switch(15&r.flags){case 1:!function(t,e,n,i,r,o){var s=e.securityContext,a=s?t.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,r,a,i):u.removeAttribute(n,r,i)}(t,r,s,r.ns,a,i);break;case 2:!function(t,e,n,i){var r=t.renderer;i?r.addClass(e,n):r.removeClass(e,n)}(t,s,a,i);break;case 4:!function(t,e,n,i,r){var o=t.root.sanitizer.sanitize(be.STYLE,r);if(null!=o){o=o.toString();var s=e.suffix;null!=s&&(o+=s)}else o=null;var a=t.renderer;null!=o?a.setStyle(n,i,o):a.removeStyle(n,i)}(t,r,s,a,i);break;case 8:!function(t,e,n,i,r){var o=e.securityContext,s=o?t.root.sanitizer.sanitize(o,r):r;t.renderer.setProperty(n,i,s)}(33554432&e.flags&&32&r.flags?o.componentView:t,r,s,a,i)}return!0}function Do(t){for(var e=t.def.nodeMatchedQueries;t.parent&&ii(t);){var n=t.parentNodeDef;t=t.parent;for(var i=n.nodeIndex+n.childCount,r=0;r<=i;r++){var o=t.def.nodes[r];67108864&o.flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&zn(t,r).setDirty(),!(1&o.flags&&r+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(r+=o.childCount)}}if(134217728&t.def.nodeFlags)for(var s=0;s<t.def.nodes.length;s++){var a=t.def.nodes[s];134217728&a.flags&&536870912&a.flags&&zn(t,s).setDirty(),s+=a.childCount}}function Ro(t,e){var n=zn(t,e.nodeIndex);if(n.dirty){var i,r=void 0;if(67108864&e.flags){var o=e.parent.parent;r=Oo(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),i=Nn(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(r=Oo(t,0,t.def.nodes.length-1,e.query,[]),i=t.component);n.reset(r);for(var s=e.query.bindings,a=!1,u=0;u<s.length;u++){var l=s[u],h=void 0;switch(l.bindingType){case 0:h=n.first;break;case 1:h=n,a=!0}i[l.propName]=h}a&&n.notifyOnChanges()}}function Oo(t,e,n,i,r){for(var o=e;o<=n;o++){var s=t.def.nodes[o],a=s.matchedQueries[i.id];if(null!=a&&r.push(No(t,s,a)),1&s.flags&&s.element.template&&(s.element.template.nodeMatchedQueries&i.filterId)===i.filterId){var u=On(t,o);if((s.childMatchedQueries&i.filterId)===i.filterId&&(Oo(t,o+1,o+s.childCount,i,r),o+=s.childCount),16777216&s.flags)for(var l=u.viewContainer._embeddedViews,h=0;h<l.length;h++){var c=l[h],d=Jn(c);d&&d===u&&Oo(c,0,c.def.nodes.length-1,i,r)}var f=u.template._projectedViews;if(f)for(var p=0;p<f.length;p++){var v=f[p];Oo(v,0,v.def.nodes.length-1,i,r)}}(s.childMatchedQueries&i.filterId)!==i.filterId&&(o+=s.childCount)}return r}function No(t,e,n){if(null!=n)switch(n){case 1:return On(t,e.nodeIndex).renderElement;case 0:return new nn(On(t,e.nodeIndex).renderElement);case 2:return On(t,e.nodeIndex).template;case 3:return On(t,e.nodeIndex).viewContainer;case 4:return Nn(t,e.nodeIndex).instance}}function Lo(t,e,n){var i=si(t,e,n);i&&ci(t,n.ngContent.index,1,i,null,void 0)}function zo(t,e,n){for(var i=new Array(n.length-1),r=1;r<n.length;r++)i[r-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[r]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:i,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Fo(t,e,n){var i,r=t.renderer;i=r.createText(n.text.prefix);var o=si(t,e,n);return o&&r.appendChild(o,i),{renderText:i}}function Bo(t,e){return(null!=t?t.toString():"")+e.suffix}function Ho(t,e,n,i){for(var r=0,o=0,s=0,a=0,u=0,l=null,h=null,c=!1,d=!1,f=null,p=0;p<e.length;p++){var v=e[p];if(v.nodeIndex=p,v.parent=l,v.bindingIndex=r,v.outputIndex=o,v.renderParent=h,s|=v.flags,u|=v.matchedQueryIds,v.element){var y=v.element;y.publicProviders=l?l.element.publicProviders:Object.create(null),y.allProviders=y.publicProviders,c=!1,d=!1,v.element.template&&(u|=v.element.template.nodeMatchedQueries)}if(Uo(l,v,e.length),r+=v.bindings.length,o+=v.outputs.length,!h&&3&v.flags&&(f=v),20224&v.flags){c||(c=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var g=0!=(32768&v.flags);0==(8192&v.flags)||g?l.element.publicProviders[jn(v.provider.token)]=v:(d||(d=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[jn(v.provider.token)]=v),g&&(l.element.componentProvider=v)}if(l?(l.childFlags|=v.flags,l.directChildFlags|=v.flags,l.childMatchedQueries|=v.matchedQueryIds,v.element&&v.element.template&&(l.childMatchedQueries|=v.element.template.nodeMatchedQueries)):a|=v.flags,v.childCount>0)l=v,jo(v)||(h=v);else for(;l&&p===l.nodeIndex+l.childCount;){var m=l.parent;m&&(m.childFlags|=l.childFlags,m.childMatchedQueries|=l.childMatchedQueries),h=(l=m)&&jo(l)?l.renderParent:l}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||Bn,updateRenderer:i||Bn,handleEvent:function(t,n,i,r){return e[n].element.handleEvent(t,i,r)},bindingCount:r,outputCount:o,lastRenderRootNode:f}}function jo(t){return 0!=(1&t.flags)&&null===t.element.name}function Uo(t,e,n){var i=e.element&&e.element.template;if(i){if(!i.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(i.lastRenderRootNode&&16777216&i.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index ".concat(e.nodeIndex,"!"))}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ".concat(e.nodeIndex,"!"));if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index ".concat(e.nodeIndex,"!"));if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index ".concat(e.nodeIndex,"!"))}if(e.childCount){var r=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=r&&e.nodeIndex+e.childCount>r)throw new Error("Illegal State: childCount of node leads outside of parent, at index ".concat(e.nodeIndex,"!"))}}function Wo(t,e,n,i){var r=Zo(t.root,t.renderer,t,e,n);return Ko(r,t.component,i),Yo(r),r}function $o(t,e,n){var i=Zo(t,t.renderer,null,null,e);return Ko(i,n,n),Yo(i),i}function qo(t,e,n,i){var r,o=e.element.componentRendererType;return r=o?t.root.rendererFactory.createRenderer(i,o):t.root.renderer,Zo(t.root,r,t,e.element.componentProvider,n)}function Zo(t,e,n,i,r){var o=new Array(r.nodes.length),s=r.outputCount?new Array(r.outputCount):null;return{def:r,parent:n,viewContainerParent:null,parentNodeDef:i,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(r.bindingCount),disposables:s,initIndex:-1}}function Ko(t,e,n){t.component=e,t.context=n}function Yo(t){var e;ni(t)&&(e=On(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,i=t.nodes,r=0;r<n.nodes.length;r++){var o=n.nodes[r],s=void 0;switch(Fn.setCurrentNode(t,r),201347067&o.flags){case 1:var a=Ao(t,e,o),u=void 0;if(33554432&o.flags){var l=ui(o.element.componentView);u=Fn.createComponentView(t,o,l,a)}Po(t,u,o,a),s={renderElement:a,componentView:u,viewContainer:null,template:o.element.template?Ri(t,o):void 0},16777216&o.flags&&(s.viewContainer=Pi(t,o,s));break;case 2:s=Fo(t,e,o);break;case 512:case 1024:case 2048:case 256:(s=i[r])||4096&o.flags||(s={instance:Xi(t,o)});break;case 16:s={instance:Gi(t,o)};break;case 16384:(s=i[r])||(s={instance:Ji(t,o)}),32768&o.flags&&Ko(On(t,o.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new br;break;case 8:Lo(t,e,o),s=void 0}i[r]=s}rs(t,is.CreateViewNodes),us(t,201326592,268435456,0)}function Qo(t){Jo(t),Fn.updateDirectives(t,1),os(t,is.CheckNoChanges),Fn.updateRenderer(t,1),rs(t,is.CheckNoChanges),t.state&=-97}function Xo(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,In(t,0,256),Jo(t),Fn.updateDirectives(t,0),os(t,is.CheckAndUpdate),us(t,67108864,536870912,0);var e=In(t,256,512);ar(t,2097152|(e?1048576:0)),Fn.updateRenderer(t,0),rs(t,is.CheckAndUpdate),us(t,134217728,536870912,0),ar(t,8388608|((e=In(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,In(t,768,1024)}function Go(t,e,n,i,r,o,s,a,u,l,h,c,d){return 0===n?function(t,e,n,i,r,o,s,a,u,l,h,c){switch(201347067&e.flags){case 1:return function(t,e,n,i,r,o,s,a,u,l,h,c){var d=e.bindings.length,f=!1;return d>0&&Io(t,e,0,n)&&(f=!0),d>1&&Io(t,e,1,i)&&(f=!0),d>2&&Io(t,e,2,r)&&(f=!0),d>3&&Io(t,e,3,o)&&(f=!0),d>4&&Io(t,e,4,s)&&(f=!0),d>5&&Io(t,e,5,a)&&(f=!0),d>6&&Io(t,e,6,u)&&(f=!0),d>7&&Io(t,e,7,l)&&(f=!0),d>8&&Io(t,e,8,h)&&(f=!0),d>9&&Io(t,e,9,c)&&(f=!0),f}(t,e,n,i,r,o,s,a,u,l,h,c);case 2:return function(t,e,n,i,r,o,s,a,u,l,h,c){var d=!1,f=e.bindings,p=f.length;if(p>0&&Kn(t,e,0,n)&&(d=!0),p>1&&Kn(t,e,1,i)&&(d=!0),p>2&&Kn(t,e,2,r)&&(d=!0),p>3&&Kn(t,e,3,o)&&(d=!0),p>4&&Kn(t,e,4,s)&&(d=!0),p>5&&Kn(t,e,5,a)&&(d=!0),p>6&&Kn(t,e,6,u)&&(d=!0),p>7&&Kn(t,e,7,l)&&(d=!0),p>8&&Kn(t,e,8,h)&&(d=!0),p>9&&Kn(t,e,9,c)&&(d=!0),d){var v=e.text.prefix;p>0&&(v+=Bo(n,f[0])),p>1&&(v+=Bo(i,f[1])),p>2&&(v+=Bo(r,f[2])),p>3&&(v+=Bo(o,f[3])),p>4&&(v+=Bo(s,f[4])),p>5&&(v+=Bo(a,f[5])),p>6&&(v+=Bo(u,f[6])),p>7&&(v+=Bo(l,f[7])),p>8&&(v+=Bo(h,f[8])),p>9&&(v+=Bo(c,f[9]));var y=Rn(t,e.nodeIndex).renderText;t.renderer.setValue(y,v)}return d}(t,e,n,i,r,o,s,a,u,l,h,c);case 16384:return function(t,e,n,i,r,o,s,a,u,l,h,c){var d=Nn(t,e.nodeIndex),f=d.instance,p=!1,v=void 0,y=e.bindings.length;return y>0&&Zn(t,e,0,n)&&(p=!0,v=sr(t,d,e,0,n,v)),y>1&&Zn(t,e,1,i)&&(p=!0,v=sr(t,d,e,1,i,v)),y>2&&Zn(t,e,2,r)&&(p=!0,v=sr(t,d,e,2,r,v)),y>3&&Zn(t,e,3,o)&&(p=!0,v=sr(t,d,e,3,o,v)),y>4&&Zn(t,e,4,s)&&(p=!0,v=sr(t,d,e,4,s,v)),y>5&&Zn(t,e,5,a)&&(p=!0,v=sr(t,d,e,5,a,v)),y>6&&Zn(t,e,6,u)&&(p=!0,v=sr(t,d,e,6,u,v)),y>7&&Zn(t,e,7,l)&&(p=!0,v=sr(t,d,e,7,l,v)),y>8&&Zn(t,e,8,h)&&(p=!0,v=sr(t,d,e,8,h,v)),y>9&&Zn(t,e,9,c)&&(p=!0,v=sr(t,d,e,9,c,v)),v&&f.ngOnChanges(v),65536&e.flags&&Dn(t,256,e.nodeIndex)&&f.ngOnInit(),262144&e.flags&&f.ngDoCheck(),p}(t,e,n,i,r,o,s,a,u,l,h,c);case 32:case 64:case 128:return function(t,e,n,i,r,o,s,a,u,l,h,c){var d=e.bindings,f=!1,p=d.length;if(p>0&&Kn(t,e,0,n)&&(f=!0),p>1&&Kn(t,e,1,i)&&(f=!0),p>2&&Kn(t,e,2,r)&&(f=!0),p>3&&Kn(t,e,3,o)&&(f=!0),p>4&&Kn(t,e,4,s)&&(f=!0),p>5&&Kn(t,e,5,a)&&(f=!0),p>6&&Kn(t,e,6,u)&&(f=!0),p>7&&Kn(t,e,7,l)&&(f=!0),p>8&&Kn(t,e,8,h)&&(f=!0),p>9&&Kn(t,e,9,c)&&(f=!0),f){var v,y=Ln(t,e.nodeIndex);switch(201347067&e.flags){case 32:v=new Array(d.length),p>0&&(v[0]=n),p>1&&(v[1]=i),p>2&&(v[2]=r),p>3&&(v[3]=o),p>4&&(v[4]=s),p>5&&(v[5]=a),p>6&&(v[6]=u),p>7&&(v[7]=l),p>8&&(v[8]=h),p>9&&(v[9]=c);break;case 64:v={},p>0&&(v[d[0].name]=n),p>1&&(v[d[1].name]=i),p>2&&(v[d[2].name]=r),p>3&&(v[d[3].name]=o),p>4&&(v[d[4].name]=s),p>5&&(v[d[5].name]=a),p>6&&(v[d[6].name]=u),p>7&&(v[d[7].name]=l),p>8&&(v[d[8].name]=h),p>9&&(v[d[9].name]=c);break;case 128:var g=n;switch(p){case 1:v=g.transform(n);break;case 2:v=g.transform(i);break;case 3:v=g.transform(i,r);break;case 4:v=g.transform(i,r,o);break;case 5:v=g.transform(i,r,o,s);break;case 6:v=g.transform(i,r,o,s,a);break;case 7:v=g.transform(i,r,o,s,a,u);break;case 8:v=g.transform(i,r,o,s,a,u,l);break;case 9:v=g.transform(i,r,o,s,a,u,l,h);break;case 10:v=g.transform(i,r,o,s,a,u,l,h,c)}}y.value=v}return f}(t,e,n,i,r,o,s,a,u,l,h,c);default:throw"unreachable"}}(t,e,i,r,o,s,a,u,l,h,c,d):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var i=!1,r=0;r<n.length;r++)Io(t,e,r,n[r])&&(i=!0);return i}(t,e,n);case 2:return function(t,e,n){for(var i=e.bindings,r=!1,o=0;o<n.length;o++)Kn(t,e,o,n[o])&&(r=!0);if(r){for(var s="",a=0;a<n.length;a++)s+=Bo(n[a],i[a]);s=e.text.prefix+s;var u=Rn(t,e.nodeIndex).renderText;t.renderer.setValue(u,s)}return r}(t,e,n);case 16384:return function(t,e,n){for(var i=Nn(t,e.nodeIndex),r=i.instance,o=!1,s=void 0,a=0;a<n.length;a++)Zn(t,e,a,n[a])&&(o=!0,s=sr(t,i,e,a,n[a],s));return s&&r.ngOnChanges(s),65536&e.flags&&Dn(t,256,e.nodeIndex)&&r.ngOnInit(),262144&e.flags&&r.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var i=e.bindings,r=!1,o=0;o<n.length;o++)Kn(t,e,o,n[o])&&(r=!0);if(r){var s,a=Ln(t,e.nodeIndex);switch(201347067&e.flags){case 32:s=n;break;case 64:s={};for(var u=0;u<n.length;u++)s[i[u].name]=n[u];break;case 128:var l=n[0],h=n.slice(1);s=l.transform.apply(l,_toConsumableArray(h))}a.value=s}return r}(t,e,n);default:throw"unreachable"}}(t,e,i)}function Jo(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var i=e.nodes[n];if(4&i.flags){var r=On(t,n).template._projectedViews;if(r)for(var o=0;o<r.length;o++){var s=r[o];s.state|=32,Xn(s,t)}}else 0==(4&i.childFlags)&&(n+=i.childCount)}}function ts(t,e,n,i,r,o,s,a,u,l,h,c,d){return 0===n?function(t,e,n,i,r,o,s,a,u,l,h,c){var d=e.bindings.length;d>0&&Yn(t,e,0,n),d>1&&Yn(t,e,1,i),d>2&&Yn(t,e,2,r),d>3&&Yn(t,e,3,o),d>4&&Yn(t,e,4,s),d>5&&Yn(t,e,5,a),d>6&&Yn(t,e,6,u),d>7&&Yn(t,e,7,l),d>8&&Yn(t,e,8,h),d>9&&Yn(t,e,9,c)}(t,e,i,r,o,s,a,u,l,h,c,d):function(t,e,n){for(var i=0;i<n.length;i++)Yn(t,e,i,n[i])}(t,e,i),!1}function es(t,e){if(zn(t,e.nodeIndex).dirty)throw An(Fn.createDebugContext(t,e.nodeIndex),"Query ".concat(e.query.id," not dirty"),"Query ".concat(e.query.id," dirty"),0!=(1&t.state))}function ns(t){if(!(128&t.state)){if(os(t,is.Destroy),rs(t,is.Destroy),ar(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=Jn(t);if(e){var n=e.template._projectedViews;n&&(Ft(n,n.indexOf(t)),Fn.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var i=t.def.nodes[n];1&i.flags?t.renderer.destroyNode(On(t,n).renderElement):2&i.flags?t.renderer.destroyNode(Rn(t,n).renderText):(67108864&i.flags||134217728&i.flags)&&zn(t,n).destroy()}}(t),ni(t)&&t.renderer.destroy(),t.state|=128}}var is=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function rs(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var i=0;i<n.nodes.length;i++){var r=n.nodes[i];33554432&r.flags?ss(On(t,i).componentView,e):0==(33554432&r.childFlags)&&(i+=r.childCount)}}function os(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var i=0;i<n.nodes.length;i++){var r=n.nodes[i];if(16777216&r.flags)for(var o=On(t,i).viewContainer._embeddedViews,s=0;s<o.length;s++)ss(o[s],e);else 0==(16777216&r.childFlags)&&(i+=r.childCount)}}function ss(t,e){var n=t.state;switch(e){case is.CheckNoChanges:0==(128&n)&&(12==(12&n)?Qo(t):64&n&&as(t,is.CheckNoChangesProjectedViews));break;case is.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Qo(t):64&n&&as(t,e));break;case is.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Xo(t):64&n&&as(t,is.CheckAndUpdateProjectedViews));break;case is.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Xo(t):64&n&&as(t,e));break;case is.Destroy:ns(t);break;case is.CreateViewNodes:Yo(t)}}function as(t,e){os(t,e),rs(t,e)}function us(t,e,n,i){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var r=t.def.nodes.length,o=0;o<r;o++){var s=t.def.nodes[o];if(s.flags&e&&s.flags&n)switch(Fn.setCurrentNode(t,s.nodeIndex),i){case 0:Ro(t,s);break;case 1:es(t,s)}s.childFlags&e&&s.childFlags&n||(o+=s.childCount)}}var ls=!1;function hs(t,e,n,i,r,o){var s=r.injector.get(on);return $o(ds(t,r,s,e,n),i,o)}function cs(t,e,n,i,r,o){var s=r.injector.get(on),a=ds(t,r,new Ws(s),e,n),u=ks(i);return js(Vs.create,$o,null,[a,u,o])}function ds(t,e,n,i,r){var o=e.injector.get(_e),s=e.injector.get(Kt),a=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:i,selectorOrNode:r,sanitizer:o,rendererFactory:n,renderer:a,errorHandler:s}}function fs(t,e,n,i){var r=ks(n);return js(Vs.create,Wo,null,[t,e,r,i])}function ps(t,e,n,i){return n=ms.get(e.element.componentProvider.provider.token)||ks(n),js(Vs.create,qo,null,[t,e,n,i])}function vs(t,e,n,i){return Bi(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===ys.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach((function(t){var i=ys.get(t.token);3840&t.flags&&i&&(e=!0,n=n||i.deprecatedBehavior)})),t.modules.forEach((function(t){gs.forEach((function(i,r){ft(r).providedIn===t&&(e=!0,n=n||i.deprecatedBehavior)}))})),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasOverrides,i=e.hasDeprecatedOverrides;return n?(function(t){for(var e=0;e<t.providers.length;e++){var n=t.providers[e];i&&(n.flags|=4096);var r=ys.get(n.token);r&&(n.flags=-3841&n.flags|r.flags,n.deps=oi(r.deps),n.value=r.value)}if(gs.size>0){var o=new Set(t.modules);gs.forEach((function(e,n){if(o.has(ft(n).providedIn)){var r={token:n,flags:e.flags|(i?4096:0),deps:oi(e.deps),value:e.value,index:t.providers.length};t.providers.push(r),t.providersByKey[jn(n)]=r}}))}}(t=t.factory((function(){return Bn}))),t):t}(i))}var ys=new Map,gs=new Map,ms=new Map;function bs(t){var e;ys.set(t.token,t),"function"==typeof t.token&&(e=ft(t.token))&&"function"==typeof e.providedIn&&gs.set(t.token,t)}function _s(t,e){var n=ui(e.viewDefFactory),i=ui(n.nodes[0].element.componentView);ms.set(t,i)}function ws(){ys.clear(),gs.clear(),ms.clear()}function ks(t){if(0===ys.size)return t;var e=function(t){for(var e=[],n=null,i=0;i<t.nodes.length;i++){var r=t.nodes[i];1&r.flags&&(n=r),n&&3840&r.flags&&ys.has(r.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory((function(){return Bn}));for(var n=0;n<e.length;n++)i(t,e[n]);return t;function i(t,e){for(var n=e+1;n<t.nodes.length;n++){var i=t.nodes[n];if(1&i.flags)return;if(3840&i.flags){var r=i.provider,o=ys.get(r.token);o&&(i.flags=-3841&i.flags|o.flags,r.deps=oi(o.deps),r.value=o.value)}}}}function Cs(t,e,n,i,r,o,s,a,u,l,h,c,d){var f=t.def.nodes[e];return Go(t,f,n,i,r,o,s,a,u,l,h,c,d),224&f.flags?Ln(t,e).value:void 0}function Ss(t,e,n,i,r,o,s,a,u,l,h,c,d){var f=t.def.nodes[e];return ts(t,f,n,i,r,o,s,a,u,l,h,c,d),224&f.flags?Ln(t,e).value:void 0}function xs(t){return js(Vs.detectChanges,Xo,null,[t])}function Es(t){return js(Vs.checkNoChanges,Qo,null,[t])}function Ts(t){return js(Vs.destroy,ns,null,[t])}var Ms,As,Ps,Vs=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();function Is(t,e){As=t,Ps=e}function Ds(t,e,n,i){return Is(t,e),js(Vs.handleEvent,t.def.handleEvent,null,[t,e,n,i])}function Rs(t,e){if(128&t.state)throw Vn(Vs[Ms]);return Is(t,zs(t,0)),t.def.updateDirectives((function(t,n,i){for(var r=t.def.nodes[n],o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return 0===e?Ns(t,r,i,s):Ls(t,r,i,s),16384&r.flags&&Is(t,zs(t,n)),224&r.flags?Ln(t,r.nodeIndex).value:void 0}),t)}function Os(t,e){if(128&t.state)throw Vn(Vs[Ms]);return Is(t,Fs(t,0)),t.def.updateRenderer((function(t,n,i){for(var r=t.def.nodes[n],o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return 0===e?Ns(t,r,i,s):Ls(t,r,i,s),3&r.flags&&Is(t,Fs(t,n)),224&r.flags?Ln(t,r.nodeIndex).value:void 0}),t)}function Ns(t,e,n,i){if(Go.apply(void 0,[t,e,n].concat(_toConsumableArray(i)))){var r=1===n?i[0]:i;if(16384&e.flags){for(var o={},s=0;s<e.bindings.length;s++){var a=e.bindings[s],u=r[s];8&a.flags&&(o[(f=a.nonMinifiedName,p=void 0,p=f.replace(/[$@]/g,"_"),"ng-reflect-".concat(f=p.replace(Ce,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"-"+e[1].toLowerCase()}))))]=Se(u))}var l=e.parent,h=On(t,l.nodeIndex).renderElement;if(l.element.name)for(var c in o){var d=o[c];null!=d?t.renderer.setAttribute(h,c,d):t.renderer.removeAttribute(h,c)}else t.renderer.setValue(h,"bindings=".concat(JSON.stringify(o,null,2)))}}var f,p}function Ls(t,e,n,i){ts.apply(void 0,[t,e,n].concat(_toConsumableArray(i)))}function zs(t,e){for(var n=e;n<t.def.nodes.length;n++){var i=t.def.nodes[n];if(16384&i.flags&&i.bindings&&i.bindings.length)return n}return null}function Fs(t,e){for(var n=e;n<t.def.nodes.length;n++){var i=t.def.nodes[n];if(3&i.flags&&i.bindings&&i.bindings.length)return n}return null}var Bs=function(){function t(e,n){_classCallCheck(this,t),this.view=e,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=e.def.nodes[n];for(var i=this.nodeDef,r=e;i&&0==(1&i.flags);)i=i.parent;if(!i)for(;!i&&r;)i=ti(r),r=r.parent;this.elDef=i,this.elView=r}return _createClass(t,[{key:"logError",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r,o;2&this.nodeDef.flags?(r=this.view.def,o=this.nodeDef.nodeIndex):(r=this.elView.def,o=this.elDef.nodeIndex);var s=function(t,e){for(var n=-1,i=0;i<=e;i++)3&t.nodes[i].flags&&n++;return n}(r,o),a=-1;r.factory((function(){var e;return++a===s?(e=t.error).bind.apply(e,[t].concat(n)):Bn})),a<s&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,n))}},{key:"elOrCompView",get:function(){return On(this.elView,this.elDef.nodeIndex).componentView||this.view}},{key:"injector",get:function(){return Ni(this.elView,this.elDef)}},{key:"component",get:function(){return this.elOrCompView.component}},{key:"context",get:function(){return this.elOrCompView.context}},{key:"providerTokens",get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}},{key:"references",get:function(){var t={};if(this.elDef){Hs(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&Hs(this.elView,n,t),e+=n.childCount}}return t}},{key:"componentRenderElement",get:function(){var t=function(t){for(;t&&!ni(t);)t=t.parent;return t.parent?On(t.parent,ti(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}},{key:"renderNode",get:function(){return 2&this.nodeDef.flags?ei(this.view,this.nodeDef):ei(this.elView,this.elDef)}}]),t}();function Hs(t,e,n){for(var i in e.references)n[i]=No(t,e,e.references[i])}function js(t,e,n,i){var r,o,s=Ms,a=As,u=Ps;try{Ms=t;var l=e.apply(n,i);return As=a,Ps=u,Ms=s,l}catch(h){if($t(h)||!As)throw h;throw r=h,o=Us(),r instanceof Error||(r=new Error(r.toString())),Pn(r,o),r}}function Us(){return As?new Bs(As,Ps):null}var Ws=function(){function t(e){_classCallCheck(this,t),this.delegate=e}return _createClass(t,[{key:"createRenderer",value:function(t,e){return new $s(this.delegate.createRenderer(t,e))}},{key:"begin",value:function(){this.delegate.begin&&this.delegate.begin()}},{key:"end",value:function(){this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}]),t}(),$s=function(){function t(e){_classCallCheck(this,t),this.delegate=e,this.debugContextFactory=Us,this.data=this.delegate.data}return _createClass(t,[{key:"createDebugContext",value:function(t){return this.debugContextFactory(t)}},{key:"destroyNode",value:function(t){var e=bo(t);!function(t){mo.delete(t.nativeNode)}(e),e instanceof yo&&(e.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(t)}},{key:"destroy",value:function(){this.delegate.destroy()}},{key:"createElement",value:function(t,e){var n=this.delegate.createElement(t,e),i=this.createDebugContext(n);if(i){var r=new go(n,null,i);r.name=t,_o(r)}return n}},{key:"createComment",value:function(t){var e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&_o(new yo(e,null,n)),e}},{key:"createText",value:function(t){var e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&_o(new yo(e,null,n)),e}},{key:"appendChild",value:function(t,e){var n=bo(t),i=bo(e);n&&i&&n instanceof go&&n.addChild(i),this.delegate.appendChild(t,e)}},{key:"insertBefore",value:function(t,e,n){var i=bo(t),r=bo(e),o=bo(n);i&&r&&i instanceof go&&i.insertBefore(o,r),this.delegate.insertBefore(t,e,n)}},{key:"removeChild",value:function(t,e){var n=bo(t),i=bo(e);n&&i&&n instanceof go&&n.removeChild(i),this.delegate.removeChild(t,e)}},{key:"selectRootElement",value:function(t,e){var n=this.delegate.selectRootElement(t,e),i=Us();return i&&_o(new go(n,null,i)),n}},{key:"setAttribute",value:function(t,e,n,i){var r=bo(t);r&&r instanceof go&&(r.attributes[i?i+":"+e:e]=n),this.delegate.setAttribute(t,e,n,i)}},{key:"removeAttribute",value:function(t,e,n){var i=bo(t);i&&i instanceof go&&(i.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}},{key:"addClass",value:function(t,e){var n=bo(t);n&&n instanceof go&&(n.classes[e]=!0),this.delegate.addClass(t,e)}},{key:"removeClass",value:function(t,e){var n=bo(t);n&&n instanceof go&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}},{key:"setStyle",value:function(t,e,n,i){var r=bo(t);r&&r instanceof go&&(r.styles[e]=n),this.delegate.setStyle(t,e,n,i)}},{key:"removeStyle",value:function(t,e,n){var i=bo(t);i&&i instanceof go&&(i.styles[e]=null),this.delegate.removeStyle(t,e,n)}},{key:"setProperty",value:function(t,e,n){var i=bo(t);i&&i instanceof go&&(i.properties[e]=n),this.delegate.setProperty(t,e,n)}},{key:"listen",value:function(t,e,n){if("string"!=typeof t){var i=bo(t);i&&i.listeners.push(new vo(e,n))}return this.delegate.listen(t,e,n)}},{key:"parentNode",value:function(t){return this.delegate.parentNode(t)}},{key:"nextSibling",value:function(t){return this.delegate.nextSibling(t)}},{key:"setValue",value:function(t,e){return this.delegate.setValue(t,e)}}]),t}();var qs=function(t){function e(t,n,i){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).moduleType=t,r._bootstrapComponents=n,r._ngModuleDefFactory=i,r}return _inherits(e,t),_createClass(e,[{key:"create",value:function(t){!function(){if(!ls){ls=!0;var t=Xt()?{setCurrentNode:Is,createRootView:cs,createEmbeddedView:fs,createComponentView:ps,createNgModuleRef:vs,overrideProvider:bs,overrideComponentView:_s,clearOverrides:ws,checkAndUpdateView:xs,checkNoChangesView:Es,destroyView:Ts,createDebugContext:function(t,e){return new Bs(t,e)},handleEvent:Ds,updateDirectives:Rs,updateRenderer:Os}:{setCurrentNode:function(){},createRootView:hs,createEmbeddedView:Wo,createComponentView:qo,createNgModuleRef:Bi,overrideProvider:Bn,overrideComponentView:Bn,clearOverrides:Bn,checkAndUpdateView:Xo,checkNoChangesView:Qo,destroyView:ns,createDebugContext:function(t,e){return new Bs(t,e)},handleEvent:function(t,e,n,i){return t.def.handleEvent(t,e,n,i)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?Cs:Ss,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?Cs:Ss,t)}};Fn.setCurrentNode=t.setCurrentNode,Fn.createRootView=t.createRootView,Fn.createEmbeddedView=t.createEmbeddedView,Fn.createComponentView=t.createComponentView,Fn.createNgModuleRef=t.createNgModuleRef,Fn.overrideProvider=t.overrideProvider,Fn.overrideComponentView=t.overrideComponentView,Fn.clearOverrides=t.clearOverrides,Fn.checkAndUpdateView=t.checkAndUpdateView,Fn.checkNoChangesView=t.checkNoChangesView,Fn.destroyView=t.destroyView,Fn.resolveDep=rr,Fn.createDebugContext=t.createDebugContext,Fn.handleEvent=t.handleEvent,Fn.updateDirectives=t.updateDirectives,Fn.updateRenderer=t.updateRenderer,Fn.dirtyParentQueries=Do}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),i={};for(var r in t.providersByKey)i[r]=t.providersByKey[r];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:i}}(ui(this._ngModuleDefFactory));return Fn.createNgModuleRef(this.moduleType,t||Ae.NULL,this._bootstrapComponents,e)}}]),e}(Lt);w.prototype.map=function(t,e){return j(t,e)(this)};var Zs=function t(){_classCallCheck(this,t)},Ks=function t(){_classCallCheck(this,t),this.title="TradingviewAPI"},Ys=function t(){_classCallCheck(this,t)},Qs=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),Xs=new St("UseV4Plurals"),Gs=function t(){_classCallCheck(this,t)},Js=function(t){function e(t,n){var i;return _classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).locale=t,i.deprecatedPluralFn=n,i}return _inherits(e,t),_createClass(e,[{key:"getPluralCategory",value:function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){var e=t.toLowerCase().replace(/_/g,"-"),n=cr[e];if(n)return n;var i=e.split("-")[0];if(n=cr[i])return n;if("en"===i)return pr;throw new Error('Missing locale data for the locale "'.concat(t,'".'))}(t)[dr.PluralCase]}(e||this.locale)(t)){case Qs.Zero:return"zero";case Qs.One:return"one";case Qs.Two:return"two";case Qs.Few:return"few";case Qs.Many:return"many";default:return"other"}}}]),e}(Gs);function ta(t,e){e=encodeURIComponent(e);var n=!0,i=!1,r=void 0;try{for(var o,s=t.split(";")[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,u=a.indexOf("="),l=_slicedToArray(-1==u?[a,""]:[a.slice(0,u),a.slice(u+1)],2),h=l[0],c=l[1];if(h.trim()===e)return decodeURIComponent(c)}}catch(d){i=!0,r=d}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return null}var ea=function(){function t(e,n,i,r){_classCallCheck(this,t),this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}return _createClass(t,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),t}(),na=function(){function t(e,n,i){_classCallCheck(this,t),this._viewContainer=e,this._template=n,this._differs=i,this._ngForOfDirty=!0,this._differ=null}return _createClass(t,[{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(i){throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'. NgFor only supports binding to Iterables such as Arrays."))}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(t){var e=this,n=[];t.forEachOperation((function(t,i,r){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new ea(null,e._ngForOf,-1,-1),null===r?void 0:r),s=new ia(t,o);n.push(s)}else if(null==r)e._viewContainer.remove(null===i?void 0:i);else if(null!==i){var a=e._viewContainer.get(i);e._viewContainer.move(a,r);var u=new ia(t,a);n.push(u)}}));for(var i=0;i<n.length;i++)this._perViewChange(n[i].view,n[i].record);for(var r=0,o=this._viewContainer.length;r<o;r++){var s=this._viewContainer.get(r);s.context.index=r,s.context.count=o,s.context.ngForOf=this._ngForOf}t.forEachIdentityChange((function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item}))}},{key:"_perViewChange",value:function(t,e){t.context.$implicit=e.item}},{key:"ngForOf",set:function(t){this._ngForOf=t,this._ngForOfDirty=!0}},{key:"ngForTrackBy",set:function(t){Xt()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(t),". ")+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},get:function(){return this._trackByFn}},{key:"ngForTemplate",set:function(t){t&&(this._template=t)}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}(),ia=function t(e,n){_classCallCheck(this,t),this.record=e,this.view=n},ra=function t(){_classCallCheck(this,t)},oa=new St("DocumentToken"),sa="server",aa=null;function ua(){return aa}var la,ha=function(t){function e(){var t;_classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var i=["Webkit","Moz","O","ms"],r=0;r<i.length;r++)if(null!=t.getStyle(n,i[r]+"AnimationName")){t._animationPrefix="-"+i[r].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach((function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=o[e])}))}catch(s){t._animationPrefix=null,t._transitionEnd=null}return t}return _inherits(e,t),_createClass(e,[{key:"getDistributedNodes",value:function(t){return t.getDistributedNodes()}},{key:"resolveAndSetHref",value:function(t,e,n){t.href=null==n?e:e+"/../"+n}},{key:"supportsDOMEvents",value:function(){return!0}},{key:"supportsNativeShadowDOM",value:function(){return"function"==typeof document.body.createShadowRoot}},{key:"getAnimationPrefix",value:function(){return this._animationPrefix?this._animationPrefix:""}},{key:"getTransitionEnd",value:function(){return this._transitionEnd?this._transitionEnd:""}},{key:"supportsAnimation",value:function(){return null!=this._animationPrefix&&null!=this._transitionEnd}}]),e}(function(){function t(){_classCallCheck(this,t),this.resourceLoaderType=null}return _createClass(t,[{key:"attrToPropMap",get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t}}]),t}()),ca={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},da={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fa={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pa=function(){if(Ct.Node)return Ct.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))}}(),va=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"parse",value:function(t){throw new Error("parse not implemented")}},{key:"hasProperty",value:function(t,e){return e in t}},{key:"setProperty",value:function(t,e,n){t[e]=n}},{key:"getProperty",value:function(t,e){return t[e]}},{key:"invoke",value:function(t,e,n){t[e].apply(t,_toConsumableArray(n))}},{key:"logError",value:function(t){window.console&&(console.error?console.error(t):console.log(t))}},{key:"log",value:function(t){window.console&&window.console.log&&window.console.log(t)}},{key:"logGroup",value:function(t){window.console&&window.console.group&&window.console.group(t)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"contains",value:function(t,e){return pa.call(t,e)}},{key:"querySelector",value:function(t,e){return t.querySelector(e)}},{key:"querySelectorAll",value:function(t,e){return t.querySelectorAll(e)}},{key:"on",value:function(t,e,n){t.addEventListener(e,n,!1)}},{key:"onAndCancel",value:function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e)}},{key:"createMouseEvent",value:function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e}},{key:"createEvent",value:function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e}},{key:"preventDefault",value:function(t){t.preventDefault(),t.returnValue=!1}},{key:"isPrevented",value:function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue}},{key:"getInnerHTML",value:function(t){return t.innerHTML}},{key:"getTemplateContent",value:function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null}},{key:"getOuterHTML",value:function(t){return t.outerHTML}},{key:"nodeName",value:function(t){return t.nodeName}},{key:"nodeValue",value:function(t){return t.nodeValue}},{key:"type",value:function(t){return t.type}},{key:"content",value:function(t){return this.hasProperty(t,"content")?t.content:t}},{key:"firstChild",value:function(t){return t.firstChild}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"parentElement",value:function(t){return t.parentNode}},{key:"childNodes",value:function(t){return t.childNodes}},{key:"childNodesAsList",value:function(t){for(var e=t.childNodes,n=new Array(e.length),i=0;i<e.length;i++)n[i]=e[i];return n}},{key:"clearNodes",value:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"removeChild",value:function(t,e){t.removeChild(e)}},{key:"replaceChild",value:function(t,e,n){t.replaceChild(e,n)}},{key:"remove",value:function(t){return t.parentNode&&t.parentNode.removeChild(t),t}},{key:"insertBefore",value:function(t,e,n){t.insertBefore(n,e)}},{key:"insertAllBefore",value:function(t,e,n){n.forEach((function(n){return t.insertBefore(n,e)}))}},{key:"insertAfter",value:function(t,e,n){t.insertBefore(n,e.nextSibling)}},{key:"setInnerHTML",value:function(t,e){t.innerHTML=e}},{key:"getText",value:function(t){return t.textContent}},{key:"setText",value:function(t,e){t.textContent=e}},{key:"getValue",value:function(t){return t.value}},{key:"setValue",value:function(t,e){t.value=e}},{key:"getChecked",value:function(t){return t.checked}},{key:"setChecked",value:function(t,e){t.checked=e}},{key:"createComment",value:function(t){return this.getDefaultDocument().createComment(t)}},{key:"createTemplate",value:function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e}},{key:"createElement",value:function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}},{key:"createElementNS",value:function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)}},{key:"createTextNode",value:function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)}},{key:"createScriptTag",value:function(t,e,n){var i=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return i.setAttribute(t,e),i}},{key:"createStyleElement",value:function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n}},{key:"createShadowRoot",value:function(t){return t.createShadowRoot()}},{key:"getShadowRoot",value:function(t){return t.shadowRoot}},{key:"getHost",value:function(t){return t.host}},{key:"clone",value:function(t){return t.cloneNode(!0)}},{key:"getElementsByClassName",value:function(t,e){return t.getElementsByClassName(e)}},{key:"getElementsByTagName",value:function(t,e){return t.getElementsByTagName(e)}},{key:"classList",value:function(t){return Array.prototype.slice.call(t.classList,0)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"hasClass",value:function(t,e){return t.classList.contains(e)}},{key:"setStyle",value:function(t,e,n){t.style[e]=n}},{key:"removeStyle",value:function(t,e){t.style[e]=""}},{key:"getStyle",value:function(t,e){return t.style[e]}},{key:"hasStyle",value:function(t,e,n){var i=this.getStyle(t,e)||"";return n?i==n:i.length>0}},{key:"tagName",value:function(t){return t.tagName}},{key:"attributeMap",value:function(t){for(var e=new Map,n=t.attributes,i=0;i<n.length;i++){var r=n.item(i);e.set(r.name,r.value)}return e}},{key:"hasAttribute",value:function(t,e){return t.hasAttribute(e)}},{key:"hasAttributeNS",value:function(t,e,n){return t.hasAttributeNS(e,n)}},{key:"getAttribute",value:function(t,e){return t.getAttribute(e)}},{key:"getAttributeNS",value:function(t,e,n){return t.getAttributeNS(e,n)}},{key:"setAttribute",value:function(t,e,n){t.setAttribute(e,n)}},{key:"setAttributeNS",value:function(t,e,n,i){t.setAttributeNS(e,n,i)}},{key:"removeAttribute",value:function(t,e){t.removeAttribute(e)}},{key:"removeAttributeNS",value:function(t,e,n){t.removeAttributeNS(e,n)}},{key:"templateAwareRoot",value:function(t){return this.isTemplateElement(t)?this.content(t):t}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"getBoundingClientRect",value:function(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}},{key:"getTitle",value:function(t){return t.title}},{key:"setTitle",value:function(t,e){t.title=e||""}},{key:"elementMatches",value:function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}},{key:"isTemplateElement",value:function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName}},{key:"isTextNode",value:function(t){return t.nodeType===Node.TEXT_NODE}},{key:"isCommentNode",value:function(t){return t.nodeType===Node.COMMENT_NODE}},{key:"isElementNode",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"hasShadowRoot",value:function(t){return null!=t.shadowRoot&&t instanceof HTMLElement}},{key:"isShadowRoot",value:function(t){return t instanceof DocumentFragment}},{key:"importIntoDoc",value:function(t){return document.importNode(this.templateAwareRoot(t),!0)}},{key:"adoptNode",value:function(t){return document.adoptNode(t)}},{key:"getHref",value:function(t){return t.getAttribute("href")}},{key:"getEventKey",value:function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&fa.hasOwnProperty(e)&&(e=fa[e]))}return da[e]||e}},{key:"getGlobalEventTarget",value:function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(t){var e,n=ya||(ya=document.querySelector("base"))?ya.getAttribute("href"):null;return null==n?null:(e=n,la||(la=document.createElement("a")),la.setAttribute("href",e),"/"===la.pathname.charAt(0)?la.pathname:"/"+la.pathname)}},{key:"resetBaseElement",value:function(){ya=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"setData",value:function(t,e,n){this.setAttribute(t,"data-"+e,n)}},{key:"getData",value:function(t,e){return this.getAttribute(t,"data-"+e)}},{key:"getComputedStyle",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return getComputedStyle(t)}))},{key:"supportsWebAnimation",value:function(){return"function"==typeof Element.prototype.animate}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(t){return ta(document.cookie,t)}},{key:"setCookie",value:function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)}},{key:"attrToPropMap",get:function(){return ca}}],[{key:"makeCurrent",value:function(){var t;t=new e,aa||(aa=t)}}]),e}(ha),ya=null;function ga(){return!!window.history.pushState}var ma=new St("TRANSITION_ID"),ba=[{provide:_r,useFactory:function(t,e,n){return function(){n.get(wr).donePromise.then((function(){var n=ua();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter((function(e){return n.getAttribute(e,"ng-transition")===t})).forEach((function(t){return n.remove(t)}))}))}},deps:[ma,oa,Ae],multi:!0}],_a=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"addToWindow",value:function(t){Ct.getAngularTestability=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},Ct.getAllAngularTestabilities=function(){return t.getAllTestabilities()},Ct.getAllAngularRootElements=function(){return t.getAllRootElements()},Ct.frameworkStabilizers||(Ct.frameworkStabilizers=[]),Ct.frameworkStabilizers.push((function(t){var e=Ct.getAllAngularTestabilities(),n=e.length,i=!1,r=function(e){i=i||e,0==--n&&t(i)};e.forEach((function(t){t.whenStable(r)}))}))}},{key:"findTestabilityInTree",value:function(t,e,n){if(null==e)return null;var i=t.getTestability(e);return null!=i?i:n?ua().isShadowRoot(e)?this.findTestabilityInTree(t,ua().getHost(e),!0):this.findTestabilityInTree(t,ua().parentElement(e),!0):null}}],[{key:"init",value:function(){var e;e=new t,io=e}}]),t}();function wa(t,e){"undefined"!=typeof COMPILED&&COMPILED||((Ct.ng=Ct.ng||{})[t]=e)}var ka={ApplicationRef:fo,NgZone:Zr};function Ca(t){return bo(t)}var Sa=new St("EventManagerPlugins"),xa=function(){function t(e,n){var i=this;_classCallCheck(this,t),this._zone=n,this._eventNameToPlugin=new Map,e.forEach((function(t){return t.manager=i})),this._plugins=e.slice().reverse()}return _createClass(t,[{key:"addEventListener",value:function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}},{key:"addGlobalEventListener",value:function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,i=0;i<n.length;i++){var r=n[i];if(r.supports(t))return this._eventNameToPlugin.set(t,r),r}throw new Error("No event manager plugin found for event ".concat(t))}}]),t}(),Ea=function(){function t(e){_classCallCheck(this,t),this._doc=e}return _createClass(t,[{key:"addGlobalEventListener",value:function(t,e,n){var i=ua().getGlobalEventTarget(this._doc,t);if(!i)throw new Error("Unsupported event target ".concat(i," for event ").concat(e));return this.addEventListener(i,e,n)}}]),t}(),Ta=function(){function t(){_classCallCheck(this,t),this._stylesSet=new Set}return _createClass(t,[{key:"addStyles",value:function(t){var e=this,n=new Set;t.forEach((function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(t){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),t}(),Ma=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._doc=t,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(t.head),n}return _inherits(e,t),_createClass(e,[{key:"_addStylesToHost",value:function(t,e){var n=this;t.forEach((function(t){var i=n._doc.createElement("style");i.textContent=t,n._styleNodes.add(e.appendChild(i))}))}},{key:"addHost",value:function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}},{key:"removeHost",value:function(t){this._hostNodes.delete(t)}},{key:"onStylesAdded",value:function(t){var e=this;this._hostNodes.forEach((function(n){return e._addStylesToHost(t,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(t){return ua().remove(t)}))}}]),e}(Ta),Aa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Pa=/%COMP%/g,Va="_nghost-%COMP%",Ia="_ngcontent-%COMP%";function Da(t,e,n){for(var i=0;i<e.length;i++){var r=e[i];Array.isArray(r)?Da(t,r,n):(r=r.replace(Pa,t),n.push(r))}return n}function Ra(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Oa=function(){function t(e,n,i){_classCallCheck(this,t),this.eventManager=e,this.sharedStylesHost=n,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Na(e)}return _createClass(t,[{key:"createRenderer",value:function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Bt.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Fa(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case Bt.Native:case Bt.ShadowDom:return new Ba(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var i=Da(e.id,e.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),t}(),Na=function(){function t(e){_classCallCheck(this,t),this.eventManager=e,this.data=Object.create(null)}return _createClass(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,e){return e?document.createElementNS(Aa[e]||e,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"insertBefore",value:function(t,e,n){t&&t.insertBefore(e,n)}},{key:"removeChild",value:function(t,e){t&&t.removeChild(e)}},{key:"selectRootElement",value:function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'.concat(t,'" did not match any elements'));return e||(n.textContent=""),n}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,e,n,i){if(i){e=i+":"+e;var r=Aa[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}},{key:"removeAttribute",value:function(t,e,n){if(n){var i=Aa[n];i?t.removeAttributeNS(i,e):t.removeAttribute("".concat(n,":").concat(e))}else t.removeAttribute(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setStyle",value:function(t,e,n,i){i&sn.DashCase?t.style.setProperty(e,n,i&sn.Important?"important":""):t.style[e]=n}},{key:"removeStyle",value:function(t,e,n){n&sn.DashCase?t.style.removeProperty(e):t.style[e]=""}},{key:"setProperty",value:function(t,e,n){za(e,"property"),t[e]=n}},{key:"setValue",value:function(t,e){t.nodeValue=e}},{key:"listen",value:function(t,e,n){return za(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ra(n)):this.eventManager.addEventListener(t,e,Ra(n))}}]),t}(),La="@".charCodeAt(0);function za(t,e){if(t.charCodeAt(0)===La)throw new Error("Found the synthetic ".concat(e," ").concat(t,'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.'))}var Fa=function(t){function e(t,n,i,r){var o;_classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).component=i;var s=Da(r+"-"+i.id,i.styles,[]);return n.addStyles(s),o.contentAttr=Ia.replace(Pa,r+"-"+i.id),o.hostAttr=Va.replace(Pa,r+"-"+i.id),o}return _inherits(e,t),_createClass(e,[{key:"applyToHost",value:function(t){_get(_getPrototypeOf(e.prototype),"setAttribute",this).call(this,t,this.hostAttr,"")}},{key:"createElement",value:function(t,n){var i=_get(_getPrototypeOf(e.prototype),"createElement",this).call(this,t,n);return _get(_getPrototypeOf(e.prototype),"setAttribute",this).call(this,i,this.contentAttr,""),i}}]),e}(Na),Ba=function(t){function e(t,n,i,r){var o;_classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).sharedStylesHost=n,o.hostEl=i,o.component=r,o.shadowRoot=r.encapsulation===Bt.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var s=Da(r.id,r.styles,[]),a=0;a<s.length;a++){var u=document.createElement("style");u.textContent=s[a],o.shadowRoot.appendChild(u)}return o}return _inherits(e,t),_createClass(e,[{key:"nodeOrShadowRoot",value:function(t){return t===this.hostEl?this.shadowRoot:t}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(t,n){return _get(_getPrototypeOf(e.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(t),n)}},{key:"insertBefore",value:function(t,n,i){return _get(_getPrototypeOf(e.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(t),n,i)}},{key:"removeChild",value:function(t,n){return _get(_getPrototypeOf(e.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(t),n)}},{key:"parentNode",value:function(t){return this.nodeOrShadowRoot(_get(_getPrototypeOf(e.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(t)))}}]),e}(Na),Ha="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},ja=Ha("addEventListener"),Ua=Ha("removeEventListener"),Wa={},$a="__zone_symbol__propagationStopped",qa=function(){var t="undefined"!=typeof Zone&&Zone[Ha("BLACK_LISTED_EVENTS")];if(t){var e={};return t.forEach((function(t){e[t]=t})),e}}(),Za=function(t){return!!qa&&qa.hasOwnProperty(t)},Ka=function(t){var e=Wa[t.type];if(e){var n=this[e];if(n){var i=[t];if(1===n.length){var r=n[0];return r.zone!==Zone.current?r.zone.run(r.handler,this,i):r.handler.apply(this,i)}for(var o=n.slice(),s=0;s<o.length&&!0!==t[$a];s++){var a=o[s];a.zone!==Zone.current?a.zone.run(a.handler,this,i):a.handler.apply(this,i)}}}},Ya=function(t){function e(t,n,i){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).ngZone=n,i&&function(t){return t===sa}(i)||r.patchEvent(),r}return _inherits(e,t),_createClass(e,[{key:"patchEvent",value:function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[$a]=!0),t&&t.apply(this,arguments)}}}},{key:"supports",value:function(t){return!0}},{key:"addEventListener",value:function(t,e,n){var i=this,r=n;if(!t[ja]||Zr.isInAngularZone()&&!Za(e))t.addEventListener(e,r,!1);else{var o=Wa[e];o||(o=Wa[e]=Ha("ANGULAR"+e+"FALSE"));var s=t[o],a=s&&s.length>0;s||(s=t[o]=[]);var u=Za(e)?Zone.root:Zone.current;if(0===s.length)s.push({zone:u,handler:r});else{for(var l=!1,h=0;h<s.length;h++)if(s[h].handler===r){l=!0;break}l||s.push({zone:u,handler:r})}a||t[ja](e,Ka,!1)}return function(){return i.removeEventListener(t,e,r)}}},{key:"removeEventListener",value:function(t,e,n){var i=t[Ua];if(!i)return t.removeEventListener.apply(t,[e,n,!1]);var r=Wa[e],o=r&&t[r];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var s=!1,a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&i.apply(t,[e,Ka,!1]):t.removeEventListener.apply(t,[e,n,!1])}}]),e}(Ea),Qa={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Xa=new St("HammerGestureConfig"),Ga=new St("HammerLoader"),Ja=function(){function t(){_classCallCheck(this,t),this.events=[],this.overrides={}}return _createClass(t,[{key:"buildHammer",value:function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e}}]),t}(),tu=function(t){function e(t,n,i,r){var o;return _classCallCheck(this,e),(o=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t)))._config=n,o.console=i,o.loader=r,o}return _inherits(e,t),_createClass(e,[{key:"supports",value:function(t){return!(!Qa.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The "'.concat(t,'" event cannot be bound because Hammer.JS is not ')+"loaded and no custom loader has been specified."),1))}},{key:"addEventListener",value:function(t,e,n){var i=this,r=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var o=!1,s=function(){o=!0};return this.loader().then((function(){if(!window.Hammer)return i.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(s=function(){});o||(s=i.addEventListener(t,e,n))})).catch((function(){i.console.warn('The "'.concat(e,'" event cannot be bound because the custom ')+"Hammer.JS loader failed."),s=function(){}})),function(){s()}}return r.runOutsideAngular((function(){var o=i._config.buildHammer(t),s=function(t){r.runGuarded((function(){n(t)}))};return o.on(e,s),function(){o.off(e,s),"function"==typeof o.destroy&&o.destroy()}}))}},{key:"isCustomEvent",value:function(t){return this._config.events.indexOf(t)>-1}}]),e}(Ea),eu=["alt","control","meta","shift"],nu={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},iu=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,t),_createClass(e,[{key:"supports",value:function(t){return null!=e.parseEventName(t)}},{key:"addEventListener",value:function(t,n,i){var r=e.parseEventName(n),o=e.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return ua().onAndCancel(t,r.domEventName,o)}))}}],[{key:"parseEventName",value:function(t){var n=t.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;var r=e._normalizeKey(n.pop()),o="";if(eu.forEach((function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")})),o+=r,0!=n.length||0===r.length)return null;var s={};return s.domEventName=i,s.fullKey=o,s}},{key:"getEventFullKey",value:function(t){var e="",n=ua().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),eu.forEach((function(i){i!=n&&(0,nu[i])(t)&&(e+=i+".")})),e+=n}},{key:"eventCallback",value:function(t,n,i){return function(r){e.getEventFullKey(r)===t&&i.runGuarded((function(){return n(r)}))}}},{key:"_normalizeKey",value:function(t){switch(t){case"esc":return"escape";default:return t}}}]),e}(Ea),ru=function t(){_classCallCheck(this,t)},ou=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._doc=t,n}return _inherits(e,t),_createClass(e,[{key:"sanitize",value:function(t,e){if(null==e)return null;switch(t){case be.NONE:return e;case be.HTML:return e instanceof au?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){var n=null;try{re=re||new Gt(t);var i=e?String(e):"";n=re.getInertBodyElement(i);var r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=re.getInertBodyElement(i)}while(i!==o);var s=new pe,a=s.sanitizeChildren(me(n)||n);return Xt()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n)for(var u=me(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}(this._doc,String(e)));case be.STYLE:return e instanceof uu?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(ke);return e&&ee(e[1])===e[1]||t.match(we)&&function(t){for(var e=!0,n=!0,i=0;i<t.length;i++){var r=t.charAt(i);"'"===r&&n?e=!e:'"'===r&&e&&(n=!n)}return e&&n}(t)?t:(Xt()&&console.warn("WARNING: sanitizing unsafe style value ".concat(t," (see http://g.co/ng/security#xss).")),"unsafe")}(e));case be.SCRIPT:if(e instanceof lu)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case be.URL:return e instanceof cu||e instanceof hu?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),ee(String(e)));case be.RESOURCE_URL:if(e instanceof cu)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(t," (see http://g.co/ng/security#xss)"))}}},{key:"checkNotSafeValue",value:function(t,e){if(t instanceof su)throw new Error("Required a safe ".concat(e,", got a ").concat(t.getTypeName()," ")+"(see http://g.co/ng/security#xss)")}},{key:"bypassSecurityTrustHtml",value:function(t){return new au(t)}},{key:"bypassSecurityTrustStyle",value:function(t){return new uu(t)}},{key:"bypassSecurityTrustScript",value:function(t){return new lu(t)}},{key:"bypassSecurityTrustUrl",value:function(t){return new hu(t)}},{key:"bypassSecurityTrustResourceUrl",value:function(t){return new cu(t)}}]),e}(ru),su=function(){function t(e){_classCallCheck(this,t),this.changingThisBreaksApplicationSecurity=e}return _createClass(t,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see http://g.co/ng/security#xss)"}}]),t}(),au=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"getTypeName",value:function(){return"HTML"}}]),e}(su),uu=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"getTypeName",value:function(){return"Style"}}]),e}(su),lu=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"getTypeName",value:function(){return"Script"}}]),e}(su),hu=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"getTypeName",value:function(){return"URL"}}]),e}(su),cu=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),e}(su),du=ao(wo,"browser",[{provide:Er,useValue:"browser"},{provide:xr,useValue:function(){va.makeCurrent(),_a.init()},multi:!0},{provide:Ys,useClass:function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)))._doc=t,n._init(),n}return _inherits(e,t),_createClass(e,[{key:"_init",value:function(){this.location=ua().getLocation(),this._history=ua().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return ua().getBaseHref(this._doc)}},{key:"onPopState",value:function(t){ua().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}},{key:"onHashChange",value:function(t){ua().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}},{key:"pushState",value:function(t,e,n){ga()?this._history.pushState(t,e,n):this.location.hash=n}},{key:"replaceState",value:function(t,e,n){ga()?this._history.replaceState(t,e,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){this.location.pathname=t}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),e}(Ys),deps:[oa]},{provide:oa,useFactory:function(){return document},deps:[]}]);function fu(){return new Kt}var pu=function(){function t(e){if(_classCallCheck(this,t),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(t,null,[{key:"withServerTransition",value:function(e){return{ngModule:t,providers:[{provide:kr,useValue:e.appId},{provide:ma,useExisting:kr},ba]}}}]),t}();"undefined"!=typeof window&&window;var vu=new w((function(t){return t.complete()})),yu=function(t){function e(t,n){var i;_classCallCheck(this,e),(i=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).sources=n,i.completed=0,i.haveValues=0;var r=n.length;i.values=new Array(r);for(var o=0;o<r;o++){var s=B(_assertThisInitialized(i),n[o],null,o);s&&i.add(s)}return i}return _inherits(e,t),_createClass(e,[{key:"notifyNext",value:function(t,e,n,i,r){this.values[n]=e,r._hasValue||(r._hasValue=!0,this.haveValues++)}},{key:"notifyComplete",value:function(t){var e=this.destination,n=this.haveValues,i=this.values,r=i.length;t._hasValue?(this.completed++,this.completed===r&&(n===r&&e.next(i),e.complete())):e.complete()}}]),e}(H);function gu(t){return null==t||0===t.length}var mu=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,bu=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"min",value:function(t){return function(e){if(gu(e.value)||gu(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}},{key:"max",value:function(t){return function(e){if(gu(e.value)||gu(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}},{key:"required",value:function(t){return gu(t.value)?{required:!0}:null}},{key:"requiredTrue",value:function(t){return!0===t.value?null:{required:!0}}},{key:"email",value:function(t){return gu(t.value)?null:mu.test(t.value)?null:{email:!0}}},{key:"minLength",value:function(t){return function(e){if(gu(e.value))return null;var n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}},{key:"maxLength",value:function(t){return function(e){var n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}},{key:"pattern",value:function(e){return e?("string"==typeof e?(i="","^"!==e.charAt(0)&&(i+="^"),i+=e,"$"!==e.charAt(e.length-1)&&(i+="$"),n=new RegExp(i)):(i=e.toString(),n=e),function(t){if(gu(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:i,actualValue:e}}}):t.nullValidator;var n,i}},{key:"nullValidator",value:function(t){return null}},{key:"compose",value:function(t){if(!t)return null;var e=t.filter(_u);return 0==e.length?null:function(t){return ku(function(t,e){return e.map((function(e){return e(t)}))}(t,e))}}},{key:"composeAsync",value:function(t){if(!t)return null;var e=t.filter(_u);return 0==e.length?null:function(t){return function t(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r;return"function"==typeof n[n.length-1]&&(r=n.pop()),1===n.length&&u(n[0])&&(n=n[0]),0===n.length?vu:r?t(n).pipe(j((function(t){return r.apply(void 0,_toConsumableArray(t))}))):new w((function(t){return new yu(t,n)}))}(function(t,e){return e.map((function(e){return e(t)}))}(t,e).map(wu)).pipe(j(ku))}}}]),t}();function _u(t){return null!=t}function wu(t){var e=We(t)?q(t):t;if(!$e(e))throw new Error("Expected validator to return Promise or Observable.");return e}function ku(t){var e=t.reduce((function(t,e){return null!=e?Object.assign({},t,e):t}),{});return 0===Object.keys(e).length?null:e}function Cu(t){return t.validate?function(e){return t.validate(e)}:t}function Su(t){return t.validate?function(e){return t.validate(e)}:t}var xu=function(){function t(){_classCallCheck(this,t),this._accessors=[]}return _createClass(t,[{key:"add",value:function(t,e){this._accessors.push([t,e])}},{key:"remove",value:function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}},{key:"select",value:function(t){var e=this;this._accessors.forEach((function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)}))}},{key:"_isSameGroup",value:function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}]),t}(),Eu=function(){function t(e,n,i){_classCallCheck(this,t),this._element=e,this._renderer=n,this._select=i,this._select&&(this.id=this._select._registerOption())}return _createClass(t,[{key:"_setElementValue",value:function(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}},{key:"ngValue",set:function(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(function(t,e){return null==t?"".concat(e):(e&&"object"==typeof e&&(e="Object"),"".concat(t,": ").concat(e).slice(0,50))}(this.id,t)),this._select.writeValue(this._select.value))}},{key:"value",set:function(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}}]),t}();function Tu(t,e){return null==t?"".concat(e):("string"==typeof e&&(e="'".concat(e,"'")),e&&"object"==typeof e&&(e="Object"),"".concat(t,": ").concat(e).slice(0,50))}var Mu=function(){function t(e,n,i){_classCallCheck(this,t),this._element=e,this._renderer=n,this._select=i,this._select&&(this.id=this._select._registerOption(this))}return _createClass(t,[{key:"_setElementValue",value:function(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}},{key:"_setSelected",value:function(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}},{key:"ngValue",set:function(t){null!=this._select&&(this._value=t,this._setElementValue(Tu(this.id,t)),this._select.writeValue(this._select.value))}},{key:"value",set:function(t){this._select?(this._value=t,this._setElementValue(Tu(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}}]),t}();function Au(t){var e,n=Vu(t)?t.validators:t;return Array.isArray(n)?null!=(e=n)?bu.compose(e.map(Cu)):null:n||null}function Pu(t,e){var n,i=Vu(e)?e.asyncValidators:t;return Array.isArray(i)?null!=(n=i)?bu.composeAsync(n.map(Su)):null:i||null}function Vu(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var Iu,Du,Ru,Ou=function(){function t(e,n){_classCallCheck(this,t),this.validator=e,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return _createClass(t,[{key:"setValidators",value:function(t){this.validator=Au(t)}},{key:"setAsyncValidators",value:function(t){this.asyncValidator=Pu(t)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(t){return t.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(t){t.markAsUntouched({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"markAsDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}},{key:"markAsPristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(t){t.markAsPristine({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"markAsPending",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(e){e.disable(Object.assign({},t,{onlySelf:!0}))})),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!0)}))}},{key:"enable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild((function(e){e.enable(Object.assign({},t,{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach((function(t){return t(!1)}))}},{key:"_updateAncestors",value:function(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(t){this._parent=t}},{key:"updateValueAndValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}},{key:"_updateTreeValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(e){return e._updateTreeValidity(t)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(t){var e=this;if(this.asyncValidator){this.status="PENDING";var n=wu(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){return e.setErrors(n,{emitEvent:t})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}},{key:"get",value:function(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce((function(t,e){return t instanceof Lu?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof zu&&t.at(e)||null}),t))}(this,t)}},{key:"getError",value:function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}},{key:"hasError",value:function(t,e){return!!this.getError(t,e)}},{key:"_updateControlsErrors",value:function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}},{key:"_initObservables",value:function(){this.valueChanges=new gr,this.statusChanges=new gr}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(t){return this._anyControls((function(e){return e.status===t}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(t){return t.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(t){return t.touched}))}},{key:"_updatePristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"_updateTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"_isBoxedValue",value:function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}},{key:"_registerOnCollectionChange",value:function(t){this._onCollectionChange=t}},{key:"_setUpdateStrategy",value:function(t){Vu(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}},{key:"_parentMarkedDirty",value:function(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"root",get:function(){for(var t=this;t._parent;)t=t._parent;return t}}]),t}(),Nu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,Au(i),Pu(r,i))))._onChange=[],t._applyFormState(n),t._setUpdateStrategy(i),t.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),t._initObservables(),t}return _inherits(e,t),_createClass(e,[{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(t){return t(e.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(t,e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(t){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(t){this._onChange.push(t)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(t){this._onDisabledChange.push(t)}},{key:"_forEachChild",value:function(t){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}]),e}(Ou),Lu=function(t){function e(t,n,i){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,Au(n),Pu(i,n)))).controls=t,r._initObservables(),r._setUpdateStrategy(n),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}return _inherits(e,t),_createClass(e,[{key:"registerControl",value:function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}},{key:"addControl",value:function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),Object.keys(t).forEach((function(i){e._throwIfControlMissing(i),e.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(i){e.controls[i]&&e.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,i){n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(t,e,n){return t[n]=e instanceof Nu?e.value:e.getRawValue(),t}))}},{key:"_syncPendingControls",value:function(){var t=this._reduceChildren(!1,(function(t,e){return!!e._syncPendingControls()||t}));return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: ".concat(t,"."))}},{key:"_forEachChild",value:function(t){var e=this;Object.keys(this.controls).forEach((function(n){return t(e.controls[n],n)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(t){var e=this,n=!1;return this._forEachChild((function(i,r){n=n||e.contains(r)&&t(i)})),n}},{key:"_reduceValue",value:function(){var t=this;return this._reduceChildren({},(function(e,n,i){return(n.enabled||t.disabled)&&(e[i]=n.value),e}))}},{key:"_reduceChildren",value:function(t,e){var n=t;return this._forEachChild((function(t,i){n=e(n,t,i)})),n}},{key:"_allControlsDisabled",value:function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++){var n=e[t];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),e}(Ou),zu=function(t){function e(t,n,i){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,Au(n),Pu(i,n)))).controls=t,r._initObservables(),r._setUpdateStrategy(n),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}return _inherits(e,t),_createClass(e,[{key:"at",value:function(t){return this.controls[t]}},{key:"push",value:function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}},{key:"removeAt",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),this.updateValueAndValidity()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),t.forEach((function(t,i){e._throwIfControlMissing(i),e.at(i).setValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.forEach((function(t,i){e.at(i)&&e.at(i).patchValue(t,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,i){n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})})),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this.controls.map((function(t){return t instanceof Nu?t.value:t.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(t){return t._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var t=this.controls.reduce((function(t,e){return!!e._syncPendingControls()||t}),!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index ".concat(t))}},{key:"_forEachChild",value:function(t){this.controls.forEach((function(e,n){t(e,n)}))}},{key:"_updateValue",value:function(){var t=this;this.value=this.controls.filter((function(e){return e.enabled||t.disabled})).map((function(t){return t.value}))}},{key:"_anyControls",value:function(t){return this.controls.some((function(e){return e.enabled&&t(e)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(e){return t._registerControl(e)}))}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=this.controls[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){if(i.value.enabled)return!1}}catch(o){e=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}},{key:"length",get:function(){return this.controls.length}}]),e}(Ou),Fu=new St("NgModelWithFormControlWarning"),Bu=function t(){_classCallCheck(this,t)},Hu=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"group",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._reduceControls(t),i=null,r=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,r=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,r=null!=e.asyncValidator?e.asyncValidator:null)),new Lu(n,{asyncValidators:r,updateOn:o,validators:i})}},{key:"control",value:function(t,e,n){return new Nu(t,e,n)}},{key:"array",value:function(t,e,n){var i=this,r=t.map((function(t){return i._createControl(t)}));return new zu(r,e,n)}},{key:"_reduceControls",value:function(t){var e=this,n={};return Object.keys(t).forEach((function(i){n[i]=e._createControl(t[i])})),n}},{key:"_createControl",value:function(t){return t instanceof Nu||t instanceof Lu||t instanceof zu?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}]),t}(),ju=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"withConfig",value:function(e){return{ngModule:t,providers:[{provide:Fu,useValue:e.warnOnNgModelWithFormControl}]}}}]),t}(),Uu=function(){function t(t){var e=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(t){return e._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._configureCanvas(),this._installResolutionListener()}return t.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(t.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),t.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");return t.devicePixelRatio},enumerable:!0,configurable:!0}),t.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},t.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter((function(e){return e!=t}))},t.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},t.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach((function(e){return e.call(t)}))},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+t.devicePixelRatio+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},t}();function Wu(t,e,n,i,r,o){isFinite(e)&&isFinite(i)&&isFinite(n)&&isFinite(r)&&(t.save(),$u(t,o),t.beginPath(),t.moveTo(e,n),t.lineTo(i,r),t.stroke(),t.restore())}function $u(t,e){var n,i=((n={})[0]=[],n[1]=[t.lineWidth,2*t.lineWidth],n[2]=[5*t.lineWidth,6*t.lineWidth],n[3]=[6*t.lineWidth,6*t.lineWidth],n[4]=[t.lineWidth,4*t.lineWidth],n)[e];t.setLineDash(i)}(Ru=Iu||(Iu={}))[Ru.Simple=0]="Simple",Ru[Ru.WithSteps=1]="WithSteps",function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(Du||(Du={}));var qu=function(t,e){return(qu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Zu(t,e){function n(){this.constructor=t}qu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ku=function(){return(Ku=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function Yu(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Qu(t){if(void 0===t)throw new Error("Value is undefined");return t}function Xu(t){if(null===t)throw new Error("Value is null");return t}function Gu(t){return Xu(Qu(t))}function Ju(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0,r=e;i<r.length;i++){var o=r[i];for(var s in o)void 0!==o[s]&&("object"!=typeof o[s]||void 0===t[s]?t[s]=o[s]:Ju(t[s],o[s]))}return t}function tl(t){return"number"==typeof t&&isFinite(t)}function el(t){return"number"==typeof t&&t%1==0}function nl(t){return"string"==typeof t}function il(t){return!(t<=0||t>0)}function rl(t){var e,n,i,r=t;if(!r||"object"!=typeof r)return r;for(n in e=Array.isArray(r)?[]:{},r)r.hasOwnProperty(n)&&(e[n]=(i=r[n])&&"object"==typeof i?rl(i):i);return e}function ol(t){return null!==t}function sl(t){return null===t?void 0:t}var al,ul,ll,hl,cl=function(){function t(){this.t=[]}return t.prototype.setRenderers=function(t){this.t=t},t.prototype.draw=function(t,e){this.t.forEach((function(n){t.save(),n.draw(t,e),t.restore()}))},t}(),dl=function(){function t(){this._data=null}return t.prototype.setData=function(t){this._data=t},t.prototype.draw=function(t){if(null!==this._data&&null!==this._data.visibleRange){var e=this._data.visibleRange,n=this._data,i=function(i){t.beginPath();for(var r=e.to-1;r>=e.from;--r){var o=n.items[r];t.moveTo(o.x,o.y),t.arc(o.x,o.y,i,0,2*Math.PI)}t.fill()};t.fillStyle=n.backColor,i(n.radius+2),t.fillStyle=n.lineColor,i(n.radius)}},t}(),fl={from:0,to:1},pl=function(){function t(t,e){this.i=new cl,this.s=[],this.u=[],this.o=!0,this.l=t,this.v=e,this.i.setRenderers(this.s)}return t.prototype.update=function(t){var e=this,n=this.l.serieses();n.length!==this.s.length&&(this.u=n.map((function(){return{items:[{x:0,y:0,time:0,price:0}],lineColor:"",backColor:e.l.options().layout.backgroundColor,radius:0,visibleRange:null}})),this.s=this.u.map((function(t){var e=new dl;return e.setData(t),e})),this.i.setRenderers(this.s)),this.o=!0},t.prototype.renderer=function(t,e,n){return this.o&&(this.m(),this.o=!1),this.i},t.prototype.m=function(){var t=this,e=this.l.serieses(),n=this.v.appliedIndex(),i=this.l.timeScale();e.forEach((function(e,r){var o=t.u[r],s=e.markerDataAtIndex(n);if(null!==s){var a=Xu(e.firstValue());o.lineColor=e.barColorer().barStyle(n).barColor,o.backColor=t.l.options().layout.backgroundColor,o.radius=s.radius,o.items[0].price=s.price,o.items[0].y=e.priceScale().priceToCoordinate(s.price,a.value),o.items[0].time=n,o.items[0].x=i.indexToCoordinate(n),o.visibleRange=fl}else o.visibleRange=null}))},t}(),vl=function(){function t(t){this.M=t}return t.prototype.draw=function(t){if(null!==this.M){var e=this.M.vertLine.visible,n=this.M.horzLine.visible;if(e||n){var i=this.M.x+1+(this.M.horzLine.lineWidth%2==0?.5:0),r=this.M.y+(this.M.vertLine.lineWidth%2==0?.5:0),o=this.M.w,s=this.M.h;e&&i>=0&&(t.lineWidth=this.M.vertLine.lineWidth,t.strokeStyle=this.M.vertLine.color,t.fillStyle=this.M.vertLine.color,Wu(t,i,0,i,s,this.M.vertLine.lineStyle)),n&&r>=0&&(t.lineWidth=this.M.horzLine.lineWidth,t.strokeStyle=this.M.horzLine.color,t.fillStyle=this.M.horzLine.color,Wu(t,0,r,o,r,this.M.horzLine.lineStyle))}}},t}(),yl=function(){function t(t){this.o=!0,this.p={vertLine:{lineWidth:1,lineStyle:0,color:"",visible:!1},horzLine:{lineWidth:1,lineStyle:0,color:"",visible:!1},w:0,h:0,x:0,y:0},this.g=new vl(this.p),this.k=t}return t.prototype.update=function(){this.o=!0},t.prototype.renderer=function(t,e){return this.o&&this.m(),this.g},t.prototype.m=function(){var t=this.k.visible(),e=Xu(this.k.pane()),n=e.model().options().crosshair,i=this.p;i.horzLine.visible=t&&this.k.horzLineVisible(e),i.vertLine.visible=t&&this.k.vertLineVisible(),i.horzLine.lineWidth=n.horzLine.width,i.horzLine.lineStyle=n.horzLine.style,i.horzLine.color=n.horzLine.color,i.vertLine.lineWidth=n.vertLine.width,i.vertLine.lineStyle=n.vertLine.style,i.vertLine.color=n.vertLine.color,i.w=e.width(),i.h=e.height(),i.x=this.k.appliedX(),i.y=this.k.appliedY()},t}(),gl={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ml(t){return il(e=t)?0:e<0?0:e>255?255:Math.round(e);var e}function bl(t){return il(e=t)?0:e<0?0:e>1?1:Math.round(1e4*e)/1e4;var e}function _l(t){var e=function(t){(t=t.toLowerCase())in gl&&(t=gl[t]);var e,n=null!==(e=ll.re.exec(t))?ll.parse(e):null;if(null!==n)return n;var i=function(t){var e=ul.re.exec(t);return null!==e?ul.parse(e):null}(t);if(null!==i)return i;var r=function(t){var e=al.re.exec(t);return null!==e?al.parse(e):null}(t);if(null!==r)return r;var o=function(t){var e=hl.re.exec(t);return null!==e?hl.parse(e):null}(t);return null!==o?[o[0],o[1],o[2]]:null}(t);if(null!==e)return e;throw new Error("Passed color string "+t+" does not match any of the known color representations")}function wl(t,e){if(e<0||e>255)throw new Error("invalid threshold value, valid values are [0, 255]");return function(t){return.199*t[0]+.687*t[1]+.114*t[2]}(t)>=e?"white":"black"}function kl(t){return"black"===wl(_l(t),160)?"white":"black"}!function(t){t.re=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/,t.parse=function(t){return[ml(parseInt(t[1]+t[1],16)),ml(parseInt(t[2]+t[2],16)),ml(parseInt(t[3]+t[3],16))]}}(al||(al={})),function(t){t.re=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,t.parse=function(t){return[ml(parseInt(t[1],16)),ml(parseInt(t[2],16)),ml(parseInt(t[3],16))]}}(ul||(ul={})),function(t){t.re=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,t.parse=function(t){return[ml(parseInt(t[1],10)),ml(parseInt(t[2],10)),ml(parseInt(t[3],10))]}}(ll||(ll={})),function(t){t.re=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/,t.parse=function(t){return[ml(parseInt(t[1],10)),ml(parseInt(t[2],10)),ml(parseInt(t[3],10)),bl(parseFloat(t[4]))]}}(hl||(hl={}));var Cl,Sl=function(){function t(t,e){this.setData(t,e)}return t.prototype.setData=function(t,e){this.M=t,this.N=e},t.prototype.draw=function(t,e,n,i,r){if(this.M.visible){var o=e.fontSize;t.font=e.font;var s=this.M.tickVisible?e.tickLength:0,a=this.M.borderVisible?e.borderSize:0,u=e.paddingTop,l=e.paddingBottom,h=e.paddingInner,c=e.paddingOuter,d=this.M.text,f=Math.ceil(n.measureText(t,d)),p=e.baselineOffset,v=e.fontSize+u+l,y=a+f+h+c+s,g=this.N.coordinate;this.N.fixedCoordinate&&(g=this.N.fixedCoordinate);var m,b,_=g-Math.floor(o/2)-u-.5,w=_+v,k="right"===r,C=k?i-a-.5:.5,S=C;t.fillStyle=function(t){return function(t){return 0===t.indexOf("#")}(t)?t:"rgba("+(e=[(n=_l(t))[0],n[1],n[2],bl(1)])[0]+", "+e[1]+", "+e[2]+", "+e[3]+")";var e,n}(this.N.background),t.lineWidth=1,t.lineCap="butt",d&&(k?(m=C-s,b=(S=C-y)+c):(S=C+y,m=C+s,b=C+a+s+h),t.beginPath(),t.moveTo(C,_),t.lineTo(S,_),t.lineTo(S,w),t.lineTo(C,w),t.fill(),this.M.tickVisible&&(t.beginPath(),t.strokeStyle=this.N.color,t.moveTo(C,g),t.lineTo(m,g),t.stroke()),t.textAlign="left",t.fillStyle=this.N.color,t.fillText(d,b,w-l-p))}},t.prototype.height=function(t,e){return this.M.visible?t.fontSize+t.paddingTop+t.paddingBottom:0},t}(),xl=function(){function t(t){this.S={coordinate:0,color:"#FFF",background:"#000"},this.D={text:"",visible:!1,tickVisible:!0,borderVisible:!0,lineStyle:1},this.C={text:"",visible:!1,tickVisible:!1,borderVisible:!1,lineStyle:1},this.o=!0,this.T=new(t||Sl)(this.D,this.S),this.A=new(t||Sl)(this.C,this.S)}return t.prototype.text=function(){return this.D.text},t.prototype.background=function(){return this.S.background},t.prototype.color=function(){return kl(this.background())},t.prototype.coordinate=function(){return this.L(),this.S.coordinate},t.prototype.floatCoordinate=function(){return this.L(),this.S.floatCoordinate||this.S.coordinate},t.prototype.update=function(){this.o=!0},t.prototype.height=function(t,e){return void 0===e&&(e=!1),Math.max(this.T.height(t,e),this.A.height(t,e))},t.prototype.getFixedCoordinate=function(){return this.S.fixedCoordinate||0},t.prototype.setFixedCoordinate=function(t){this.S.fixedCoordinate=t},t.prototype.isVisible=function(){return this.L(),this.D.visible||this.C.visible},t.prototype.isAxisLabelVisible=function(){return this.L(),this.D.visible},t.prototype.isPaneLabelVisible=function(){return this.L(),this.C.visible},t.prototype.renderer=function(){return this.L(),this.T.setData(this.D,this.S),this.A.setData(this.C,this.S),this.T},t.prototype.paneRenderer=function(){return this.L(),this.T.setData(this.D,this.S),this.A.setData(this.C,this.S),this.A},t.prototype.L=function(){this.o&&(this._updateRendererData(this.D,this.C,this.S),this.o=!1)},t}(),El=function(t){function e(e,n,i){var r=t.call(this)||this;return r.k=e,r.B=n,r.F=i,r}return Zu(e,t),e.prototype._updateRendererData=function(t,e,n){t.visible=!1;var i=this.k.options().horzLine;if(i.labelVisible){var r=this.B.firstValue();if(this.k.visible()&&!this.B.isEmpty()&&null!==r){n.background=i.labelBackgroundColor,n.color=kl(i.labelBackgroundColor);var o=this.F(this.B);n.coordinate=o.coordinate,t.text=this.B.formatPrice(o.price,r),t.visible=!0}}},e}(xl),Tl=/[1-9]/g,Ml=function(){function t(){this.M=null}return t.prototype.setData=function(t){this.M=t},t.prototype.draw=function(t,e){if(null!==this.M&&!1!==this.M.visible&&0!==this.M.text.length){t.font=e.font;var n=Math.round(e.widthCache.measureText(t,this.M.text,Tl));if(!(n<=0)){var i=e.paddingHorizontal,r=n+2*i,o=r/2,s=this.M.width,a=this.M.coordinate,u=Math.floor(a-o)+.5;u<0?(a+=Math.abs(0-u),u=Math.floor(a-o)+.5):u+r>s&&(a-=Math.abs(s-(u+r)),u=Math.floor(a-o)+.5);var l=u+r,h=-.5+e.borderSize+e.paddingTop+e.fontSize+e.paddingBottom;t.fillStyle=this.M.background,t.lineWidth=1,function(t,e,n,i,r,o){t.beginPath(),t.moveTo(e+1,n),t.lineTo(e+i-1,n),t.arcTo(e+i,n,e+i,.5,1),t.lineTo(e+i,n+r-1),t.arcTo(e+i,n+r,e+i-1,n+r,1),t.lineTo(e+1,n+r),t.arcTo(e,n+r,e,n+r-1,1),t.lineTo(e,.5),t.arcTo(e,n,e+1,n,1)}(t,u,-.5,l-u,h- -.5),t.fill();var c=Math.round(this.M.coordinate+1),d=-.5+e.borderSize+e.tickLength;t.strokeStyle=this.M.color,t.beginPath(),t.moveTo(c,-.5),t.lineTo(c,d),t.stroke();var f=h-e.baselineOffset-e.paddingBottom;t.textAlign="left",t.fillStyle=this.M.color,t.fillText(this.M.text,u+i,f)}}},t}(),Al=function(t){function e(e,n,i){var r=t.call(this)||this;return r.o=!0,r.g=new Ml,r.p={visible:!1,background:"#4c525e",color:"white",text:"",width:0,coordinate:NaN},r.v=e,r.V=n,r.F=i,r}return Zu(e,t),e.prototype.update=function(){this.o=!0},e.prototype.renderer=function(){return this.o&&(this.m(),this.o=!1),this.g.setData(this.p),this.g},e.prototype.m=function(){var t=this.p;t.visible=!1;var e=this.v.options().vertLine;if(e.labelVisible){var n=this.V.timeScale();if(!n.isEmpty()){var i=n.indexToUserTime(this.v.appliedIndex());t.width=n.width();var r=this.F();r.time&&(t.coordinate=r.coordinate,t.text=n.formatDateTime(Xu(i)),t.visible=!0,t.background=e.labelBackgroundColor,t.color=kl(e.labelBackgroundColor))}}},e}(function(){function t(){this._text="",this._background="#585858",this._coordinate=0}return t.prototype.text=function(){return this._text},t.prototype.background=function(){return this._background},t.prototype.color=function(){return"black"===wl(_l(this._background),150)?"white":"black"},t.prototype.coordinate=function(){return this._coordinate},t}()),Pl=function(){function t(){this._priceScale=null,this.I=0}return t.prototype.zorder=function(){return this.I},t.prototype.setZorder=function(t){this.I=t},t.prototype.priceScale=function(){return this._priceScale},t.prototype.setPriceScale=function(t){this._priceScale=t},t.prototype.priceAxisViews=function(t,e){return[]},t.prototype.paneViews=function(t){return[]},t.prototype.timeAxisViews=function(){return[]},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(Cl||(Cl={}));var Vl=function(t){function e(e,n){var i,r,o=t.call(this)||this;return o.P=null,o.O=NaN,o.W=0,o.R=!0,o.q=new Map,o.U=!1,o.j=NaN,o.H=NaN,o.Y=NaN,o.K=NaN,o.V=e,o.$=n,o._=new pl(e,o),o.X=(i=function(){return o.O},r=function(){return o.H},function(t){var e=r(),n=i();if(t===Xu(o.P).defaultPriceScale())return{price:n,coordinate:e};var s=Xu(t.firstValue());return{price:t.coordinateToPrice(e,s),coordinate:e}}),o.Z=new Al(o,e,(function(){return{time:o.V.timeScale().indexToUserTime(o.W),coordinate:o.appliedX()}})),o.J=new yl(o),o}return Zu(e,t),e.prototype.index=function(){return this.W},e.prototype.options=function(){return this.$},e.prototype.saveOriginCoord=function(t,e){this.Y=t,this.K=e},e.prototype.clearOriginCoord=function(){this.Y=NaN,this.K=NaN},e.prototype.originCoordX=function(){return this.Y},e.prototype.originCoordY=function(){return this.K},e.prototype.setPosition=function(t,e,n){this.U||(this.U=!0),this.R=!0,this.G(t,e,n)},e.prototype.appliedIndex=function(){return this.W},e.prototype.appliedX=function(){return this.j},e.prototype.appliedY=function(){return this.H},e.prototype.visible=function(){return this.R},e.prototype.clearPosition=function(){this.R=!1,this.tt(),this.O=NaN,this.j=NaN,this.H=NaN,this.P=null,this.clearOriginCoord()},e.prototype.paneViews=function(t){return null!==this.P?[this.J,this._]:[]},e.prototype.horzLineVisible=function(t){return t===this.P&&this.$.horzLine.visible},e.prototype.vertLineVisible=function(){return this.$.vertLine.visible},e.prototype.priceAxisViews=function(t,e){this.R&&this.P===t||this.q.clear();var n=[];return this.P===t&&n.push(this.it(this.q,e,this.X)),n},e.prototype.timeAxisViews=function(){return this.R?[this.Z]:[]},e.prototype.pane=function(){return this.P},e.prototype.updateAllViews=function(){this.q.forEach((function(t){return t.update()})),this.Z.update(),this._.update()},e.prototype.nt=function(t){return t&&!t.defaultPriceScale().isEmpty()?t.defaultPriceScale():null},e.prototype.G=function(t,e,n){this.st(t,e,n)&&this.updateAllViews()},e.prototype.st=function(t,e,n){var i=this.j,r=this.H,o=this.O,s=this.W,a=this.P,u=this.nt(n);this.W=t,this.j=isNaN(t)?NaN:this.V.timeScale().indexToCoordinate(t);var l=null!==u?u.firstValue():null;return null!==u&&null!==l?(this.P=n,this.O=e,this.H=u.priceToCoordinate(e,l)):(this.P=null,this.O=NaN,this.H=NaN),i!==this.j||r!==this.H||s!==this.W||o!==this.O||a!==this.P},e.prototype.tt=function(){var t=this.V.serieses().map((function(t){return t.bars().lastIndex()})).filter(ol),e=0===t.length?null:Math.max.apply(Math,t);this.W=null!==e?e:NaN},e.prototype.it=function(t,e,n){var i=t.get(e);return void 0===i&&(i=new El(this,e,n),t.set(e,i)),i},e}(Pl);function Il(t,e){if(!tl(t))return"n/a";if(!el(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return 0===e?t.toString():("0000000000000000"+t.toString()).slice(-e)}var Dl,Rl=function(){function t(t,e,n,i){if(e||(e=1),tl(t)&&el(t)||(t=100),t<0)throw new TypeError("invalid base");this.B=t,this.ht=e,this.rt=i,n&&void 0!==i&&i>0&&2!==i&&4!==i&&8!==i||(this.ut=n,this.et())}return t.prototype.format=function(t){var e=t<0?"\u2212":"";return t=Math.abs(t),this.ut?e+this.ot(t):e+this.ft(t)},t.prototype.et=function(){if(this._fractionalLength=0,this.B>0&&this.ht>0){var t=this.B;for(this.ut&&this.rt&&(t/=this.rt);t>1;)t/=10,this._fractionalLength++}},t.prototype.ft=function(t){var e;e=this.ut?Math.pow(10,this._fractionalLength||0):this.B/this.ht;var n=Math.floor(t),i="",r=void 0!==this._fractionalLength?this._fractionalLength:NaN;if(e>1){var o=+(Math.round(t*e)-n*e).toFixed(this._fractionalLength);o>=e&&(o-=e,n+=1),i="."+Il(+o.toFixed(this._fractionalLength)*this.ht,r)}else n=Math.round(n*e)/e,r>0&&(i="."+Il(0,r));return n.toFixed(0)+i},t.prototype.ot=function(t){var e=this.B/this.ht,n=Math.floor(t),i=Math.round(t*e)-n*e;if(i===e&&(i=0,n+=1),!this._fractionalLength)throw new Error("_fractionalLength is not calculated");var r="";if(this.rt){var o=i%this.rt;r=Il(i=(i-o)/this.rt,this._fractionalLength)+"'"+(2===this.rt?["0","5"][o]:8===this.rt?["0","1","2","3","4","5","6","7"][o]:["0","2","5","7"][o])}else r=Il(i*this.ht,this._fractionalLength);return n.toString()+"'"+r},t}(),Ol=function(t){function e(e){return void 0===e&&(e=100),t.call(this,e)||this}return Zu(e,t),e.prototype.format=function(e){return t.prototype.format.call(this,e)+"%"},e}(Rl),Nl=function(){function t(){this.at=[]}return t.prototype.subscribe=function(t,e,n){this.at.push({callback:t,linkedObject:e,singleshot:!0===n})},t.prototype.unsubscribe=function(t){var e=this.at.findIndex((function(e){return t===e.callback}));e>-1&&this.at.splice(e,1)},t.prototype.unsubscribeAll=function(t){this.at=this.at.filter((function(e){return e.linkedObject===t}))},t.prototype.fire=function(t,e){var n=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}(this.at);this.at=this.at.filter((function(t){return!t.singleshot})),n.forEach((function(n){return n.callback(t,e)}))},t.prototype.hasListeners=function(){return this.at.length>0},t.prototype.destroy=function(){this.at=[]},t}(),Ll=function(t){function e(e){var n=t.call(this)||this;return n.V=e,n}return Zu(e,t),e.prototype.model=function(){return this.V},e.prototype.minMove=function(){return 0},e.prototype.autoscaleInfo=function(t,e){return null},e}(Pl),zl=function(){function t(t,e){this.ct=t,this.lt=e}return t.prototype.equals=function(t){return null!==t&&this.ct===t.ct&&this.lt===t.lt},t.prototype.clone=function(){return new t(this.ct,this.lt)},t.prototype.minValue=function(){return this.ct},t.prototype.setMinValue=function(t){this.ct=t},t.prototype.maxValue=function(){return this.lt},t.prototype.setMaxValue=function(t){this.lt=t},t.prototype.length=function(){return this.lt-this.ct},t.prototype.isEmpty=function(){return this.lt===this.ct||Number.isNaN(this.lt)||Number.isNaN(this.ct)},t.prototype.merge=function(e){return null===e?this:new t(Math.min(this.minValue(),e.minValue()),Math.max(this.maxValue(),e.maxValue()))},t.prototype.apply=function(t,e){this.ct=Math.min(this.ct,t),this.lt=Math.max(this.lt,e)},t.prototype.set=function(t,e){this.ct=t,this.lt=e},t.prototype.scaleAroundCenter=function(t){if(tl(t)&&0!=this.lt-this.ct){var e=.5*(this.lt+this.ct),n=this.lt-e,i=this.ct-e;i*=t,this.lt=e+(n*=t),this.ct=e+i}},t.prototype.shift=function(t){tl(t)&&(this.lt+=t,this.ct+=t)},t.prototype.containsStrictly=function(t){return t.minValue()>this.ct&&t.maxValue()<this.lt},t}();function Fl(t,e,n){return Math.min(Math.max(t,e),n)}function Bl(t,e,n){return e-t<=n}function Hl(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function jl(t,e){var n=100*(t-e)/e;return e<0?-n:n}function Ul(t,e){var n=jl(t.minValue(),e),i=jl(t.maxValue(),e);return new zl(n,i)}function Wl(t,e){var n=100*(t-e)/e+100;return e<0?-n:n}function $l(t,e){var n=Wl(t.minValue(),e),i=Wl(t.maxValue(),e);return new zl(n,i)}function ql(t){var e=Math.abs(t);if(e<1e-8)return 0;var n=Hl(e+1e-4)+4;return t<0?-n:n}function Zl(t){var e=Math.abs(t);if(e<1e-8)return 0;var n=Math.pow(10,e-4)-1e-4;return t<0?-n:n}function Kl(t){if(null===t)return null;var e=ql(t.minValue()),n=ql(t.maxValue());return new zl(e,n)}!function(t){t[t.LogicalOffset=4]="LogicalOffset",t[t.CoordOffset=1e-4]="CoordOffset"}(Dl||(Dl={}));var Yl=function(){function t(t,e){if(this.vt=t,this.dt=e,function(t){if(t<0)return!1;for(var e=t;e>1;e/=10)if(e%10!=0)return!1;return!0}(this.vt))this.wt=[2,2.5,2];else{this.wt=[];for(var n=this.vt;1!==n;){if(n%2==0)this.wt.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.wt.push(2),this.wt.push(2.5),n/=5}if(this.wt.length>100)throw new Error("something wrong with base")}}}return t.prototype.tickSpan=function(t,e,n){for(var i=0===this.vt?0:1/this.vt,r=Math.pow(10,Math.max(0,Math.ceil(Hl(t-e)))),o=0,s=this.dt[0];;){var a=Bl(r,i,1e-9)&&r>i+1e-9,u=Bl(r,n*s,1e-9),l=Bl(r,1,1e-9);if(!(a&&u&&l))break;r/=s,s=this.dt[++o%this.dt.length]}if(r<=i+1e-9&&(r=i),r=Math.max(1,r),this.wt.length>0&&Math.abs(r-1)<1e-9)for(o=0,s=this.wt[0];Bl(r,n*s,1e-9)&&r>i+1e-9;)r/=s,s=this.wt[++o%this.wt.length];return r},t}(),Ql=function(){function t(t,e,n,i){this.bt=[],this.B=t,this.vt=e,this.Mt=n,this.pt=i}return t.prototype.setBase=function(t){if(t<0)throw new Error("base < 0");this.vt=t},t.prototype.tickSpan=function(t,e){if(t<e)throw new Error("high < low");var n=this.B.height(),i=(t-e)*this.gt()/n,r=new Yl(this.vt,[2,2.5,2]),o=new Yl(this.vt,[2,2,2.5]),s=new Yl(this.vt,[2.5,2,2]),a=[];return a.push(r.tickSpan(t,e,i)),a.push(o.tickSpan(t,e,i)),a.push(s.tickSpan(t,e,i)),function(t){if(t.length<1)throw Error("array is empty");for(var e=t[0],n=1;n<t.length;++n)t[n]<e&&(e=t[n]);return e}(a)},t.prototype.rebuildTickMarks=function(){var t=this.B,e=t.firstValue();if(null!==e){var n=t.height(),i=this.Mt(n-1,e),r=this.Mt(0,e),o=this.B.options().entireTextOnly?this.yt()/2:0,s=o,a=n-1-o,u=Math.max(i,r),l=Math.min(i,r);if(u!==l){for(var h=this.tickSpan(u,l),c=u%h,d=u>=l?1:-1,f=null,p=0,v=u-(c+=c<0?h:0);v>l;v-=h){var y=this.pt(v,e,!0);null!==f&&Math.abs(y-f)<this.gt()||y<s||y>a||(p<this.bt.length?(this.bt[p].coord=Math.round(y),this.bt[p].label=t.formatLogical(v)):this.bt.push({coord:Math.round(y),label:t.formatLogical(v)}),p++,f=y,t.isLog()&&(h=this.tickSpan(v*d,l)))}this.bt.length=p}else this.bt=[]}else this.bt=[]},t.prototype.marks=function(){return this.bt},t.prototype.yt=function(){return this.B.fontSize()},t.prototype.gt=function(){return Math.ceil(2.5*this.yt())},t}(),Xl=function(){function t(t){this.kt=t}return t.prototype.format=function(t){var e="";return t<0&&(e="-",t=-t),t<995?e+this.Nt(t):t<999995?e+this.Nt(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.Nt(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.Nt(t/1e9)+"B")},t.prototype.Nt=function(t){var e=Math.pow(10,this.kt);return((t=Math.round(t*e)/e)>=1e-15&&t<1?t.toFixed(this.kt).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,e){return e}))},t}();function Gl(t,e,n,i){if(0!==e.length){t.moveTo(e[i.from].x,e[i.from].y);for(var r=i.from+1;r<i.to;++r){var o=e[r];1===n&&t.lineTo(o.x,e[r-1].y),t.lineTo(o.x,o.y)}}}var Jl=function(){function t(){this._data=null}return t.prototype.setData=function(t){this._data=t},t.prototype.draw=function(t){if(null!==this._data&&0!==this._data.items.length&&null!==this._data.visibleRange){t.save(),t.lineCap="square",t.strokeStyle=this._data.lineColor,t.lineWidth=this._data.lineWidth,$u(t,this._data.lineStyle),t.lineWidth=1,t.beginPath(),t.moveTo(this._data.items[this._data.visibleRange.from].x,this._data.bottom),t.lineTo(this._data.items[this._data.visibleRange.from].x,this._data.items[this._data.visibleRange.from].y),Gl(t,this._data.items,this._data.lineType,this._data.visibleRange),t.lineTo(this._data.items[this._data.visibleRange.to-1].x,this._data.bottom),t.lineTo(this._data.items[this._data.visibleRange.from].x,this._data.bottom),t.closePath();var e=t.createLinearGradient(0,0,0,this._data.bottom);e.addColorStop(0,this._data.topColor),e.addColorStop(1,this._data.bottomColor),t.fillStyle=e,t.fill(),t.restore()}},t}(),th=function(){function t(){this._data=null}return t.prototype.setData=function(t){this._data=t},t.prototype.draw=function(t){null!==this._data&&0!==this._data.items.length&&null!==this._data.visibleRange&&(t.lineCap="square",t.lineWidth=this._data.lineWidth,$u(t,this._data.lineStyle),t.strokeStyle=this._data.lineColor,t.lineJoin="miter",t.beginPath(),Gl(t,this._data.items,this._data.lineType,this._data.visibleRange),t.stroke())},t}();function eh(t,e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=t.length);for(var o=r-i;0<o;){var s=o>>1,a=i+s;n(t[a],e)?(i=a+1,o-=s+1):o=s}return i}function nh(t,e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=t.length);for(var o=r-i;0<o;){var s=o>>1,a=i+s;n(e,t[a])?o=s:(i=a+1,o-=s+1)}return i}function ih(t,e){return t.time<e}function rh(t,e){return t<e.time}function oh(t,e,n){var i=e.firstBar(),r=e.lastBar(),o=eh(t,i,ih),s=nh(t,r,rh);if(!n)return{from:o,to:s};var a=o,u=s;return o>0&&o<t.length&&t[o].time>=i&&(a=o-1),s>0&&s<t.length&&t[s-1].time<=r&&(u=s+1),{from:a,to:u}}var sh=function(){function t(t,e,n){this._invalidated=!0,this._dataInvalidated=!0,this._items=[],this._itemsVisibleRange=null,this._series=t,this._model=e,this.St=n}return t.prototype.update=function(t){this._invalidated=!0,"data"===t&&(this._dataInvalidated=!0)},t.prototype._makeValid=function(){this._dataInvalidated&&(this._fillRawPoints(),this._dataInvalidated=!1),this._invalidated&&(this._updatePoints(),this._invalidated=!1)},t.prototype._clearVisibleRange=function(){this._itemsVisibleRange=null},t.prototype._updatePoints=function(){var t=this._series.priceScale(),e=this._model.timeScale();if(this._clearVisibleRange(),!e.isEmpty()&&!t.isEmpty()){var n=e.visibleBars();if(null!==n&&0!==this._series.data().bars().size()){var i=this._series.firstValue();null!==i&&(this._itemsVisibleRange=oh(this._items,n,this.St),this._convertToCoordinates(t,e,i.value))}}},t}(),ah=function(t){function e(e,n){return t.call(this,e,n,!0)||this}return Zu(e,t),e.prototype._convertToCoordinates=function(t,e,n){e.indexesToCoordinates(this._items,sl(this._itemsVisibleRange)),t.pointsArrayToCoordinates(this._items,n,sl(this._itemsVisibleRange))},e.prototype._createRawItemBase=function(t,e){return{time:t,price:e,x:NaN,y:NaN}},e.prototype._fillRawPoints=function(){var t=this,e=this._series.barFunction(),n=[],i=this._series.barColorer();this._series.bars().each((function(r,o){var s=e(o.value),a=t._createRawItem(r,s,i);return n.push(a),!1})),this._items=n},e}(sh),uh=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.g=new cl,i.xt=new Jl,i.Dt=new th,i.g.setRenderers([i.xt,i.Dt]),i}return Zu(e,t),e.prototype.renderer=function(t,e){this._makeValid();var n=this._series.options(),i={lineType:n.lineType,items:this._items,lineColor:n.lineColor,lineStyle:n.lineStyle,lineWidth:n.lineWidth,topColor:n.topColor,bottomColor:n.bottomColor,bottom:t,visibleRange:this._itemsVisibleRange};return this.xt.setData(i),this.Dt.setData(i),this.g},e.prototype._createRawItem=function(t,e){return this._createRawItemBase(t,e)},e}(ah);function lh(t){return.3*t}var hh,ch=function(){function t(){this.M=null,this.Ct=0,this.Et=0}return t.prototype.setData=function(t){this.M=t,this.Ct=lh(t.barSpacing),this.Et=t.thinBars?1:Math.max(1,Math.round(this.Ct))},t.prototype.draw=function(t){if(null!==this.M&&0!==this.M.bars.length&&null!==this.M.visibleRange){t.save(),t.translate(.5,.5);for(var e=this.M.thinBars?1:Math.round(this.Ct),n=this.M.thinBars?1:e/2,i=null,r=this.M.visibleRange.from;r<this.M.visibleRange.to;++r){var o=this.M.bars[r];i!==o.color&&(t.fillStyle=o.color,i=o.color),t.fillRect(Math.round(o.x-this.Et/2),Math.round(o.highY-n),Math.round(this.Et),Math.round(o.lowY-o.highY+e)),this.Et<this.M.barSpacing-1&&(this.M.openVisible&&t.fillRect(Math.round(o.x-1.5*this.Ct),Math.floor(o.openY-n),Math.round(1.5*this.Ct),e),t.fillRect(Math.round(o.x),Math.floor(o.closeY-n),Math.round(1.5*this.Ct),e))}t.restore()}},t}(),dh=function(t){function e(e,n){return t.call(this,e,n,!1)||this}return Zu(e,t),e.prototype._convertToCoordinates=function(t,e,n){e.indexesToCoordinates(this._items,sl(this._itemsVisibleRange)),t.barPricesToCoordinates(this._items,n,sl(this._itemsVisibleRange))},e.prototype._createDefaultItem=function(t,e,n){return{time:t,open:e.value[0],high:e.value[1],low:e.value[2],close:e.value[3],x:NaN,openY:NaN,highY:NaN,lowY:NaN,closeY:NaN}},e.prototype._fillRawPoints=function(){var t=this,e=[],n=this._series.barColorer();this._series.bars().each((function(i,r){var o=t._createRawItem(i,r,n);return e.push(o),!1})),this._items=e},e}(sh),fh=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.g=new ch,i}return Zu(e,t),e.prototype.renderer=function(t,e){this._makeValid();var n=this._series.options(),i={bars:this._items,barSpacing:this._model.timeScale().barSpacing(),openVisible:n.openVisible,thinBars:n.thinBars,visibleRange:this._itemsVisibleRange};return this.g.setData(i),this.g},e.prototype._createRawItem=function(t,e,n){return Ku(Ku({},this._createDefaultItem(t,e,n)),{color:n.barStyle(t).barColor})},e}(dh);!function(t){t[t.BarBorderWidth=1]="BarBorderWidth"}(hh||(hh={}));var ph,vh=function(){function t(){this.M=null,this.Ct=0}return t.prototype.setData=function(t){this.M=t,this.Ct=lh(t.barSpacing)},t.prototype.draw=function(t){if(null!==this.M&&0!==this.M.bars.length&&null!==this.M.visibleRange)if(t.lineCap="square",this.M.barSpacing<1)this.Tt(t);else{var e=this.M.bars;t.translate(-.5,-.5),t.lineWidth=1,this.M.wickVisible&&this.At(t,e,this.M.visibleRange),this.M.borderVisible&&this.Lt(t,e,this.M.visibleRange),this.Bt(t,e,this.M.visibleRange)}},t.prototype.At=function(t,e,n){for(var i="",r=n.from;r<n.to;r++){var o=e[r];o.wickColor!==i&&(t.fillStyle=o.wickColor,i=o.wickColor),t.fillRect(o.x,o.highY,1,o.lowY-o.highY)}},t.prototype.Lt=function(t,e,n){for(var i="",r=n.from;r<n.to;r++){var o=e[r];o.borderColor!==i&&(t.fillStyle=o.borderColor,i=o.borderColor);var s=Math.round(o.x-this.Ct),a=Math.round(o.x+this.Ct),u=Math.min(o.openY,o.closeY),l=Math.max(o.openY,o.closeY);t.fillRect(s,u,a-s+1,l-u+1)}},t.prototype.Bt=function(t,e,n){if(null!==this.M)for(var i="",r=n.from;r<n.to;r++){var o=e[r],s=Math.min(o.openY,o.closeY),a=Math.max(o.openY,o.closeY),u=Math.round(o.x-this.Ct),l=Math.round(o.x+this.Ct);if(this.M.borderVisible&&(u+=1,s+=1,l-=1,a-=1),!(s>a)){if(o.color!==i){var h=o.color;t.fillStyle=h,i=h}t.fillRect(u,s,l-u+1,a-s+1)}}},t.prototype.Tt=function(t){if(null!==this.M&&null!==this.M.visibleRange){if(t.lineWidth=1,this.M.wickVisible){t.strokeStyle=this.M.wickColor,t.beginPath();for(var e=this.M.visibleRange.from;e<this.M.visibleRange.to;e++){var n=this.M.bars[e];t.moveTo(n.x,n.lowY),t.lineTo(n.x,n.highY)}t.stroke()}var i="",r=!1;for(t.beginPath(),e=this.M.visibleRange.from;e<this.M.visibleRange.to;e++)i!==(n=this.M.bars[e]).color&&(r&&(t.stroke(),t.beginPath(),r=!1),t.strokeStyle=n.color,i=n.color),t.moveTo(n.x,n.openY),t.lineTo(n.x,n.closeY),r=!0;r&&t.stroke()}},t}(),yh=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.g=new vh,i}return Zu(e,t),e.prototype.renderer=function(t,e){this._makeValid();var n=this._series.options(),i={bars:this._items,barSpacing:this._model.timeScale().barSpacing(),wickColor:n.wickColor,wickVisible:n.wickVisible,borderVisible:n.borderVisible,visibleRange:this._itemsVisibleRange};return this.g.setData(i),this.g},e.prototype._createRawItem=function(t,e,n){var i=n.barStyle(t);return Ku(Ku({},this._createDefaultItem(t,e,n)),{color:i.barColor,wickColor:i.barWickColor,borderColor:i.barBorderColor})},e}(dh),gh=function(){function t(){this.M=null}return t.prototype.setData=function(t){this.M=t},t.prototype.draw=function(t){if(null!==this.M&&0!==this.M.items.length&&null!==this.M.visibleRange){var e=this.M.histogramBase;t.translate(.5,.5),t.fillStyle=this.M.color,t.lineWidth=1,t.beginPath();for(var n=this.M.visibleRange.from;n<this.M.visibleRange.to;n++){var i=this.M.items[n],r=i.y,o=i.left;t.rect(o,r,i.right-o,e-r)}t.fill()}},t}(),mh=function(t){function e(e,n){var i=t.call(this,e,n,!1)||this;return i.i=new cl,i.zt=[],i.Ft=[],i.Vt=new Int32Array(0),i.It=new Int32Array(0),i}return Zu(e,t),e.prototype.renderer=function(t,e){return this._makeValid(),this.i},e.prototype._fillRawPoints=function(){var t=this,e=this._model.timeScale().barSpacing(),n=this._series.palette();this.Ft.length=n.size(),this.zt.length=n.size();var i=new Int32Array(n.size()+1),r=this._series.options(),o=this._series.barFunction();this.Vt=new Int32Array(this._series.bars().size());var s=0;this._items.length=this._series.bars().size();var a=0,u=this._series.options().color;this._series.bars().each((function(l,h){var c=o(h.value),d=h.value[4],f={time:l,price:c,x:NaN,y:NaN},p=null!=d?n.colorByIndex(d):u,v=null==d?0:d+1,y=t.zt[v]||function(t,e,n){return{items:[],barSpacing:t,lineWidth:e,histogramBase:NaN,color:n,visibleRange:null}}(e,r.lineWidth,p),g=i[v]++;return g<y.items.length?y.items[g]=f:y.items.push(f),t._items[a++]={time:l,x:0},t.zt[v]=y,t.Vt[s++]=v,!1})),this.Ft.length=this.zt.length,this.It.length!==this.zt.length&&(this.It=new Int32Array(this.zt.length)),this.zt.forEach((function(e,n){e.items.length=i[n];var r=t.Ft[n]||new gh;r.setData(e),t.Ft[n]=r})),this.i.setRenderers(this.Ft)},e.prototype._clearVisibleRange=function(){t.prototype._clearVisibleRange.call(this),this.zt.forEach((function(t,e){t.visibleRange=null}))},e.prototype._convertToCoordinates=function(t,e,n){var i=this;if(null!==this._itemsVisibleRange){var r=e.barSpacing(),o=Xu(e.visibleBars()),s=t.priceToCoordinate(this._series.options().base,n);this.zt.forEach((function(r,a){e.indexesToCoordinates(r.items),t.pointsArrayToCoordinates(r.items,n),r.histogramBase=s,r.visibleRange=oh(r.items,o,!1),i.It[a]=r.visibleRange.from}));for(var a=null,u=this._itemsVisibleRange.from;u<this._itemsVisibleRange.to;++u){var l=this.Vt[u],h=this.zt[l],c=this.It[l]++,d=h.items[c];d.left=Math.floor(d.x-.5*r),d.right=Math.ceil(d.left+r),null!==a&&d.time-a.time==1&&(a.right=d.left-(d.right-d.left>5?1:0)),a=d}}},e}(sh),bh=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.Dt=new th,i}return Zu(e,t),e.prototype.renderer=function(t,e){this._makeValid();var n=this._series.options();return this.Dt.setData({items:this._items,lineColor:n.color,lineStyle:n.lineStyle,lineType:n.lineType,lineWidth:n.lineWidth,visibleRange:this._itemsVisibleRange}),this.Dt},e.prototype._createRawItem=function(t,e){return this._createRawItemBase(t,e)},e}(ah),_h=/[2-9]/g,wh=function(){function t(t){void 0===t&&(t=50),this.Pt=0,this.Ot=1,this.Wt=1,this.Rt={},this.qt={},this.Ut=t}return t.prototype.reset=function(){this.Pt=0,this.qt={},this.Ot=1,this.Wt=1,this.Rt={}},t.prototype.measureText=function(t,e,n){var i=n||_h,r=String(e).replace(i,"0");if(this.qt[r])return this.qt[r].width;if(this.Pt===this.Ut){var o=this.Rt[this.Wt];delete this.Rt[this.Wt],delete this.qt[o],this.Wt++,this.Pt--}var s=t.measureText(r).width;return 0===s&&e.length?0:(this.qt[r]={width:s,tick:this.Ot},this.Rt[this.Ot]=r,this.Pt++,this.Ot++,s)},t}(),kh=function(){function t(t){this.jt=null,this.Ht=null,this.Yt="right",this.Kt=0,this.$t=t}return t.prototype.setParams=function(t,e,n,i){this.jt=t,this.Ht=e,this.Kt=n,this.Yt=i},t.prototype.draw=function(t){null!==this.Ht&&null!==this.jt&&this.jt.draw(t,this.Ht,this.$t,this.Kt,this.Yt)},t}(),Ch=function(){function t(t,e,n){this._t=t,this.$t=new wh(50),this.Xt=e,this.l=n,this.Zt=-1,this.g=new kh(this.$t)}return t.prototype.update=function(){this._t.update()},t.prototype.renderer=function(t,e){var n=this.l.paneForSource(this.Xt);if(null===n)return null;if(null===this.Xt.priceScale())return null;var i=n.priceScalePosition();if("overlay"===i)return null;var r=this.l.priceAxisRendererOptions();return r.fontSize!==this.Zt&&(this.Zt=r.fontSize,this.$t.reset()),this.g.setParams(this._t.paneRenderer(),r,e,i),this.g},t}(),Sh=function(){function t(){this.M=null}return t.prototype.setData=function(t){this.M=t},t.prototype.draw=function(t){if(null!==this.M&&!1!==this.M.visible){var e=this.M.y;if(!(e<0||e>this.M.height)){var n=this.M.width;t.lineCap="square",t.strokeStyle=this.M.color,t.lineWidth=this.M.lineWidth,Wu(t,0,e,n,e,this.M.lineStyle)}}},t}(),xh=function(){function t(t){this._lineRendererData={width:0,height:0,y:0,color:"rgba(0, 0, 0, 0)",lineWidth:1,lineStyle:0,visible:!1},this._lineRenderer=new Sh,this.o=!0,this._series=t,this._model=t.model(),this._lineRenderer.setData(this._lineRendererData)}return t.prototype.update=function(){this.o=!0},t.prototype.renderer=function(){return this.o&&(this._updateImpl(),this.o=!1),this._lineRenderer},t}(),Eh=function(t){function e(e){return t.call(this,e)||this}return Zu(e,t),e.prototype._updateImpl=function(){this._lineRendererData.visible=!1;var t=this._series.priceScale(),e=t.mode().mode;if(2===e||3===e){var n=this._series.options();if(n.baseLineVisible){var i=this._series.firstValue();null!==i&&(this._lineRendererData.visible=!0,this._lineRendererData.y=t.priceToCoordinate(i.value,i.value),this._lineRendererData.width=this._model.timeScale().width(),this._lineRendererData.height=t.height(),this._lineRendererData.color=n.baseLineColor,this._lineRendererData.lineWidth=n.baseLineWidth,this._lineRendererData.lineStyle=n.baseLineStyle)}}},e}(xh);function Th(t,e){return Ah(Math.min(Math.max(t,12),30)*e)}function Mh(t,e){switch(t){case"arrowDown":case"arrowUp":return Th(e,1);case"circle":return Th(e,.8);case"square":return Th(e,.7)}}function Ah(t){var e=Math.ceil(t);return e%2==0?e-1:e}function Ph(t){return e=Th(t,1),(n=Math.ceil(e))%2!=0?n-1:n;var e,n}function Vh(t){return Math.max(Th(t,.1),3)}function Ih(t,e,n,i,r){var o=Mh("square",n),s=(o-1)/2,a=t-s,u=e-s;return i>=a&&i<=a+o&&r>=u&&r<=u+o}function Dh(t,e,n,i,r,o){var s=(Mh("arrowUp",o)-1)/2,a=(Ah(o/2)-1)/2;e.fillStyle=r,e.beginPath(),t?(e.moveTo(n-s,i),e.lineTo(n,i-s),e.lineTo(n+s,i),e.lineTo(n+a,i),e.lineTo(n+a,i+s),e.lineTo(n-a,i+s),e.lineTo(n-a,i)):(e.moveTo(n-s,i),e.lineTo(n,i+s),e.lineTo(n+s,i),e.lineTo(n+a,i),e.lineTo(n+a,i-s),e.lineTo(n-a,i-s),e.lineTo(n-a,i)),e.fill()}!function(t){t[t.MinShapeSize=12]="MinShapeSize",t[t.MaxShapeSize=30]="MaxShapeSize",t[t.MinShapeMargin=3]="MinShapeMargin"}(ph||(ph={}));var Rh=function(){function t(){this.M=null}return t.prototype.setData=function(t){this.M=t},t.prototype.draw=function(t,e,n){if(null!==this.M&&null!==this.M.visibleRange){t.save(),t.translate(.5,.5);for(var i=this.M.visibleRange.from;i<this.M.visibleRange.to;i++)Oh(this.M.items[i],t);t.restore()}},t.prototype.hitTest=function(t,e){if(null===this.M||null===this.M.visibleRange)return null;for(var n=this.M.visibleRange.from;n<this.M.visibleRange.to;n++){var i=this.M.items[n];if(Nh(i,t,e))return{hitTestData:i.internalId,externalId:i.externalId}}return null},t}();function Oh(t,e){switch(t.shape){case"arrowDown":return void Dh(!1,e,t.x,t.y,t.color,t.size);case"arrowUp":return void Dh(!0,e,t.x,t.y,t.color,t.size);case"circle":return void function(t,e,n,i,r){var o=(Mh("circle",r)-1)/2;t.fillStyle=i,t.beginPath(),t.arc(e,n,o,0,2*Math.PI,!1),t.fill()}(e,t.x,t.y,t.color,t.size);case"square":return void function(t,e,n,i,r){var o=Mh("square",r),s=(o-1)/2,a=e-s,u=n-s;t.fillStyle=i,t.fillRect(a,u,o,o)}(e,t.x,t.y,t.color,t.size)}}function Nh(t,e,n){switch(t.shape){case"arrowDown":case"arrowUp":return function(t,e,n,i,r,o){return Ih(e,n,i,r,o)}(0,t.x,t.y,t.size,e,n);case"circle":return function(t,e,n,i,r){var o=2+Mh("circle",n)/2,s=t-i,a=e-r;return Math.sqrt(s*s+a*a)<=o}(t.x,t.y,t.size,e,n);case"square":return Ih(t.x,t.y,t.size,e,n)}}function Lh(t,e,n,i,r,o,s,a){var u=tl(n)?n:n.close,l=tl(n)?n:n.high,h=tl(n)?n:n.low,c=Ph(s.barSpacing());switch(t.size=c,e.position){case"inBar":return void(t.y=o.priceToCoordinate(u,a));case"aboveBar":return t.y=o.priceToCoordinate(l,a)-c/2-i.aboveBar,void(i.aboveBar+=c+r);case"belowBar":return t.y=o.priceToCoordinate(h,a)+c/2+i.belowBar,void(i.belowBar+=c+r)}}var zh,Fh=function(){function t(t,e){this.o=!0,this.Jt=!0,this.Gt=!0,this.Qt=null,this.g=new Rh,this.ti=t,this.V=e,this.M={items:[],visibleRange:null}}return t.prototype.update=function(t){this.o=!0,this.Gt=!0,"data"===t&&(this.Jt=!0)},t.prototype.renderer=function(t,e,n){return this.o&&this._makeValid(),this.g.setData(this.M),this.g},t.prototype.autoScaleMargins=function(){if(this.Gt){if(this.ti.indexedMarkers().length>0){var t=this.V.timeScale().barSpacing(),e=Vh(t),n=1.5*Ph(t)+2*e;this.Qt={above:n,below:n}}else this.Qt=null;this.Gt=!1}return this.Qt},t.prototype._makeValid=function(){var t=this.ti.priceScale(),e=this.V.timeScale(),n=this.ti.indexedMarkers();this.Jt&&(this.M.items=n.map((function(t){return{time:t.time,x:0,y:0,size:0,shape:t.shape,color:t.color,internalId:t.internalId,externalId:t.id}})),this.Jt=!1),this.M.visibleRange=null;var i=e.visibleBars();if(null!==i){var r=this.ti.firstValue();if(null!==r){var o=NaN,s=Vh(e.barSpacing()),a={aboveBar:s,belowBar:s};this.M.visibleRange=oh(this.M.items,i,!0);for(var u=this.M.visibleRange.from;u<this.M.visibleRange.to;u++){var l=n[u];l.time!==o&&(a.aboveBar=s,a.belowBar=s,o=l.time);var h=this.M.items[u];h.x=e.indexToCoordinate(l.time);var c=this.ti.dataAt(l.time);null!==c&&Lh(h,l,c,a,s,t,e,r.value)}this.o=!1}}},t}(),Bh=function(t){function e(e){return t.call(this,e)||this}return Zu(e,t),e.prototype._updateImpl=function(){this._lineRendererData.visible=!1;var t=this._series.options();if(t.priceLineVisible){var e=this._series.lastValueData(void 0,!0);e.noData||(this._lineRendererData.visible=!0,this._lineRendererData.y=e.coordinate,this._lineRendererData.color=this._series.priceLineColor(e.color),this._lineRendererData.width=this._model.timeScale().width(),this._lineRendererData.height=this._series.priceScale().height(),this._lineRendererData.lineWidth=t.priceLineWidth,this._lineRendererData.lineStyle=t.priceLineStyle)}},e}(xh),Hh=function(t){function e(e,n){var i=t.call(this)||this;return i.k=e,i.M=n,i}return Zu(e,t),e.prototype._getSource=function(){return this.k},e.prototype._getData=function(){return this.M},e.prototype._updateRendererData=function(t,e,n){t.visible=!1,e.visible=!1;var i=this.k.options(),r=i.lastValueVisible,o=""!==this.k.title(),s=0===i.seriesLastValueMode,a=this.k.lastValueData(void 0,!1);a.noData||(r&&(t.text=this._axisText(a,r,s),t.visible=0!==t.text.length),(o||s)&&(e.text=this._paneText(a,r,o,s),e.visible=e.text.length>0),n.background=this.k.priceLineColor(a.color),n.color=kl(n.background),n.coordinate=a.coordinate,n.floatCoordinate=a.floatCoordinate)},e.prototype._paneText=function(t,e,n,i){var r="",o=this.k.title();return n&&0!==o.length&&(r+=o+" "),e&&i&&(r+=this.k.priceScale().isPercentage()?t.formattedPriceAbsolute:t.formattedPricePercentage),r.trim()},e.prototype._axisText=function(t,e,n){return e?n?this.k.priceScale().isPercentage()?t.formattedPricePercentage:t.formattedPriceAbsolute:t.text:""},e}(xl),jh=function(t){function e(e,n){var i=t.call(this,e)||this;return i.ii=n,i}return Zu(e,t),e.prototype._updateImpl=function(){var t=this._lineRendererData;t.visible=!1;var e=this._series.priceScale(),n=this._model.timeScale();if(!n.isEmpty()&&!e.isEmpty()){var i=this._series.firstValue();if(null!==i){var r=this.ii.options();t.visible=!0,t.y=e.priceToCoordinate(r.price,i.value),t.color=r.color,t.width=n.width(),t.height=e.height(),t.lineWidth=r.lineWidth,t.lineStyle=r.lineStyle}}},e}(xh),Uh=function(){function t(t,e){this.ti=t,this.$=e,this.ni=new jh(t,this)}return t.prototype.applyOptions=function(t){Ju(this.$,t),this.update(),this.ti.model().lightUpdate()},t.prototype.options=function(){return this.$},t.prototype.paneView=function(){return this.ni},t.prototype.update=function(){this.ni.update()},t}(),Wh=function(){function t(){this.si=0,this.hi=new Map,this.ri=new Map}return t.prototype.colorByIndex=function(t){return Qu(this.ri.get(t))},t.prototype.addColor=function(t){var e=this.hi.get(t);return void 0===e&&(e=this.si++,this.hi.set(t,e),this.ri.set(e,t)),e},t.prototype.clear=function(){this.si=0,this.hi.clear(),this.ri.clear()},t.prototype.size=function(){return this.ri.size},t}(),$h={barColor:"",barBorderColor:"",barWickColor:""},qh=function(){function t(t){this.ti=t}return t.prototype.barStyle=function(t,e){var n=this.ti.seriesType(),i=this.ti.options();switch(n){case"Line":return this.ui(i);case"Area":return this.ei(i);case"Bar":return this.oi(i,t,e);case"Candlestick":return this.fi(i,t,e);case"Histogram":return this.ai(i,t,e)}throw new Error("Unknown chart style")},t.prototype.oi=function(t,e,n){var i=Ku({},$h),r=t.upColor,o=t.downColor,s=r,a=o,u=Xu(this.ci(e,n)),l=Gu(u.value[0])<=Gu(u.value[3]);return i.barColor=l?r:o,i.barBorderColor=l?s:a,i},t.prototype.fi=function(t,e,n){var i=Ku({},$h),r=t.upColor,o=t.downColor,s=t.borderUpColor,a=t.borderDownColor,u=t.wickUpColor,l=t.wickDownColor,h=Xu(this.ci(e,n)),c=Gu(h.value[0])<=Gu(h.value[3]);return i.barColor=c?r:o,i.barBorderColor=c?s:a,i.barWickColor=c?u:l,i},t.prototype.ei=function(t){return Ku(Ku({},$h),{barColor:t.lineColor})},t.prototype.ui=function(t){return Ku(Ku({},$h),{barColor:t.color})},t.prototype.ai=function(t,e,n){var i=Ku({},$h),r=Xu(this.ci(e,n)).value[4];if(null!=r){var o=Xu(this.ti.palette());i.barColor=o.colorByIndex(r)}else i.barColor=t.color;return i},t.prototype.li=function(){return this.ti.bars()},t.prototype.ci=function(t,e){return void 0!==e?e.value:this.li().valueAt(t)},t}();!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.Exact=0]="Exact",t[t.NearestRight=1]="NearestRight"}(zh||(zh={}));var Zh,Kh=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.vi=[],this.di=0,this.wi=0,this.bi=!1,this.mi=new Map,this.Mi=new Map,this.pi=new Map,this.gi=t||new Map,this.yi=e}return t.prototype.clear=function(){this.vi=[],this.di=0,this.wi=0,this.bi=!1,this.mi.clear(),this.Mi.clear(),this.pi.clear()},t.prototype.first=function(){return this.size()>0?this.vi[this.di]:null},t.prototype.last=function(){return this.size()>0?this.vi[this.wi-1]:null},t.prototype.firstIndex=function(){return this.size()>0?this.ki(this.di):null},t.prototype.lastIndex=function(){return this.size()>0?this.ki(this.wi-1):null},t.prototype.size=function(){return this.wi-this.di},t.prototype.isEmpty=function(){return 0===this.size()},t.prototype.contains=function(t){return null!==this.Ni(t,0)},t.prototype.valueAt=function(t){return this.search(t)},t.prototype.add=function(t,e,n){if(this.bi)return!1;var i={index:t,value:n,time:e},r=this.Ni(t,0);return this.Mi.clear(),this.pi.clear(),null===r?(this.vi.splice(this.Si(t),0,i),this.di=0,this.wi=this.vi.length,!0):(this.vi[r]=i,!1)},t.prototype.search=function(t,e,n){void 0===e&&(e=0);var i=this.Ni(t,e,n);if(null===i)return null;var r=this.xi(i);return{index:this.ki(i),time:r.time,value:r.value}},t.prototype.each=function(t){for(var e=this.di;e<this.wi&&!t(this.ki(e),this.xi(e));++e);},t.prototype.range=function(e,n){var i=new t(this.gi,this.yi);return i.vi=this.vi,i.di=this.Si(e),i.wi=this.Di(n),i.bi=!0,i},t.prototype.minMaxOnRangeCached=function(t,e,n){if(this.isEmpty())return null;for(var i=null,r=0,o=n;r<o.length;r++)i=Yh(i,this.Ci(t,e,o[r]));return i},t.prototype.merge=function(t){return this.bi?null:0===t.length?null:this.isEmpty()||t[t.length-1].index<this.vi[0].index?this.Ei(t):t[0].index>this.vi[this.vi.length-1].index?this.Ti(t):1===t.length&&t[0].index===this.vi[this.vi.length-1].index?(this.Ai(t[0]),t[0]):this.Li(t)},t.prototype.remove=function(t){if(this.bi)return null;var e=this.Ni(t,1);if(null===e)return null;var n=this.vi.splice(e);return this.wi=this.vi.length,this.mi.clear(),this.Mi.clear(),this.pi.clear(),n.length>0?n[0]:null},t.prototype.ki=function(t){return this.vi[t].index},t.prototype.xi=function(t){return this.vi[t]},t.prototype.Ni=function(t,e,n){var i=this.Bi(t);if(null===i&&0!==e)switch(e){case-1:return this.zi(t,n);case 1:return this.Fi(t,n);default:throw new TypeError("Unknown search mode")}if(!n||null===i||0===e)return i;switch(e){case-1:return this.Vi(i);case 1:return this.Ii(i);default:throw new TypeError("Unknown search mode")}},t.prototype.Ii=function(t){for(var e=Xu(this.yi);t<this.wi&&e(this.xi(t).value);)t+=1;return t===this.wi?null:t},t.prototype.Vi=function(t){for(var e=Xu(this.yi);t>=this.di&&e(this.xi(t).value);)t-=1;return t<this.di?null:t},t.prototype.zi=function(t,e){var n=this.Si(t);n>this.di&&(n-=1);var i=n!==this.wi&&this.ki(n)<t?n:null;return e&&null!==i?this.Vi(i):i},t.prototype.Fi=function(t,e){var n=this.Di(t),i=n!==this.wi&&t<this.ki(n)?n:null;return e&&null!==i?this.Ii(i):i},t.prototype.Bi=function(t){var e=this.Si(t);return e===this.wi||t<this.vi[e].index?null:e},t.prototype.Si=function(t){return eh(this.vi,t,(function(t,e){return t.index<e}),this.di,this.wi)},t.prototype.Di=function(t){return nh(this.vi,t,(function(t,e){return e.index>t}),this.di,this.wi)},t.prototype.Pi=function(t,e,n){var i=null,r=this.gi.get(n.name);if(void 0===r)throw new Error('Plot "'+n.name+'" is not registered');for(var o=t;o<e;o++){var s=r(this.vi[o].value);null==s||Number.isNaN(s)||(null===i?i={min:s,max:s}:(s<i.min&&(i.min=s),s>i.max&&(i.max=s)))}return i},t.prototype.Oi=function(t){var e=Math.floor(t.index/30);this.mi.forEach((function(t){return t.delete(e)}))},t.prototype.Ei=function(t){return Yu(!this.bi,"collection should not be readonly"),Yu(0!==t.length,"plotRows should not be empty"),this.Mi.clear(),this.pi.clear(),this.mi.clear(),this.vi=t.concat(this.vi),this.di=0,this.wi=this.vi.length,t[0]},t.prototype.Ti=function(t){return Yu(!this.bi,"collection should not be readonly"),Yu(0!==t.length,"plotRows should not be empty"),this.Mi.clear(),this.pi.clear(),this.mi.clear(),this.vi=this.vi.concat(t),this.di=0,this.wi=this.vi.length,t[0]},t.prototype.Ai=function(t){Yu(!this.isEmpty(),"plot list should not be empty"),Yu(this.vi[this.wi-1].index===t.index,"last row index should match new row index"),this.Oi(t),this.Mi.delete(t.index),this.pi.delete(t.index),this.vi[this.wi-1]=t},t.prototype.Li=function(t){return Yu(0!==t.length,"plot rows should not be empty"),this.Mi.clear(),this.pi.clear(),this.mi.clear(),this.vi=function(t,e){for(var n=function(t,e){for(var n=t.length,i=e.length,r=n+i,o=0,s=0;o<n&&s<i;)t[o].index<e[s].index?o++:t[o].index>e[s].index?s++:(o++,s++,r--);return r}(t,e),i=new Array(n),r=0,o=0,s=t.length,a=e.length,u=0;r<s&&o<a;)t[r].index<e[o].index?(i[u]=t[r],r++):t[r].index>e[o].index?(i[u]=e[o],o++):(i[u]=e[o],r++,o++),u++;for(;r<s;)i[u]=t[r],r++,u++;for(;o<a;)i[u]=e[o],o++,u++;return i}(this.vi,t),this.di=0,this.wi=this.vi.length,t[0]},t.prototype.Ci=function(t,e,n){if(this.isEmpty())return null;var i=null,r=Xu(this.firstIndex()),o=Xu(this.lastIndex()),s=t-n.offset,a=e-n.offset;s=Math.max(s,r),a=Math.min(a,o);var u=30*Math.ceil(s/30),l=Math.max(u,30*Math.floor(a/30)),h=this.Si(s),c=this.Di(Math.min(a,u,e));i=Yh(i,this.Pi(h,c,n));var d=this.mi.get(n.name);void 0===d&&(d=new Map,this.mi.set(n.name,d));for(var f=Math.max(u+1,s);f<l;f+=30){var p=Math.floor(f/30),v=d.get(p);if(void 0===v){var y=this.Si(30*p),g=this.Di(30*(p+1)-1);v=this.Pi(y,g,n),d.set(p,v)}i=Yh(i,v)}return h=this.Si(l),c=this.Di(a),Yh(i,this.Pi(h,c,n))},t}();function Yh(t,e){return null===t?e:null===e?t:{min:Math.min(t.min,e.min),max:Math.max(t.max,e.max)}}!function(t){t[t.Open=0]="Open",t[t.High=1]="High",t[t.Low=2]="Low",t[t.Close=3]="Close",t[t.Color=4]="Color"}(Zh||(Zh={}));var Qh={open:function(t){return t[0]},high:function(t){return t[1]},low:function(t){return t[2]},close:function(t){return t[3]},hl2:function(t){return(t[1]+t[2])/2},hlc3:function(t){return(t[1]+t[2]+t[3])/3},ohlc4:function(t){return(t[0]+t[1]+t[2]+t[3])/4}},Xh=["open","high","low","close","hl2","hlc3","ohlc4"];function Gh(t){return Qh[t]}var Jh,tc=function(){function t(){var t;this.Wi=new Kh((t=new Map,Xh.forEach((function(e,n){t.set(e,Gh(e))})),t))}return t.prototype.bars=function(){return this.Wi},t.prototype.size=function(){return this.Wi.size()},t.prototype.each=function(t){this.Wi.each(t)},t.prototype.clear=function(){this.Wi.clear()},t.prototype.isEmpty=function(){return this.Wi.isEmpty()},t.prototype.first=function(){return this.Wi.first()},t.prototype.last=function(){return this.Wi.last()},t.prototype.search=function(t,e){return this.bars().search(t,e)},t.prototype.valueAt=function(t){return this.search(t)},t}(),ec=function(t){function e(e,n,i){var r=t.call(this,e)||this;r.M=new tc,r.ni=new Bh(r),r.Ri=[],r.qi=new Eh(r),r.Ui=!1,r.ji=null,r.Hi=new Wh,r.Yi=[],r.Ki=[],r.$=n,r.$i=i;var o=new Hh(r,{model:e});return r.q=[o],r._i=new Ch(o,r,e),r.Xi(),r.Zi(),r.Ji=r.barFunction(),r.Gi(),r}return Zu(e,t),e.prototype.destroy=function(){},e.prototype.endOfData=function(){return this.Ui},e.prototype.priceLineColor=function(t){return this.$.priceLineColor||t},e.prototype.lastValueData=function(t,e,n){var i={noData:!0},r=this.priceScale();if(this.model().timeScale().isEmpty()||r.isEmpty()||this.data().isEmpty())return i;var o,s,a=this.model().timeScale().visibleBars(),u=this.firstValue();if(null===a||null===u)return i;if(e){var l=this.data().bars().last();if(null===l)return i;o=l,s=l.index}else{var h=this.data().bars().search(a.lastBar(),-1);if(null===h)return i;if(null===(o=this.data().bars().valueAt(h.index)))return i;s=h.index}var c=void 0!==t?o.value[t]:this.Ji(o.value),d=this.barColorer().barStyle(s,{value:o}),f=r.priceToCoordinate(c,u.value,!0);return{noData:!1,price:n?c:void 0,text:r.formatPrice(c,u.value),formattedPriceAbsolute:r.formatPriceAbsolute(c),formattedPricePercentage:r.formatPricePercentage(c,u.value),color:d.barColor,floatCoordinate:f,coordinate:Math.round(f),index:s}},e.prototype.data=function(){return this.M},e.prototype.barColorer=function(){return null!==this.ji?this.ji:(this.ji=new qh(this),this.ji)},e.prototype.options=function(){return this.$},e.prototype.applyOptions=function(t){var e=this.$.overlay;Ju(this.$,t),this.$.overlay=e,e&&null!==this._priceScale&&void 0!==t.scaleMargins&&this._priceScale.applyOptions({scaleMargins:this.$.scaleMargins}),void 0!==t.priceFormat&&this.Xi(),this.model().updateSource(this)},e.prototype.clearData=function(){this.M.clear(),this.Hi.clear(),this.Gi()},e.prototype.updateData=function(t){this.M.bars().merge(t),this.Qi(),this.J.update("data"),this._.update("data");var e=this.model().paneForSource(this);this.model().recalculatePane(e),this.model().updateSource(this),this.model().updateCrosshair(),this.model().lightUpdate()},e.prototype.setMarkers=function(t){this.Yi=t.map((function(t){return Ku({},t)})),this.Qi();var e=this.model().paneForSource(this);this._.update("data"),this.model().recalculatePane(e),this.model().updateSource(this),this.model().updateCrosshair(),this.model().lightUpdate()},e.prototype.markers=function(){return this.Yi},e.prototype.indexedMarkers=function(){return this.Ki},e.prototype.createPriceLine=function(t){var e=new Uh(this,t);return this.Ri.push(e),this.model().updateSource(this),e},e.prototype.removePriceLine=function(t){var e=this.Ri.indexOf(t);-1!==e&&this.Ri.splice(e,1)},e.prototype.palette=function(){return this.Hi},e.prototype.seriesType=function(){return this.$i},e.prototype.firstValue=function(){var t=this.firstBar();return null===t?null:{value:this.Ji(t.value),timePoint:t.time}},e.prototype.firstBar=function(){var t=this.model().timeScale().visibleBars();if(null===t)return null;var e=t.firstBar();return this.data().search(e,1)},e.prototype.bars=function(){return this.M.bars()},e.prototype.nearestIndex=function(t,e){var n=this.nearestData(t,e);return n?n.index:null},e.prototype.nearestData=function(t,e){return el(t)?this.data().search(t,e):null},e.prototype.dataAt=function(t){var e=this.data().valueAt(t);return null===e?null:"Bar"===this.$i||"Candlestick"===this.$i?{open:e.value[0],high:e.value[1],low:e.value[2],close:e.value[3]}:this.barFunction()(e.value)},e.prototype.paneViews=function(){var t=[];this.priceScale()===this.model().mainPriceScale()&&t.push(this.qi);for(var e=0,n=this.Ri;e<n.length;e++)t.push(n[e].paneView());return t.push(this.J),t.push(this.ni),t.push(this._i),t.push(this._),t},e.prototype.priceAxisViews=function(t,e){return this.q},e.prototype.autoscaleInfo=function(t,e){if(!el(t)||!el(e)||this.data().isEmpty())return null;var n,i="Line"===this.$i||"Area"===this.$i||"Histogram"===this.$i?"close":null,r=null!==(n=null!==i?this.data().bars().minMaxOnRangeCached(t,e,[{name:i,offset:0}]):this.data().bars().minMaxOnRangeCached(t,e,[{name:"low",offset:0},{name:"high",offset:0}]))?new zl(n.min,n.max):null;if("Histogram"===this.seriesType()){var o=this.$.base,s=new zl(o,o);r=null!==r?r.merge(s):s}return{priceRange:r,margins:this._.autoScaleMargins()}},e.prototype.minMove=function(){return this.$.priceFormat.minMove},e.prototype.formatter=function(){return this.tn},e.prototype.barFunction=function(){return this.Ji},e.prototype.updateAllViews=function(){this.J.update(),this._.update();for(var t=0,e=this.q;t<e.length;t++)e[t].update();for(var n=0,i=this.Ri;n<i.length;n++)i[n].update();this.ni.update(),this.qi.update()},e.prototype.setPriceScale=function(t){this._priceScale!==t&&(this._priceScale=t)},e.prototype.priceScale=function(){return Xu(this._priceScale)},e.prototype.markerDataAtIndex=function(t){if("Line"!==this.$i&&"Area"!==this.$i||!this.$.crosshairMarkerVisible)return null;var e=this.M.valueAt(t);return null===e?null:{price:this.Ji(e.value),radius:this.in()}},e.prototype.title=function(){return this.$.title},e.prototype.in=function(){switch(this.$i){case"Line":case"Area":return this.$.crosshairMarkerRadius}return 0},e.prototype.Xi=function(){switch(this.$.priceFormat.type){case"custom":this.tn={format:this.$.priceFormat.formatter};break;case"volume":this.tn=new Xl(this.$.priceFormat.precision);break;case"percent":this.tn=new Ol(this.$.priceFormat.precision);break;default:var t=Math.pow(10,this.$.priceFormat.precision);this.tn=new Rl(t,this.$.priceFormat.minMove*t,!1,void 0)}null!==this._priceScale&&this._priceScale.updateFormatter()},e.prototype.Zi=function(){this.Ji=Gh("close")},e.prototype.Qi=function(){var t=this.model().timeScale().points();this.Ki=this.Yi.map((function(e,n){return{time:Xu(t.indexOf(e.time.timestamp,!0)),position:e.position,shape:e.shape,color:e.color,id:e.id,internalId:n}}))},e.prototype.Gi=function(){switch(this._=new Fh(this,this.model()),this.$i){case"Bar":this.J=new fh(this,this.model());break;case"Candlestick":this.J=new yh(this,this.model());break;case"Line":this.J=new bh(this,this.model());break;case"Area":this.J=new uh(this,this.model());break;case"Histogram":this.J=new mh(this,this.model());break;default:throw Error("Unknown chart style assigned: "+this.$i)}},e}(Ll);function nc(t){return t.slice().sort((function(t,e){return Xu(t.zorder())-Xu(e.zorder())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(Jh||(Jh={}));var ic=new Ol,rc=new Rl(100,1),oc=function(){function t(t,e,n){this.nn=0,this.sn=null,this.hn=new Nl,this.rn=null,this.un=null,this.en=new Nl,this.on={isValid:!1,visibleBars:null},this.fn=0,this.an=0,this.cn=new Nl,this.ln=new Nl,this.vn=[],this.dn=null,this.wn=!1,this.bn=null,this.mn=null,this.Mn=null,this.pn=null,this.tn=rc,this.gn=new Nl,this.$=t,this.yn=e,this.kn=n,this.Nn=new Ql(this,100,this.Sn.bind(this),this.xn.bind(this))}return t.prototype.options=function(){return this.$},t.prototype.applyOptions=function(t){if(Ju(this.$,t),this.updateFormatter(),void 0!==t.mode&&this.setMode({mode:t.mode}),this.gn.fire(),void 0!==t.scaleMargins){var e=Qu(t.scaleMargins.top),n=Qu(t.scaleMargins.bottom);if(e<0||e>1)throw new Error("Invalid top margin - expect value between 0 and 1, given="+e);if(n<0||n>1||e+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given="+n);if(e+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given="+(e+n));this.Dn(),this.mn=null}},t.prototype.optionsChanged=function(){return this.gn},t.prototype.isAutoScale=function(){return this.$.autoScale},t.prototype.isLog=function(){return 1===this.$.mode},t.prototype.isPercentage=function(){return 2===this.$.mode},t.prototype.isIndexedTo100=function(){return 3===this.$.mode},t.prototype.mode=function(){return{autoScale:this.$.autoScale,isInverted:this.$.invertScale,mode:this.$.mode}},t.prototype.setMode=function(t){var e=this.mode(),n=null;void 0!==t.autoScale&&(this.$.autoScale=t.autoScale),void 0!==t.mode&&(this.$.mode=t.mode,2!==t.mode&&3!==t.mode||(this.$.autoScale=!0),this.on.isValid=!1),1===e.mode&&t.mode!==e.mode&&(function(t){if(null===t)return!1;var e=Zl(t.minValue()),n=Zl(t.maxValue());return isFinite(e)&&isFinite(n)}(this.rn)?null!==(n=function(t){if(null===t)return null;var e=Zl(t.minValue()),n=Zl(t.maxValue());return new zl(e,n)}(this.rn))&&this.setPriceRange(n):this.$.autoScale=!0),1===t.mode&&t.mode!==e.mode&&null!==(n=Kl(this.rn))&&this.setPriceRange(n);var i=e.mode!==this.$.mode;i&&(2===e.mode||this.isPercentage())&&this.updateFormatter(),i&&(3===e.mode||this.isIndexedTo100())&&this.updateFormatter(),void 0!==t.isInverted&&e.isInverted!==t.isInverted&&(this.$.invertScale=t.isInverted,this.Cn()),this.ln.fire(e,this.mode())},t.prototype.modeChanged=function(){return this.ln},t.prototype.fontSize=function(){return this.yn.fontSize},t.prototype.height=function(){return this.nn},t.prototype.setHeight=function(t){this.nn!==t&&(this.nn=t,this.Dn(),this.mn=null)},t.prototype.internalHeight=function(){if(this.sn)return this.sn;var t=this.height()-this.En()-this.Tn();return this.sn=t,t},t.prototype.internalHeightChanged=function(){return this.hn},t.prototype.priceRange=function(){return this.An(),this.rn},t.prototype.priceRangeChanged=function(){return this.en},t.prototype.setPriceRange=function(t,e,n){var i=this.rn;(e||null===i&&null!==t||null!==i&&!i.equals(t))&&(this.mn=null,this.rn=t,n||this.en.fire(i,t))},t.prototype.isEmpty=function(){return this.An(),0===this.nn||!this.rn||this.rn.isEmpty()},t.prototype.invertedCoordinate=function(t){return this.isInverted()?t:this.height()-1-t},t.prototype.priceToCoordinate=function(t,e,n){return this.isPercentage()?t=jl(t,e):this.isIndexedTo100()&&(t=Wl(t,e)),this.xn(t,e,n)},t.prototype.pointsArrayToCoordinates=function(t,e,n){this.An();for(var i=this.Tn(),r=Xu(this.priceRange()),o=r.minValue(),s=r.maxValue(),a=this.internalHeight()-1,u=this.isInverted(),l=a/(s-o),h=void 0===n?0:n.from,c=void 0===n?t.length:n.to,d=this.Ln(),f=h;f<c;f++){var p=t[f],v=p.price;if(!isNaN(v)){var y=v;null!==d&&(y=d(p.price,e));var g=i+l*(y-o);p.y=Math.round(u?g:this.nn-1-g)}}},t.prototype.barPricesToCoordinates=function(t,e,n){this.An();for(var i=this.Tn(),r=Xu(this.priceRange()),o=r.minValue(),s=r.maxValue(),a=this.internalHeight()-1,u=this.isInverted(),l=a/(s-o),h=void 0===n?0:n.from,c=void 0===n?t.length:n.to,d=this.Ln(),f=h;f<c;f++){var p=t[f],v=p.open,y=p.high,g=p.low,m=p.close;null!==d&&(v=d(p.open,e),y=d(p.high,e),g=d(p.low,e),m=d(p.close,e));var b=i+l*(v-o),_=u?b:this.nn-1-b;p.openY=Math.round(_),b=i+l*(y-o),_=u?b:this.nn-1-b,p.highY=Math.round(_),b=i+l*(g-o),_=u?b:this.nn-1-b,p.lowY=Math.round(_),b=i+l*(m-o),_=u?b:this.nn-1-b,p.closeY=Math.round(_)}},t.prototype.coordinateToPrice=function(t,e){var n=this.Sn(t,e);return this.logicalToPrice(n,e)},t.prototype.logicalToPrice=function(t,e){var n=t;return this.isPercentage()?n=function(t,e){return e<0&&(t=-t),t/100*e+e}(n,e):this.isIndexedTo100()&&(n=function(t,e){return t-=100,e<0&&(t=-t),t/100*e+e}(n,e)),n},t.prototype.dataSources=function(){return this.vn},t.prototype.orderedSources=function(){if(this.dn)return this.dn;for(var t=[],e=0;e<this.vn.length;e++){var n=this.vn[e];null===n.zorder()&&n.setZorder(e+1),t.push(n)}return t=nc(t),this.dn=t,this.dn},t.prototype.hasSeries=function(){return this.wn},t.prototype.addDataSource=function(t){-1===this.vn.indexOf(t)&&(t instanceof ec&&(this.wn=!0),this.vn.push(t),this.bn=null,this.updateFormatter(),this.invalidateSourcesCache())},t.prototype.removeDataSource=function(t){var e=this.vn.indexOf(t);if(-1===e)throw new Error("source is not attached to scale");this.vn.splice(e,1),t instanceof ec&&(this.wn=!1),this.mainSource()||this.setMode({autoScale:!0}),this.bn=null,this.updateFormatter(),this.invalidateSourcesCache()},t.prototype.mainSource=function(){if(null!==this.bn)return this.bn;for(var t=null,e=0;e<this.vn.length;e++){var n=this.vn[e];if(n instanceof ec){t=n;break}null===t&&n instanceof Ll&&(t=n)}return this.bn=t,this.bn},t.prototype.firstValue=function(){for(var t=null,e=0,n=this.vn;e<n.length;e++){var i=n[e];if(i instanceof Ll){var r=i.firstValue();if(null===r)continue;(null===t||r.timePoint<t.timePoint)&&(t=r)}}return null===t?null:t.value},t.prototype.isInverted=function(){return this.$.invertScale},t.prototype.marks=function(){return this.mn?this.mn:(this.Nn.rebuildTickMarks(),this.mn=this.Nn.marks(),this.cn.fire(),this.mn)},t.prototype.onMarksChanged=function(){return this.cn},t.prototype.startScale=function(t){this.isPercentage()||this.isIndexedTo100()||null===this.Mn&&null===this.un&&(this.isEmpty()||(this.Mn=this.nn-t,this.un=Xu(this.priceRange()).clone()))},t.prototype.scaleTo=function(t){if(!this.isPercentage()&&!this.isIndexedTo100()&&null!==this.Mn){this.setMode({autoScale:!1}),(t=this.nn-t)<0&&(t=0);var e=(this.Mn+.2*(this.nn-1))/(t+.2*(this.nn-1)),n=Xu(this.un).clone();e=Math.max(e,.1),n.scaleAroundCenter(e),this.setPriceRange(n)}},t.prototype.endScale=function(){this.isPercentage()||this.isIndexedTo100()||(this.Mn=null,this.un=null)},t.prototype.startScroll=function(t){this.isAutoScale()||null===this.pn&&null===this.un&&(this.isEmpty()||(this.pn=t,this.un=Xu(this.priceRange()).clone()))},t.prototype.scrollTo=function(t){if(!this.isAutoScale()&&null!==this.pn){var e=Xu(this.priceRange()).length()/(this.internalHeight()-1),n=t-this.pn;this.isInverted()&&(n*=-1);var i=n*e,r=Xu(this.un).clone();r.shift(i),this.setPriceRange(r,!0),this.mn=null}},t.prototype.endScroll=function(){this.isAutoScale()||null!==this.pn&&(this.pn=null,this.un=null)},t.prototype.formatter=function(){return this.tn||this.updateFormatter(),this.tn},t.prototype.formatPrice=function(t,e){switch(this.$.mode){case 2:return this.formatter().format(jl(t,e));case 3:return this.formatter().format(Wl(t,e));default:return this.Bn(t)}},t.prototype.formatLogical=function(t){switch(this.$.mode){case 2:case 3:return this.formatter().format(t);default:return this.Bn(t)}},t.prototype.formatPriceAbsolute=function(t){return this.Bn(t,this.zn())},t.prototype.formatPricePercentage=function(t,e){return t=jl(t,e),ic.format(t)},t.prototype.sourcesForAutoScale=function(){return this.vn.filter((function(t){return t instanceof Ll}))},t.prototype.recalculatePriceRange=function(t){this.on={visibleBars:t,isValid:!1}},t.prototype.updateAllViews=function(){this.vn.forEach((function(t){return t.updateAllViews()}))},t.prototype.updateFormatter=function(){this.mn=null;var t=this.mainSource(),e=100;null!==t&&(e=Math.round(1/t.minMove())),this.tn=rc,this.isPercentage()?(this.tn=ic,e=100):this.isIndexedTo100()?(this.tn=new Rl(100,1),e=100):null!==t&&(this.tn=t.formatter()),this.Nn=new Ql(this,e,this.Sn.bind(this),this.xn.bind(this)),this.Nn.rebuildTickMarks()},t.prototype.invalidateSourcesCache=function(){this.dn=null},t.prototype.En=function(){return this.isInverted()?this.$.scaleMargins.bottom*this.height()+this.an:this.$.scaleMargins.top*this.height()+this.fn},t.prototype.Tn=function(){return this.isInverted()?this.$.scaleMargins.top*this.height()+this.fn:this.$.scaleMargins.bottom*this.height()+this.an},t.prototype.An=function(){this.on.isValid||(this.on.isValid=!0,this.Fn())},t.prototype.Dn=function(){this.sn=null,this.hn.fire()},t.prototype.xn=function(t,e,n){if(this.An(),this.isEmpty())return 0;t=this.isLog()&&t?ql(t):t;var i=Xu(this.priceRange()),r=this.Tn()+(this.internalHeight()-1)*(t-i.minValue())/i.length(),o=this.invertedCoordinate(r);return n?o:Math.round(o)},t.prototype.Sn=function(t,e){if(this.An(),this.isEmpty())return 0;var n=this.invertedCoordinate(t),i=Xu(this.priceRange()),r=i.minValue()+i.length()*((n-this.Tn())/(this.internalHeight()-1));return this.isLog()?Zl(r):r},t.prototype.Cn=function(){this.mn=null,this.Nn.rebuildTickMarks()},t.prototype.zn=function(){return Xu(this.mainSource()).formatter()},t.prototype.Fn=function(){var t=this.on.visibleBars;if(null!==t){for(var e=null,n=0,i=0,r=0,o=this.sourcesForAutoScale();r<o.length;r++){var s=o[r],a=s.firstValue();if(null!==a){var u=s.autoscaleInfo(t.firstBar(),t.lastBar()),l=u&&u.priceRange;if(null!==l){switch(this.$.mode){case 1:l=Kl(l);break;case 2:l=Ul(l,a.value);break;case 3:l=$l(l,a.value)}e=null===e?l:e.merge(Xu(l)),null!==u&&null!==u.margins&&(n=Math.max(n,u.margins.above),i=Math.max(n,u.margins.below))}}}if(n===this.fn&&i===this.an||(this.fn=n,this.an=i,this.mn=null,this.Dn()),null!==e){if(e.minValue()===e.maxValue()){var h=this.mainSource(),c=5*(null===h||this.isPercentage()||this.isIndexedTo100()?1:h.minMove());e=new zl(e.minValue()-c,e.maxValue()+c)}this.setPriceRange(e)}else null===this.rn&&this.setPriceRange(new zl(-.5,.5));this.on.isValid=!0}},t.prototype.Ln=function(){return this.isPercentage()?jl:this.isIndexedTo100()?Wl:this.isLog()?ql:null},t.prototype.Bn=function(t,e){return void 0===this.kn.priceFormatter?(void 0===e&&(e=this.formatter()),e.format(t)):this.kn.priceFormatter(t)},t}();function sc(t){return!tl(t)&&!nl(t)}function ac(t){return tl(t)}var uc,lc="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function hc(t,e,n){return void 0!==n?n+=" ":n="",void 0===e&&(e=lc),""+n+t+"px "+e}!function(t){t[t.BorderSize=1]="BorderSize",t[t.TickLength=4]="TickLength",t[t.OffsetSize=1]="OffsetSize"}(uc||(uc={}));var cc,dc=function(){function t(t){this.Ht={borderSize:1,tickLength:4,offsetSize:1,fontSize:NaN,font:"",fontFamily:"",color:"",paddingBottom:0,paddingInner:0,paddingOuter:0,paddingTop:0,baselineOffset:0},this.l=t}return t.prototype.options=function(){var t=this.Ht,e=this.Zt(),n=this.Vn();return t.fontSize===e&&t.fontFamily===n||(t.fontSize=e,t.fontFamily=n,t.font=hc(e,n),t.paddingTop=Math.floor(e/3.5),t.paddingBottom=t.paddingTop,t.paddingInner=Math.max(Math.ceil(e/2-t.tickLength/2),0),t.paddingOuter=Math.ceil(e/2+t.tickLength/2),t.baselineOffset=Math.round(e/5)),t.color=this.In(),this.Ht},t.prototype.In=function(){return this.l.options().layout.textColor},t.prototype.Zt=function(){return this.l.options().layout.fontSize},t.prototype.Vn=function(){return this.l.options().layout.fontFamily},t}(),fc=function(){function t(){this.M=null}return t.prototype.setData=function(t){this.M=t},t.prototype.draw=function(t){if(null!==this.M){if(t.lineWidth=1,this.M.vertLinesVisible){t.strokeStyle=this.M.vertLinesColor,$u(t,this.M.vertLineStyle),t.beginPath();for(var e=0,n=this.M.timeMarks;e<n.length;e++){var i=n[e];t.moveTo(i.coord+1,0),t.lineTo(i.coord+1,this.M.h)}t.stroke()}if(this.M.horzLinesVisible){t.strokeStyle=this.M.horzLinesColor,$u(t,this.M.horzLineStyle),t.beginPath();for(var r=0,o=this.M.priceMarks;r<o.length;r++){var s=o[r];t.moveTo(0,s.coord),t.lineTo(this.M.w,s.coord)}t.stroke()}}},t}(),pc=function(){function t(t){this.g=new fc,this.o=!0,this.P=t}return t.prototype.update=function(){this.o=!0},t.prototype.renderer=function(t,e){if(this.o){var n=this.P.model().options().grid,i={h:t,w:e,horzLinesVisible:n.horzLines.visible,vertLinesVisible:n.vertLines.visible,horzLinesColor:n.horzLines.color,vertLinesColor:n.vertLines.color,horzLineStyle:n.horzLines.style,vertLineStyle:n.vertLines.style,priceMarks:this.P.defaultPriceScale().marks(),timeMarks:this.P.model().timeScale().marks()||[]};this.g.setData(i),this.o=!1}return this.g},t}(),vc=function(){function t(){this.Pn=new WeakMap,this.o=!0}return t.prototype.paneViews=function(t){var e=this.Pn.get(t);return void 0===e&&(e=[new pc(t)],this.Pn.set(t,e)),this.o&&(e.forEach((function(t){return t.update()})),this.o=!1),e},t.prototype.invalidate=function(){this.o=!0},t}();!function(t){t[t.None=0]="None",t[t.Cursor=1]="Cursor",t[t.Light=2]="Light",t[t.Full=3]="Full"}(cc||(cc={}));var yc=function(){function t(t){this.On=new Map,this.Wn=!1,this.Rn=!1,this.qn=null,this.Un=t}return t.prototype.invalidatePane=function(t,e){var n=function(t,e){return void 0===t?e:{level:Math.max(t.level,e.level),autoScale:t.autoScale||e.autoScale}}(this.On.get(t),e);this.On.set(t,n)},t.prototype.invalidateAll=function(t){this.Un=Math.max(this.Un,t)},t.prototype.fullInvalidation=function(){return this.Un},t.prototype.invalidateForPane=function(t){var e=this.On.get(t);return void 0===e?{level:this.Un}:{level:Math.max(this.Un,e.level),autoScale:e.autoScale}},t.prototype.setFitContent=function(){this.Rn=!0,this.qn=null},t.prototype.getFitContent=function(){return this.Rn},t.prototype.setTargetTimeRange=function(t){this.qn=t,this.Rn=!1},t.prototype.getTargetTimeRange=function(){return this.qn},t.prototype.merge=function(t){var e=this;this.Wn=this.Wn||t.Wn,t.Rn&&this.setFitContent(),t.qn&&this.setTargetTimeRange(t.qn),this.Un=Math.max(this.Un,t.Un),t.On.forEach((function(t,n){e.invalidatePane(n,t)}))},t}(),gc=function(){function t(t){this.$=t}return t.prototype.align=function(t,e,n){var i=t;if(0===this.$.mode)return i;var r=n.defaultPriceScale(),o=r.firstValue();if(null===o)return i;var s=r.priceToCoordinate(t,o),a=n.dataSources().filter((function(t){return t instanceof ec})).reduce((function(t,i){if(n.isOverlay(i))return t;var r=i.priceScale(),o=i.bars();if(r.isEmpty()||!o.contains(e))return t;var s=o.valueAt(e);if(null===s)return t;var a=[s.value[3]],u=Gu(i.firstValue());return t.concat(a.map((function(t){return r.priceToCoordinate(t,u.value,!0)})))}),[]);return 0===a.length?i:(a.sort((function(t,e){return Math.abs(t-s)-Math.abs(e-s)})),r.coordinateToPrice(a[0],o))},t}(),mc=1e3,bc=function(){function t(t,e){this.vn=[],this.jn=[],this.nn=0,this.Kt=0,this.Hn=mc,this.Yn=null,this.dn=null,this.Kn=new Nl,this.$n=t,this.V=e,this.model().mainPriceScaleOptionsChanged().subscribe(this.onPriceScaleOptionsChanged.bind(this),this),this._n=this.Xn()}return t.prototype.onPriceScaleOptionsChanged=function(){this._n.applyOptions(this.V.options().priceScale)},t.prototype.destroy=function(){this.model().mainPriceScaleOptionsChanged().unsubscribeAll(this),this.$n.barSpacingChanged().unsubscribeAll(this),this._n.modeChanged().unsubscribeAll(this),this.vn.forEach((function(t){t.destroy&&t.destroy()})),this.Kn.fire()},t.prototype.stretchFactor=function(){return this.Hn},t.prototype.setStretchFactor=function(t){this.Hn=t},t.prototype.model=function(){return this.V},t.prototype.width=function(){return this.Kt},t.prototype.height=function(){return this.nn},t.prototype.setWidth=function(t){this.Kt=t,this.updateAllViews()},t.prototype.setHeight=function(t){var e=this;this.nn=t,this._n.setHeight(t),this.vn.forEach((function(n){if(e.isOverlay(n)){var i=n.priceScale();null!==i&&i.setHeight(t)}})),this.updateAllViews()},t.prototype.dataSources=function(){return this.vn},t.prototype.isOverlay=function(t){var e=t.priceScale();return null===e||this._n!==e},t.prototype.addDataSource=function(t,e,n){var i=this.Zn().minZOrder-1;this.Jn(t,e,i)},t.prototype.removeDataSource=function(t){var e=this.vn.indexOf(t);Yu(-1!==e,"removeDataSource: invalid data source"),this.vn.splice(e,1),t===this.Yn&&(this.Yn=null);var n=this.jn.indexOf(t);-1!==n&&this.jn.splice(n,1);var i=t.priceScale();if(i&&i.dataSources().indexOf(t)>=0&&i.removeDataSource(t),i&&null===i.mainSource()){var r=i.dataSources().length;Yu(0===r,"Invalid priceScale state: empty mainSource but non-empty data sources="+r),i!==this._n&&i.modeChanged().unsubscribeAll(this)}t instanceof Ll&&this.Gn(),i&&t instanceof Ll&&(i.invalidateSourcesCache(),this.recalculatePriceScale(i)),this.dn=null},t.prototype.priceScalePosition=function(){var t=this.V.options().priceScale.position;return"none"===t?"overlay":t},t.prototype.startScalePrice=function(t,e){t.startScale(e)},t.prototype.scalePriceTo=function(t,e){t.scaleTo(e),this.updateAllViews()},t.prototype.endScalePrice=function(t){t.endScale()},t.prototype.startScrollPrice=function(t,e){t.startScroll(e)},t.prototype.scrollPriceTo=function(t,e){t.scrollTo(e),this.updateAllViews()},t.prototype.endScrollPrice=function(t){t.endScroll()},t.prototype.setPriceAutoScale=function(t,e){t.setMode({autoScale:e}),this.$n.isEmpty()?t.setPriceRange(null):this.recalculatePriceScale(t)},t.prototype.updateAllViews=function(){this.vn.forEach((function(t){t.updateAllViews()}))},t.prototype.defaultPriceScale=function(){var t=this.mainDataSource(),e=null!==t?t.priceScale():null;return null===e&&(e=this._n),e},t.prototype.mainDataSource=function(){return this.Yn},t.prototype.recalculatePriceScale=function(t){null!==t&&t.isAutoScale()&&this.Qn(t)},t.prototype.resetPriceScale=function(t){var e=this.$n.visibleBars();t.setMode({autoScale:!0}),null!==e&&t.recalculatePriceRange(e),this.updateAllViews()},t.prototype.momentaryAutoScale=function(){this.Qn(this._n)},t.prototype.recalculate=function(){var t=this;this.recalculatePriceScale(this._n),this.vn.forEach((function(e){t.isOverlay(e)&&t.recalculatePriceScale(e.priceScale())})),this.updateAllViews(),this.V.lightUpdate()},t.prototype.isEmpty=function(){return null===this.Yn},t.prototype.containsSeries=function(){return this.vn.some((function(t){return t instanceof ec}))},t.prototype.orderedSources=function(){return null===this.dn&&(this.dn=nc(this.vn)),this.dn},t.prototype.onDestroyed=function(){return this.Kn},t.prototype.ts=function(t,e){return"overlay"!==e?this._n:this.Xn(!0)},t.prototype.Qn=function(t){var e=t.sourcesForAutoScale();if(e&&e.length>0&&!this.$n.isEmpty()){var n=this.$n.visibleBars();null!==n&&t.recalculatePriceRange(n)}t.updateAllViews()},t.prototype.Zn=function(){var t=this.orderedSources();if(0===t.length)return{minZOrder:0,maxZOrder:0};for(var e=0,n=0,i=0;i<t.length;i++){var r=t[i].zorder();null!==r&&(r<e&&(e=r),r>n&&(n=r))}return{minZOrder:e,maxZOrder:n}},t.prototype.Jn=function(t,e,n){var i="overlay",r=null;if(!e){var o=this.model().options().priceScale.position;i="none"===o?"overlay":o}t instanceof Ll&&(r=this.ts(t,i)),this.vn.push(t),e&&this.jn.push(t),null!==r&&(r.addDataSource(t),t.setPriceScale(r)),t.setZorder(n),this.Gn(),t instanceof Ll&&this.recalculatePriceScale(r),this.dn=null},t.prototype.ns=function(t,e,n){e.mode!==n.mode&&this.Qn(t)},t.prototype.Gn=function(){if(null===this.Yn||-1!==this.jn.indexOf(this.Yn)){for(var t=0,e=this.vn;t<e.length;t++)if((r=e[t])instanceof Ll&&!this.isOverlay(r))return void this.ss(r);for(var n=0,i=this.jn;n<i.length;n++){var r;if((r=i[n])instanceof Ll)return void this.ss(r)}}},t.prototype.ss=function(t){var e=Xu(t.priceScale());this.defaultPriceScale().modeChanged().unsubscribeAll(this),e.modeChanged().subscribe(this.ns.bind(this,e),this),this.Yn=t},t.prototype.Xn=function(t){var e=rl(this.V.options().priceScale);t&&(e.autoScale=!0,e.mode=0);var n=new oc(e,this.V.options().layout,this.V.options().localization);return n.setHeight(this.height()),n},t}(),_c=function(t){return t.getUTCFullYear()},wc=function(t){return Il(function(t){return t.getUTCDate()}(t),2)},kc=function(t){return Il(function(t){return t.getUTCMonth()+1}(t),2)},Cc=function(t){return Il(_c(t)%100,2)},Sc=function(t){return Il(_c(t),4)},xc={"dd MMM 'yy":function(t,e){return wc(t)+" "+function(t,e){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"short"})}(t,e)+" '"+Cc(t)},"yyyy-MM-dd":function(t,e){return Sc(t)+"-"+kc(t)+"-"+wc(t)},"yy-MM-dd":function(t,e){return Cc(t)+"-"+kc(t)+"-"+wc(t)},"yy/MM/dd":function(t,e){return Cc(t)+"/"+kc(t)+"/"+wc(t)},"yyyy/MM/dd":function(t,e){return Sc(t)+"/"+kc(t)+"/"+wc(t)},"dd-MM-yyyy":function(t,e){return wc(t)+"-"+kc(t)+"-"+Sc(t)},"dd-MM-yy":function(t,e){return wc(t)+"-"+kc(t)+"-"+Cc(t)},"dd/MM/yy":function(t,e){return wc(t)+"/"+kc(t)+"/"+Cc(t)},"dd/MM/yyyy":function(t,e){return wc(t)+"/"+kc(t)+"/"+Sc(t)},"MM/dd/yy":function(t,e){return kc(t)+"/"+wc(t)+"/"+Cc(t)},"MM/dd/yyyy":function(t,e){return kc(t)+"/"+wc(t)+"/"+Sc(t)}},Ec=function(){function t(t,e){void 0===t&&(t="yyyy-MM-dd"),void 0===e&&(e="default"),this.hs=xc[t],this.rs=e}return t.prototype.format=function(t){return this.hs(t,this.rs)},t}(),Tc=function(){function t(t){this.us=t||"%h:%m:%s"}return t.prototype.format=function(t){return this.us.replace("%h",Il(t.getUTCHours(),2)).replace("%m",Il(t.getUTCMinutes(),2)).replace("%s",Il(t.getUTCSeconds(),2))},t}(),Mc={dateFormat:"yyyy-MM-dd",timeFormat:"%h:%m:%s",dateTimeSeparator:" ",locale:"default"},Ac=function(){function t(t){void 0===t&&(t={});var e=Ku(Ku({},Mc),t);this.es=new Ec(e.dateFormat,e.locale),this.os=new Tc(e.timeFormat),this.fs=e.dateTimeSeparator}return t.prototype.format=function(t){return""+this.es.format(t)+this.fs+this.os.format(t)},t}(),Pc=function(){function t(t,e){Yu(t<=e,"The last bar in the bars range should be greater than or equal to the first bar"),this.as=t,this.cs=e}return t.prototype.firstBar=function(){return this.as},t.prototype.lastBar=function(){return this.cs},t.prototype.count=function(){return this.cs-this.as+1},t.prototype.contains=function(t){return this.as<=t&&t<=this.cs},t.prototype.equals=function(t){return this.as===t.firstBar()&&this.cs===t.lastBar()},t}(),Vc=function(){function t(t,e){void 0===e&&(e=50),this.Pt=0,this.Ot=1,this.Wt=1,this.qt=new Map,this.Rt=new Map,this.ls=t,this.Ut=e}return t.prototype.format=function(t){var e=this.qt.get(t.valueOf());if(void 0!==e)return e.string;if(this.Pt===this.Ut){var n=this.Rt.get(this.Wt);this.Rt.delete(this.Wt),this.qt.delete(Qu(n)),this.Wt++,this.Pt--}var i=this.ls(t);return this.qt.set(t.valueOf(),{string:i,tick:this.Ot}),this.Rt.set(this.Ot,t.valueOf()),this.Pt++,this.Ot++,i},t}();function Ic(t,e){return t.index-e.index}var Dc,Rc,Oc=function(){function t(){this.vs=1/0,this.ds=-1/0,this.ws=new Map,this.bs=[],this.ms=new Nl,this.qt=null,this.Ms=NaN}return t.prototype.reset=function(){this.ws.clear(),this.bs=[],this.vs=1/0,this.ds=-1/0,this.qt=null,this.ms.fire()},t.prototype.merge=function(t){for(var e=this.bs,n={},i=0,r=t;i<r.length;i++){var o=r[i],s=o.index,a=o.span,u=this.ws.get(o.index);if(u){if(u.index===o.index&&u.span===o.span){u.time=o.time;continue}this.ps(u)}this.ws.set(s,o),this.vs>s&&(this.vs=s),this.ds<s&&(this.ds=s),void 0===(l=e[a])&&(e[a]=l=[]),l.push(o),n[a]=!0}for(a=e.length;a--;){var l;void 0!==(l=e[a])&&(0===l.length&&delete e[a],n[a]&&l.sort(Ic))}this.qt=null,this.ms.fire()},t.prototype.indexToTime=function(t){var e=this.ws.get(t);return void 0===e?null:e.time},t.prototype.nearestIndex=function(t){for(var e=this.vs,n=this.ds;n-e>2;){if(1e3*Qu(this.ws.get(e)).time.timestamp===t)return e;if(1e3*Qu(this.ws.get(n)).time.timestamp===t)return n;var i=Math.round((e+n)/2);1e3*Qu(this.ws.get(i)).time.timestamp>t?n=i:e=i}return e},t.prototype.build=function(t,e){var n=Math.ceil(e/t);if(this.Ms===n&&this.qt)return this.qt;this.Ms=n;for(var i=[],r=this.bs.length;r--;)if(this.bs[r]){var o=i;i=[];for(var s=o.length,a=0,u=Qu(this.bs[r]),l=u.length,h=1/0,c=-1/0,d=0;d<l;d++){for(var f=u[d],p=f.index;a<s;){var v=o[a],y=v.index;if(!(y<p)){h=y;break}a++,i.push(v),c=y,h=1/0}h-p>=n&&p-c>=n&&(i.push(f),c=p)}for(;a<s;a++)i.push(o[a])}return this.qt=i,this.qt},t.prototype.ps=function(t){var e=t.index;if(this.ws.get(e)===t){this.ws.delete(e),e<=this.vs&&this.vs++,e>=this.ds&&this.ds--,this.ds<this.vs&&(this.vs=1/0,this.ds=-1/0);var n=Qu(this.bs[t.span]),i=n.indexOf(t);-1!==i&&n.splice(i,1)}},t}(),Nc=function(){function t(){this.vi=[]}return t.prototype.clear=function(){this.vi=[]},t.prototype.size=function(){return this.vi.length},t.prototype.firstIndex=function(){return this.gs(0)},t.prototype.lastIndex=function(){return this.gs(this.vi.length-1)},t.prototype.merge=function(t,e){if(0!==e.length)if(0!==this.vi.length){var n=t;if(n<0){var i=Math.abs(n);if(e.length<i)return;this.vi=new Array(i).concat(this.vi);for(var r=0;r<e.length;++r)this.vi[t+r]=e[r]}else{for(var o=n;o<this.vi.length&&o-n<e.length;++o)this.vi[o]=e[o-n];var s=n+e.length;if(s>this.vi.length){i=s-this.vi.length;for(var a=o;a<o+i;++a)this.vi.push(e[a-n])}}}else this.vi=e},t.prototype.valueAt=function(t){var e=this.ys(t);return null!==e?this.vi[e]:null},t.prototype.indexOf=function(t,e){if(this.vi.length<1)return null;if(t>this.vi[this.vi.length-1].timestamp)return e?this.vi.length-1:null;for(var n=0;n<this.vi.length;++n){if(t===this.vi[n].timestamp)return n;if(t<this.vi[n].timestamp)return e?n:null}return null},t.prototype.closestIndexLeft=function(t){var e=this.vi;if(!e.length)return null;if(Number.isNaN(t.timestamp))return null;var n=e.length-1;if(t>=e[n])return n;var i=0,r=e[i];if(t<r)return null;if(t===r)return i;for(;n>i+1;){var o=i+n>>1,s=e[o];if(s.timestamp>t.timestamp)n=o;else{if(!(s.timestamp<t.timestamp))return s.timestamp===t.timestamp?o:null;i=o}}return i},t.prototype.gs=function(t){return 0<=t&&t<this.size()?t:null},t.prototype.ys=function(t){return 0<=t&&t<this.size()?t:null},t}();!function(t){t[t.DefaultAnimationDuration=400]="DefaultAnimationDuration",t[t.MaxBarSpacing=50]="MaxBarSpacing",t[t.MinBarSpacing=.5]="MinBarSpacing",t[t.MinVisibleBarsCount=5]="MinVisibleBarsCount"}(Dc||(Dc={})),function(t){t[t.Minute=20]="Minute",t[t.Hour=30]="Hour",t[t.Day=40]="Day",t[t.Week=50]="Week",t[t.Month=60]="Month",t[t.Year=70]="Year"}(Rc||(Rc={}));var Lc=function(){function t(t,e,n){this.Kt=0,this.ks=null,this.Ns=new Nc,this.Ss=new Nl,this.pn=null,this.Mn=null,this.xs=new Oc,this.Ds=new Map,this.Cs=null,this.Es=!0,this.Ts=new Nl,this.As=new Nl,this.Ls=null,this.Bs=null,this.zs=null,this.Fs=[],this.$=e,this.kn=n,this.Vs=e.rightOffset,this.Is=zc(e.barSpacing),this.V=t,this.Ps()}return t.prototype.options=function(){return this.$},t.prototype.applyLocalizationOptions=function(t){Ju(this.kn,t),this.Os(),this.Ps()},t.prototype.applyOptions=function(t,e){Ju(this.$,t),this.$.fixLeftEdge?this.Ws():this.Ls=null,void 0!==t.rightOffset&&this.setRightOffset(t.rightOffset),void 0!==t.barSpacing&&this.setBarSpacing(t.barSpacing),this.Os(),this.Ps(),this.As.fire()},t.prototype.isEmpty=function(){return 0===this.Kt||0===this.Ns.size()},t.prototype.visibleBars=function(){return this.Es&&(this.Es=!1,this.Rs()),this.Cs},t.prototype.tickMarks=function(){return this.xs},t.prototype.points=function(){return this.Ns},t.prototype.width=function(){return this.Kt},t.prototype.setWidth=function(t){!isFinite(t)||t<=0||this.Kt===t||(this.$.lockVisibleTimeRangeOnResize&&this.Kt&&this.qs(this.Is*t/this.Kt),null!==this.Ls&&Xu(this.visibleBars()).firstBar()<=this.Ls&&(this.Vs-=Math.round((this.Kt-t)/this.Is)+1),this.Kt=t,this.Es=!0,this.Us())},t.prototype.indexToCoordinate=function(t,e){if(this.isEmpty()||!el(t))return 0;var n=this.baseIndex()+this.Vs-t,i=this.Kt-(n+.5)*this.Is;return e?i:Math.round(i)},t.prototype.indexesToCoordinates=function(t,e){for(var n=this.baseIndex(),i=void 0===e?t.length:e.to,r=void 0===e?0:e.from;r<i;r++)t[r].x=Math.round(this.Kt-(n+this.Vs-t[r].time+.5)*this.Is)},t.prototype.indexToUserTime=function(t){return this.xs.indexToTime(t)},t.prototype.coordinateToIndex=function(t){return Math.ceil(this.js(t))},t.prototype.setRightOffset=function(t){this.Es=!0,this.Vs=t,this.Us(),this.V.recalculateAllPanes(),this.V.lightUpdate()},t.prototype.barSpacing=function(){return this.Is},t.prototype.setBarSpacing=function(t){this.qs(t),this.Us()},t.prototype.barSpacingChanged=function(){return this.Ss},t.prototype.rightOffset=function(){return this.Vs},t.prototype.marks=function(){if(this.isEmpty())return null;if(null!==this.zs)return this.zs;for(var t=this.Is,e=5*(this.V.options().layout.fontSize+4),n=Math.round(e/t),i=Xu(this.visibleBars()),r=Math.max(i.firstBar(),i.firstBar()-n),o=Math.max(i.lastBar(),i.lastBar()-n),s=0,a=0,u=this.xs.build(t,e);a<u.length;a++){var l=u[a];if(r<=l.index&&l.index<=o){var h=this.xs.indexToTime(l.index);if(null!==h){if(s<this.Fs.length){var c=this.Fs[s];c.coord=this.indexToCoordinate(l.index),c.label=this.Hs(h,l.span),c.span=l.span,c.major=!1}else this.Fs.push({coord:this.indexToCoordinate(l.index),label:this.Hs(h,l.span),span:l.span,major:!1});s++}}}return this.Fs.length=s,this.zs=this.Fs,this.Fs},t.prototype.reset=function(){this.Es=!0,this.Ns=new Nc,this.pn=null,this.Mn=null,this.Ys(),this.xs.reset(),this.Ls=null},t.prototype.restoreDefault=function(){this.Es=!0,this.setBarSpacing(this.$.barSpacing),this.setRightOffset(this.$.rightOffset)},t.prototype.fixLeftEdge=function(){return this.$.fixLeftEdge},t.prototype.setBaseIndex=function(t){this.Es=!0,this.ks=t,this.Us(),this.Ws()},t.prototype.zoom=function(t,e){var n=this.js(t),i=this.barSpacing();this.setBarSpacing(i+e*(i/10)),this.$.rightBarStaysOnScroll||this.setRightOffset(this.rightOffset()+(n-this.js(t)))},t.prototype.startScale=function(t){this.pn&&this.endScroll(),null===this.Mn&&null===this.Bs&&(this.isEmpty()||(this.Mn=t,this.Ks()))},t.prototype.scaleTo=function(t){if(null!==this.Bs){var e=Fl(this.Kt-t,0,this.Kt),n=Fl(this.Kt-Xu(this.Mn),0,this.Kt);0!==e&&0!==n&&this.setBarSpacing(this.Bs.barSpacing*e/n)}},t.prototype.endScale=function(){null!==this.Mn&&(this.Mn=null,this.Ys())},t.prototype.startScroll=function(t){null===this.pn&&null===this.Bs&&(this.isEmpty()||(this.pn=t,this.Ks()))},t.prototype.scrollTo=function(t){if(this.Es=!0,null!==this.pn){var e=(this.pn-t)/this.barSpacing();this.Vs=Xu(this.Bs).rightOffset+e,this.Es=!0,this.Us()}},t.prototype.endScroll=function(){null!==this.pn&&(this.pn=null,this.Ys())},t.prototype.scrollToRealTime=function(){this.scrollToOffsetAnimated(this.$.rightOffset)},t.prototype.scrollToOffsetAnimated=function(t,e){var n=this;if(void 0===e&&(e=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var i=this.Vs,r=(new Date).getTime();!function o(){var s=((new Date).getTime()-r)/e,a=s>=1;n.setRightOffset(a?t:i+(t-i)*s),a||setTimeout(o,20)}()},t.prototype.update=function(t,e,n){if(this.Es=!0,e.length>0){var i=this.Ns.size();this.Ns.merge(t,e),this.Vs<0&&this.Ns.size()===i+1&&(this.Vs-=1,this.Es=!0)}this.xs.merge(n),this.Us()},t.prototype.visibleBarsChanged=function(){return this.Ts},t.prototype.optionsApplied=function(){return this.As},t.prototype.baseIndex=function(){return this.ks||0},t.prototype.setVisibleRange=function(t){var e=t.count();this.qs(this.Kt/e),this.Vs=t.lastBar()-this.baseIndex(),this.Us(),this.Es=!0,this.V.recalculateAllPanes(),this.V.lightUpdate()},t.prototype.fitContent=function(){var t=this.Ns.firstIndex(),e=this.Ns.lastIndex();null!==t&&null!==e&&this.setVisibleRange(new Pc(t-1,e+1+this.$.rightOffset))},t.prototype.setTimePointsRange=function(t){var e=this.points(),n=e.firstIndex(),i=e.lastIndex();if(null!==n&&null!==i){var r=Xu(e.valueAt(n)).timestamp,o=Xu(e.valueAt(i)).timestamp,s=new Pc(Xu(e.indexOf(Math.max(r,t.from.timestamp),!0)),Xu(e.indexOf(Math.min(o,t.to.timestamp),!0)));this.setVisibleRange(s)}},t.prototype.formatDateTime=function(t){return void 0!==this.kn.timeFormatter?this.kn.timeFormatter(t.businessDay||t.timestamp):this.$s.format(new Date(1e3*t.timestamp))},t.prototype._s=function(t){return(this.Kt+1-t)/this.Is},t.prototype.js=function(t){var e=this._s(t),n=this.baseIndex()+this.Vs-e;return Math.round(1e6*n)/1e6},t.prototype.qs=function(t){t=zc(t);var e=this.Is;e!==t&&(this.Es=!0,this.Is=t,this.Ss.fire(e,t),this.Xs())},t.prototype.Rs=function(){if(this.isEmpty())this.Zs(null);else{var t=this.baseIndex(),e=Math.ceil(this.Kt/this.Is)-1,n=Math.round(this.Vs+t);this.Zs(new Pc(n-e,n))}},t.prototype.Us=function(){var t=this.Js();this.Vs>t&&(this.Vs=t,this.Es=!0);var e=this.Gs();null!==e&&this.Vs<e&&(this.Vs=e,this.Es=!0)},t.prototype.Gs=function(){var t=this.Ns.firstIndex(),e=this.ks;return null===t||null===e?null:null!==this.Ls?this.Ls-e+this.Kt/this.Is-1:t-e-1+5},t.prototype.Js=function(){return this.Kt/this.Is-5},t.prototype.Ks=function(){this.Bs={barSpacing:this.barSpacing(),rightOffset:this.rightOffset()}},t.prototype.Ys=function(){this.Bs=null},t.prototype.Hs=function(t,e){var n=this,i=this.Ds.get(e);return void 0===i&&(i=new Vc((function(t){return n.Qs(t,e)})),this.Ds.set(e,i)),i.format(void 0===t.businessDay?new Date(1e3*t.timestamp):new Date(Date.UTC(t.businessDay.year,t.businessDay.month-1,t.businessDay.day)))},t.prototype.Qs=function(t,e){var n={},i=this.$.timeVisible;return e<20&&i?(n.hour12=!1,n.hour="2-digit",n.minute="2-digit",this.$.secondsVisible&&(n.second="2-digit")):e<40&&i?(n.hour12=!1,n.hour="2-digit",n.minute="2-digit"):e<50?n.day="numeric":e<60?n.day="numeric":e<70?n.month="short":n.year="numeric",new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()).toLocaleString(this.kn.locale,n)},t.prototype.Zs=function(t){if(null!==t||null!==this.Cs){var e=this.Cs;this.Cs=t,(null===this.Cs||null!==e&&!this.Cs.equals(e))&&this.Ts.fire(),this.Xs()}},t.prototype.Xs=function(){this.zs=null},t.prototype.Os=function(){this.Xs(),this.Ds.clear()},t.prototype.Ps=function(){var t=this.kn.dateFormat;this.$s=this.$.timeVisible?new Ac({dateFormat:t,timeFormat:this.$.secondsVisible?"%h:%m:%s":"%h:%m",dateTimeSeparator:"   ",locale:this.kn.locale}):new Ec(t,this.kn.locale)},t.prototype.Ws=function(){if(this.$.fixLeftEdge){var t=this.Ns.firstIndex();if(null!==t&&this.Ls!==t){this.Ls=t;var e=Xu(this.visibleBars()).firstBar()-t;e<0&&this.setRightOffset(this.Vs-e-1)}}},t}();function zc(t){return t<.5?.5:t>50?50:t}var Fc=function(){function t(t){this.th=new Map,this.M=t}return t.prototype.draw=function(t){},t.prototype.drawBackground=function(t){if(this.M.visible){t.save();for(var e=0,n=0,i=this.M.lines;n<i.length;n++)if(0!==(u=i[n]).text.length){t.font=u.font;var r=this.ih(t,u.text);u.zoom=r>this.M.width?this.M.width/r:1,e+=u.lineHeight*u.zoom}var o=0;switch(this.M.vertAlign){case"top":o=0;break;case"center":o=Math.max((this.M.height-e)/2,0);break;case"bottom":o=Math.max(this.M.height-e,0)}t.fillStyle=this.M.color;for(var s=0,a=this.M.lines;s<a.length;s++){var u=a[s];t.save();var l=0;switch(this.M.horzAlign){case"left":t.textAlign="left",l=u.lineHeight/2;break;case"center":t.textAlign="center",l=this.M.width/2;break;case"right":t.textAlign="right",l=this.M.width-1-u.lineHeight/2}t.translate(l,o),t.textBaseline="top",t.font=u.font,t.scale(u.zoom,u.zoom),t.fillText(u.text,0,u.vertOffset),t.restore(),o+=u.lineHeight*u.zoom}t.restore()}},t.prototype.ih=function(t,e){var n=this.nh(t.font),i=n.get(e);return void 0===i&&(i=t.measureText(e).width,n.set(e,i)),i},t.prototype.nh=function(t){var e=this.th.get(t);return void 0===e&&(e=new Map,this.th.set(t,e)),e},t}(),Bc=function(){function t(t){this.o=!0,this.p={visible:!1,color:"",height:0,width:0,lines:[],vertAlign:"center",horzAlign:"center"},this.g=new Fc(this.p),this.k=t}return t.prototype.update=function(){this.o=!0},t.prototype.renderer=function(t,e){return this.o&&(this.m(t,e),this.o=!1),this.g},t.prototype.m=function(t,e){var n=this.k.options(),i=this.p;i.visible=n.visible,i.visible&&(i.color=n.color,i.width=e,i.height=t,i.horzAlign=n.horzAlign,i.vertAlign=n.vertAlign,i.lines=[{text:n.text,font:hc(n.fontSize),lineHeight:1.2*n.fontSize,vertOffset:0,zoom:0}])},t}(),Hc=function(t){function e(e,n){var i=t.call(this)||this;return i.$=n,i.J=new Bc(i),i}return Zu(e,t),e.prototype.paneViews=function(){return[this.J]},e.prototype.options=function(){return this.$},e.prototype.updateAllViews=function(){this.J.update()},e}(Pl),jc=function(){function t(t,e){this.sh=[],this.hh=[],this.Kt=0,this.rh=null,this.uh=null,this.eh=new Nl,this.oh=new Nl,this.fh=t,this.$=e,this.ah=new dc(this),this.$n=new Lc(this,e.timeScale,this.$.localization),this.lh=new vc,this.v=new Vl(this,e.crosshair),this.vh=new gc(e.crosshair),this.dh=new Hc(this,e.watermark),this.createPane(),this.sh[0].setStretchFactor(2*mc),this.sh[0].addDataSource(this.dh,!0,!1)}return t.prototype.fullUpdate=function(){this.wh(new yc(3))},t.prototype.lightUpdate=function(){this.wh(new yc(2))},t.prototype.updateSource=function(t){var e=this.bh(t);this.wh(e)},t.prototype.hoveredSource=function(){return this.uh},t.prototype.setHoveredSource=function(t){var e=this.uh;this.uh=t,null!==e&&this.updateSource(e.source),null!==t&&this.updateSource(t.source)},t.prototype.options=function(){return this.$},t.prototype.applyOptions=function(t){Ju(this.$,t),void 0!==t.priceScale&&(this.mainPriceScale().applyOptions(t.priceScale),this.eh.fire()),void 0!==t.timeScale&&this.$n.applyOptions(t.timeScale),void 0!==t.localization&&(this.$n.applyLocalizationOptions(t.localization),this.mainPriceScale().updateFormatter()),this.fullUpdate()},t.prototype.updateAllPaneViews=function(){this.sh.forEach((function(t){return t.updateAllViews()})),this.updateCrosshair()},t.prototype.timeScale=function(){return this.$n},t.prototype.panes=function(){return this.sh},t.prototype.gridSource=function(){return this.lh},t.prototype.watermarkSource=function(){return this.dh},t.prototype.crosshairSource=function(){return this.v},t.prototype.crosshairMoved=function(){return this.oh},t.prototype.width=function(){return this.Kt},t.prototype.setPaneHeight=function(t,e){t.setHeight(e),this.recalculateAllPanes(),this.lightUpdate()},t.prototype.setWidth=function(t){this.Kt=t,this.$n.setWidth(this.Kt),this.sh.forEach((function(e){return e.setWidth(t)})),this.recalculateAllPanes()},t.prototype.createPane=function(t){var e=new bc(this.$n,this);void 0!==t?this.sh.splice(t,0,e):this.sh.push(e);var n=void 0===t?this.sh.length-1:t,i=new yc(3);return i.invalidatePane(n,{level:0,autoScale:!0}),this.invalidate(i),e},t.prototype.startScalePrice=function(t,e,n){t.startScalePrice(e,n)},t.prototype.scalePriceTo=function(t,e,n){t.scalePriceTo(e,n),this.updateCrosshair(),this.wh(this.mh(t,2))},t.prototype.endScalePrice=function(t,e){t.endScalePrice(e),this.wh(this.mh(t,2))},t.prototype.startScrollPrice=function(t,e,n){e.isAutoScale()||t.startScrollPrice(e,n)},t.prototype.scrollPriceTo=function(t,e,n){e.isAutoScale()||(t.scrollPriceTo(e,n),this.updateCrosshair(),this.wh(this.mh(t,2)))},t.prototype.endScrollPrice=function(t,e){e.isAutoScale()||(t.endScrollPrice(e),this.wh(this.mh(t,2)))},t.prototype.setPriceAutoScale=function(t,e,n){t.setPriceAutoScale(e,n),this.wh(this.mh(t,2))},t.prototype.resetPriceScale=function(t,e){t.resetPriceScale(e),this.wh(this.mh(t,2))},t.prototype.startScaleTime=function(t){this.$n.startScale(t)},t.prototype.zoomTime=function(t,e){var n=this.timeScale();if(!n.isEmpty()&&0!==e){var i=n.width();t=Math.max(1,Math.min(t,i)),n.zoom(t,e),this.updateCrosshair(),this.recalculateAllPanes(),this.lightUpdate()}},t.prototype.scrollChart=function(t){this.startScrollTime(0),this.scrollTimeTo(t),this.endScrollTime()},t.prototype.scaleTimeTo=function(t){this.$n.scaleTo(t),this.recalculateAllPanes(),this.updateCrosshair(),this.lightUpdate()},t.prototype.endScaleTime=function(){this.$n.endScale(),this.lightUpdate()},t.prototype.startScrollTime=function(t){this.rh=t,this.$n.startScroll(t)},t.prototype.scrollTimeTo=function(t){var e=!1;return null!==this.rh&&Math.abs(t-this.rh)>20&&(this.rh=null,e=!0),this.$n.scrollTo(t),this.recalculateAllPanes(),this.updateCrosshair(),this.lightUpdate(),e},t.prototype.endScrollTime=function(){this.$n.endScroll(),this.lightUpdate(),this.rh=null},t.prototype.resetTimeScale=function(){this.$n.restoreDefault(),this.recalculateAllPanes(),this.updateCrosshair(),this.lightUpdate()},t.prototype.invalidate=function(t){this.fh&&this.fh(t),this.lh.invalidate(),this.lightUpdate()},t.prototype.dataSources=function(){return this.sh.reduce((function(t,e){return t.concat(e.dataSources())}),[])},t.prototype.serieses=function(){return this.hh},t.prototype.setAndSaveCurrentPosition=function(t,e,n){this.v.saveOriginCoord(t,e);var i=NaN,r=this.$n.coordinateToIndex(t),o=this.$n.visibleBars();if(null!==o&&(r=Math.min(Math.max(o.firstBar(),r),o.lastBar())),null!==n.mainDataSource()){var s=n.defaultPriceScale(),a=s.firstValue();null!==a&&(i=s.coordinateToPrice(e,a)),i=this.vh.align(i,r,n)}this.v.setPosition(r,i,n),this.Mh(),this.oh.fire(this.v.appliedIndex(),{x:t,y:e})},t.prototype.clearCurrentPosition=function(){this.crosshairSource().clearPosition(),this.Mh(),this.oh.fire(null,null)},t.prototype.updateCrosshair=function(){var t=this.v.pane();if(null!==t){var e=this.v.originCoordX(),n=this.v.originCoordY();this.setAndSaveCurrentPosition(e,n,t)}},t.prototype.updateTimeScale=function(t,e,n,i){i&&this.$n.reset(),this.$n.update(t,e,n)},t.prototype.updateTimeScaleBaseIndex=function(t){var e=this.hh.reduce((function(t,e){var n=e.bars();if(n.isEmpty())return t;var i=Xu(n.lastIndex());return void 0===t?i:Math.max(i,t)}),void 0);if(void 0!==e){var n=this.$n,i=n.baseIndex(),r=n.visibleBars();if(null!==r){var o=r.contains(i);if(void 0!==t&&t>0&&!o){var s=e-i;n.setRightOffset(n.rightOffset()-s)}}n.setBaseIndex(e)}this.updateCrosshair(),this.recalculateAllPanes(),this.lightUpdate()},t.prototype.recalculatePane=function(t){null!==t&&t.recalculate()},t.prototype.paneForSource=function(t){var e=this.sh.find((function(e){return e.orderedSources().includes(t)}));return void 0===e?null:e},t.prototype.recalculateAllPanes=function(){this.sh.forEach((function(t){return t.recalculate()})),this.updateAllPaneViews()},t.prototype.destroy=function(){this.sh.forEach((function(t){return t.destroy()})),this.sh.length=0,this.$.localization.priceFormatter=void 0,this.$.localization.timeFormatter=void 0},t.prototype.setPriceAutoScaleForAllMainSources=function(){this.sh.map((function(t){return t.mainDataSource()})).forEach((function(t){null!==t&&Xu(t.priceScale()).setMode({autoScale:!0})}))},t.prototype.rendererOptionsProvider=function(){return this.ah},t.prototype.priceAxisRendererOptions=function(){return this.ah.options()},t.prototype.mainPriceScaleOptionsChanged=function(){return this.eh},t.prototype.mainPriceScale=function(){return this.sh[0].defaultPriceScale()},t.prototype.createSeries=function(t,e){var n=this.ph(e,t,this.sh[0]);return this.hh.push(n),1===this.hh.length?this.fullUpdate():this.lightUpdate(),n},t.prototype.removeSeries=function(t){var e=this.paneForSource(t),n=this.hh.indexOf(t);Yu(-1!==n,"Series not found"),this.hh.splice(n,1),Xu(e).removeDataSource(t),t.destroy&&t.destroy()},t.prototype.fitContent=function(){var t=new yc(2);t.setFitContent(),this.wh(t)},t.prototype.setTargetTimeRange=function(t){var e=new yc(2);e.setTargetTimeRange(t),this.wh(e)},t.prototype.mh=function(t,e){var n=new yc(e);if(null!==t){var i=this.sh.indexOf(t);n.invalidatePane(i,{level:e})}return n},t.prototype.bh=function(t,e){return void 0===e&&(e=2),this.mh(this.paneForSource(t),e)},t.prototype.wh=function(t){this.fh&&this.fh(t),this.lh.invalidate()},t.prototype.Mh=function(){this.wh(new yc(1))},t.prototype.ph=function(t,e,n){var i=new ec(this,t,e);return n.addDataSource(i,Boolean(t.overlay),!1),t.overlay&&i.applyOptions(t),i},t}(),Uc=function(){function t(t,e){this.w=t,this.h=e}return t.prototype.equals=function(t){return this.w===t.w&&this.h===t.h},t}();function Wc(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function $c(t){var e=Xu(t.getContext("2d")),n=Wc(t);return e.setTransform(n,0,0,n,0,0),e}function qc(t){var e=Xu(t.canvas.getContext("2d"));return e.setTransform(t.pixelRatio,0,0,t.pixelRatio,0,0),e.translate(.5,.5),e}function Zc(t,e,n,i,r,o){t.save(),t.translate(-.5,-.5),t.globalCompositeOperation="copy",t.fillStyle=o,t.fillRect(e,n,i,r),t.restore()}function Kc(t){var e=t.createElement("canvas");return function(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.msUserSelect="none",t.style.MozUserSelect="none",t.style.webkitTapHighlightColor="transparent"}(e),e}function Yc(t,e){var n=Kc(t),i=Wc(n);return n.style.width=e.w+"px",n.style.height=e.h+"px",n.width=e.w*i,n.height=e.h*i,n}function Qc(t,e){var n=Kc(Xu(t.ownerDocument));t.appendChild(n);var i=new Uu(n);return i.resizeCanvas({width:e.w,height:e.h}),i}var Xc,Gc=!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||"ontouchstart"in window||Boolean(window.DocumentTouch&&document instanceof window.DocumentTouch),Jc="onorientationchange"in window&&Gc,td=/Android/i.test(navigator.userAgent),ed=/iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent),nd=td||ed;!function(t){t[t.ResetClick=500]="ResetClick",t[t.LongTap=240]="LongTap"}(Xc||(Xc={}));var id=function(){function t(t,e,n){this.gh=0,this.yh=null,this.kh=null,this.Nh=!1,this.Sh=null,this.xh=!1,this.Dh=!1,this.Ch=null,this.Eh=null,this.Th=null,this.Ah=null,this.Lh=0,this.Bh=!1,this.zh=!1,this.Fh=!1,this.Vh=t,this.Ih=e,this.$=n,this.Ph()}return t.prototype.destroy=function(){null!==this.Ch&&(this.Ch(),this.Ch=null),null!==this.Eh&&(this.Eh(),this.Eh=null),null!==this.Th&&(this.Th(),this.Th=null),this.Oh(),this.Wh()},t.prototype.Rh=function(t){var e=this;this.Eh&&this.Eh();var n=this.qh.bind(this);this.Eh=function(){e.Vh.removeEventListener("mousemove",n)},this.Vh.addEventListener("mousemove",n),sd(t)&&this.qh(t);var i=this.Uh(t);this.jh(i,this.Ih.mouseEnterEvent)},t.prototype.Wh=function(){null!==this.yh&&clearTimeout(this.yh),this.gh=0,this.yh=null},t.prototype.qh=function(t){if(!this.Fh||sd(t)){var e=this.Uh(t);this.jh(e,this.Ih.mouseMoveEvent)}},t.prototype.Hh=function(t){if(!("button"in t&&0!==t.button)&&null===this.Ah){var e=sd(t);if(!this.zh||!e){this.Bh=!0;var n=this.Uh(t),i=Gu(this.Sh),r=Math.abs(i.x-n.pageX),o=Math.abs(i.y-n.pageY),s=r+o>5;if(s||!e){if(s&&!this.xh&&e){var a=.5*r;o>=a&&!this.$.treatVertTouchDragAsPageScroll||a>o&&!this.$.treatHorzTouchDragAsPageScroll||(this.zh=!0)}s&&(this.xh=!0,this.Dh=!0,e&&this.Oh()),this.zh||(this.jh(n,this.Ih.pressedMouseMoveEvent),e&&ad(t))}}}},t.prototype.Yh=function(t){if(!("button"in t&&0!==t.button)){var e=this.Uh(t);this.Oh(),this.Sh=null,this.Fh=!1,this.Th&&(this.Th(),this.Th=null),sd(t)&&this.Kh(t),this.jh(e,this.Ih.mouseUpEvent),++this.gh,this.yh&&this.gh>1?(this.jh(e,this.Ih.mouseDoubleClickEvent),this.Wh()):this.Dh||this.jh(e,this.Ih.mouseClickEvent),sd(t)&&(ad(t),this.Kh(t),0===t.touches.length&&(this.Nh=!1))}},t.prototype.Oh=function(){null!==this.kh&&(clearTimeout(this.kh),this.kh=null)},t.prototype.$h=function(t){if(!("button"in t&&0!==t.button)){var e=this.Uh(t);this.Dh=!1,this.xh=!1,this.zh=!1,sd(t)&&this.Rh(t),this.Sh={x:e.pageX,y:e.pageY},this.Th&&(this.Th(),this.Th=null);var n=this.Hh.bind(this),i=this.Yh.bind(this),r=this.Vh.ownerDocument.documentElement;this.Th=function(){r.removeEventListener("touchmove",n),r.removeEventListener("touchend",i),r.removeEventListener("mousemove",n),r.removeEventListener("mouseup",i)},r.addEventListener("touchmove",n,{passive:!1}),r.addEventListener("touchend",i,{passive:!1}),this.Oh(),sd(t)&&1===t.touches.length?this.kh=setTimeout(this._h.bind(this,t),240):(r.addEventListener("mousemove",n),r.addEventListener("mouseup",i)),this.Fh=!0,this.jh(e,this.Ih.mouseDownEvent),this.yh||(this.gh=0,this.yh=setTimeout(this.Wh.bind(this),500))}},t.prototype.Ph=function(){var t=this;this.Vh.addEventListener("mouseenter",this.Rh.bind(this)),this.Vh.addEventListener("touchcancel",this.Oh.bind(this));var e=this.Vh.ownerDocument,n=function(e){t.Ih.mouseDownOutsideEvent&&(e.target&&t.Vh.contains(e.target)||t.Ih.mouseDownOutsideEvent())};this.Ch=function(){e.removeEventListener("mousedown",n),e.removeEventListener("touchstart",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0}),this.Vh.addEventListener("mouseleave",this.Kh.bind(this)),this.Vh.addEventListener("touchstart",this.$h.bind(this),{passive:!0}),Jc||this.Vh.addEventListener("mousedown",this.$h.bind(this)),this.Xh(),this.Vh.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype.Xh=function(){var t=this;void 0===this.Ih.pinchStartEvent&&void 0===this.Ih.pinchEvent&&void 0===this.Ih.pinchEndEvent||(this.Vh.addEventListener("touchstart",(function(e){return t.Zh(e.touches)}),{passive:!0}),this.Vh.addEventListener("touchmove",(function(e){if(2===e.touches.length&&null!==t.Ah&&void 0!==t.Ih.pinchEvent){var n=od(e.touches[0],e.touches[1])/t.Lh;t.Ih.pinchEvent(t.Ah,n),ad(e)}}),{passive:!1}),this.Vh.addEventListener("touchend",(function(e){t.Zh(e.touches)})))},t.prototype.Zh=function(t){1===t.length&&(this.Bh=!1),2!==t.length||this.Bh||this.Nh?this.Jh():this.Gh(t)},t.prototype.Gh=function(t){var e=rd(this.Vh);this.Ah={x:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,y:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Lh=od(t[0],t[1]),void 0!==this.Ih.pinchStartEvent&&this.Ih.pinchStartEvent(),this.Oh()},t.prototype.Jh=function(){null!==this.Ah&&(this.Ah=null,void 0!==this.Ih.pinchEndEvent&&this.Ih.pinchEndEvent())},t.prototype.Kh=function(t){this.Eh&&this.Eh();var e=this.Uh(t);this.jh(e,this.Ih.mouseLeaveEvent)},t.prototype._h=function(t){var e=this.Uh(t);this.jh(e,this.Ih.longTapEvent),this.Dh=!0,this.Nh=!0},t.prototype.jh=function(t,e){e&&e.call(this.Ih,t)},t.prototype.Uh=function(t){var e;e="touches"in t&&t.touches.length?t.touches[0]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0]:t;var n=rd(this.Vh);return{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY,localX:e.clientX-n.left,localY:e.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,type:t.type.startsWith("mouse")?"mouse":"touch",target:e.target,view:t.view}},t}();function rd(t){return t.getBoundingClientRect()||{left:0,top:0}}function od(t,e){var n=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(n*n+i*i)}function sd(t){return Boolean(t.touches)}function ad(t){t.cancelable&&t.preventDefault()}var ud,ld=1,hd=function(){function t(t,e,n,i){if(this.Qh=0,this.tr=0,this.ir=0,this.nr=0,this.sr=0,this.hr=0,this.rr=0,this.ur=t,this.er=t.paneWidgets()[e],this.or=t.paneWidgets()[n],this.ar=document.createElement("tr"),this.ar.style.height=ld+"px",this.cr=document.createElement("td"),this.cr.style.padding="0",this.cr.setAttribute("colspan","3"),this.lr(),this.ar.appendChild(this.cr),i)this.vr=null,this.dr=null;else{this.vr=document.createElement("div"),this.vr.style.position="absolute",this.vr.style.zIndex="50",this.vr.style.height="5px",this.vr.style.width="100%",this.vr.style.backgroundColor="rgba(255, 255, 255, 0.02)",this.vr.style.cursor="ns-resize",this.cr.appendChild(this.vr);var r={mouseDownEvent:this.wr.bind(this),pressedMouseMoveEvent:this.br.bind(this),mouseUpEvent:this.mr.bind(this)};this.dr=new id(this.vr,r,{treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!0})}}return t.prototype.destroy=function(){null!==this.dr&&this.dr.destroy()},t.prototype.getElement=function(){return this.ar},t.prototype.getSize=function(){return new Uc(this.er.getSize().w,ld)},t.prototype.getImage=function(){var t=this.getSize(),e=Yc(document,t),n=$c(e);return n.fillStyle=this.ur.options().timeScale.borderColor,n.fillRect(0,0,t.w,t.h),e},t.prototype.update=function(){this.lr()},t.prototype.lr=function(){this.cr.style.background=this.ur.options().timeScale.borderColor},t.prototype.wr=function(t){this.Qh=t.pageY,this.tr=0,this.ir=this.er.getSize().h+this.or.getSize().h,this.nr=this.er.stretchFactor()+this.or.stretchFactor(),this.sr=30,this.hr=this.ir-this.sr,this.rr=this.nr/this.ir},t.prototype.br=function(t){this.tr=t.pageY-this.Qh;var e=this.er.getSize().h,n=Fl(e+this.tr,this.sr,this.hr)*this.rr,i=this.nr-n;this.er.setStretchFactor(n),this.or.setStretchFactor(i),this.ur.adjustSize(),this.er.getSize().h!==e&&(this.Qh=t.pageY)},t.prototype.mr=function(t){this.Qh=0,this.tr=0,this.ir=0,this.nr=0,this.sr=0,this.hr=0,this.rr=0},t}(),cd=200,dd=function(){function t(t,e,n,i){this.$t=new wh(cd),this.Zt=0,this.Mr="",this.pr="",this.gr=[],this.yr=new Map,this.Zt=t,this.Mr=e,this.pr=hc(t,n,i)}return t.prototype.destroy=function(){delete this.$t,this.gr=[],this.yr.clear()},t.prototype.paintTo=function(t,e,n,i,r){var o=this.getLabelImage(t,e);"left"!==r&&(n-=o.textWidth),i-=Math.floor(o.height/2),t.drawImage(o.canvas,n,i,o.width,o.height)},t.prototype.getLabelImage=function(t,e){var n;if(this.yr.has(e))n=Qu(this.yr.get(e));else{if(this.gr.length>=cd){var i=Qu(this.gr.shift());this.yr.delete(i)}var r=Math.ceil(this.Zt/4.5),o=Math.round(this.Zt/10),s=Math.ceil(this.$t.measureText(t,e)),a=Math.round(s+2*r),u=this.Zt+2*r,l=Yc(document,new Uc(a,u));n={text:e,textWidth:Math.round(Math.max(1,s)),width:a,height:u,canvas:l},0!==s&&(this.gr.push(n.text),this.yr.set(n.text,n)),(t=$c(n.canvas)).font=this.pr,t.fillStyle=this.Mr,t.fillText(e,0,n.height-r-o)}return n},t}();!function(t){t[t.Default=0]="Default",t[t.NsResize=1]="NsResize"}(ud||(ud={}));var fd,pd,vd=function(){function t(t,e,n,i){var r=this;this.B=null,this.kr=null,this.Nr=null,this.Sr=!1,this.xr=!0,this.Dr=new wh(50),this.Cr=new dd(11,"#000"),this.Mr=null,this.pr=null,this.Er=0,this.Tr=function(){r.Ar(r.ah.options()),r.P.chart().model().lightUpdate()},this.Lr=function(){r.P.chart().model().lightUpdate()},this.P=t,this.$=e,this.ah=n,this.Br="left"===i,this.cr=document.createElement("div"),this.cr.style.height="100%",this.cr.style.overflow="hidden",this.cr.style.width="25px",this.cr.style.left="0",this.cr.style.position="relative",this.zr=Qc(this.cr,new Uc(16,16)),this.zr.subscribeCanvasConfigured(this.Tr);var o=this.zr.canvas;o.style.position="absolute",o.style.zIndex="1",o.style.left="0",o.style.top="0",this.Fr=Qc(this.cr,new Uc(16,16)),this.Fr.subscribeCanvasConfigured(this.Lr);var s=this.Fr.canvas;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0";var a={mouseDownEvent:this.wr.bind(this),pressedMouseMoveEvent:this.br.bind(this),mouseDownOutsideEvent:this.Vr.bind(this),mouseUpEvent:this.mr.bind(this),mouseDoubleClickEvent:this.Ir.bind(this),mouseEnterEvent:this.Pr.bind(this),mouseLeaveEvent:this.Or.bind(this)};this.dr=new id(this.Fr.canvas,a,{treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!0})}return t.prototype.destroy=function(){this.dr.destroy(),this.Fr.unsubscribeCanvasConfigured(this.Lr),this.Fr.destroy(),this.zr.unsubscribeCanvasConfigured(this.Tr),this.zr.destroy(),null!==this.B&&(this.B.onMarksChanged().unsubscribeAll(this),this.B.optionsChanged().unsubscribeAll(this)),this.B=null,null!==this.Nr&&(clearTimeout(this.Nr),this.Nr=null),this.Cr.destroy()},t.prototype.getElement=function(){return this.cr},t.prototype.backgroundColor=function(){return this.$.backgroundColor},t.prototype.lineColor=function(){return this.P.chart().options().priceScale.borderColor},t.prototype.textColor=function(){return this.$.textColor},t.prototype.fontSize=function(){return this.$.fontSize},t.prototype.baseFont=function(){return hc(this.fontSize(),this.$.fontFamily)},t.prototype.rendererOptions=function(){var t=this.ah.options(),e=this.pr!==t.font;return(this.Mr!==t.color||e)&&(this.Ar(t),this.Mr=t.color),e&&(this.Dr.reset(),this.pr=t.font),t},t.prototype.optimalWidth=function(){if(!this.isVisible()||null===this.B)return 0;var t=34,e=this.rendererOptions(),n=qc(this.zr),i=this.B.marks();n.font=this.baseFont(),i.length>0&&(t=Math.max(this.Dr.measureText(n,i[0].label),this.Dr.measureText(n,i[i.length-1].label)));for(var r=this.Wr(),o=r.length;o--;){var s=this.Dr.measureText(n,r[o].text());s>t&&(t=s)}return Math.ceil(e.offsetSize+e.borderSize+e.tickLength+e.paddingInner+e.paddingOuter+t)},t.prototype.setSize=function(t){if(t.w<0||t.h<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.kr&&this.kr.equals(t)||(this.kr=t,this.zr.resizeCanvas({width:t.w,height:t.h}),this.Fr.resizeCanvas({width:t.w,height:t.h}),this.cr.style.width=t.w+"px",this.cr.style.height=t.h+"px",this.cr.style.minWidth=t.w+"px")},t.prototype.getWidth=function(){return Xu(this.kr).w},t.prototype.setPriceScale=function(t){this.B!==t&&(null!==this.B&&(this.B.onMarksChanged().unsubscribeAll(this),this.B.optionsChanged().unsubscribeAll(this)),this.B=t,t.onMarksChanged().subscribe(this.cn.bind(this),this))},t.prototype.priceScale=function(){return this.B},t.prototype.isVisible=function(){return this.xr},t.prototype.setVisible=function(t){t!==this.xr&&(this.cr.style.display=t?"table-cell":"none",this.xr=t)},t.prototype.setAutoScale=function(t){var e=this.P.state();this.P.chart().model().setPriceAutoScale(e,Xu(this.priceScale()),t)},t.prototype.reset=function(){var t=this.P.state();this.P.chart().model().resetPriceScale(t,Xu(this.priceScale()))},t.prototype.paint=function(t){if(this.xr&&null!==this.kr){if(1!==t){var e=qc(this.zr);this.Rr(),this.qr(e),this.Lt(e),this.Ur(e),this.jr(e)}var n=qc(this.Fr);n.clearRect(-.5,-.5,this.kr.w,this.kr.h),this.Hr(n)}},t.prototype.getImage=function(){return this.zr.canvas},t.prototype.isLeft=function(){return this.Br},t.prototype.wr=function(t){if(null!==this.B&&!this.B.isEmpty()&&this.P.chart().options().handleScale.axisPressedMouseMove){var e=this.P.chart().model(),n=this.P.state();this.Sr=!0,e.startScalePrice(n,this.B,t.localY)}},t.prototype.br=function(t){if(null!==this.B&&this.P.chart().options().handleScale.axisPressedMouseMove){var e=this.P.chart().model(),n=this.P.state();e.scalePriceTo(n,this.B,t.localY)}},t.prototype.Vr=function(){if(null!==this.B&&this.P.chart().options().handleScale.axisPressedMouseMove){var t=this.P.chart().model(),e=this.P.state(),n=this.B;this.Sr&&(this.Sr=!1,t.endScalePrice(e,n))}},t.prototype.mr=function(t){if(null!==this.B&&this.P.chart().options().handleScale.axisPressedMouseMove){var e=this.P.chart().model(),n=this.P.state();this.Sr=!1,e.endScalePrice(n,this.B)}},t.prototype.Ir=function(t){this.P.chart().options().handleScale.axisDoubleClickReset&&this.reset()},t.prototype.Pr=function(t){null!==this.B&&(!this.P.chart().model().options().handleScale.axisPressedMouseMove||this.B.isPercentage()||this.B.isIndexedTo100()||this.Yr(1))},t.prototype.Or=function(t){this.Yr(0)},t.prototype.Wr=function(){var t=this,e=[],n=null===this.B?void 0:this.B;return function(i){for(var r=0;r<i.length;++r)for(var o=i[r].priceAxisViews(t.P.state(),n),s=0;s<o.length;s++)e.push(o[s])}(this.P.state().orderedSources()),e},t.prototype.qr=function(t){null!==this.kr&&Zc(t,0,0,this.kr.w,this.kr.h,this.backgroundColor())},t.prototype.Lt=function(t){if(null!==this.kr&&null!==this.B&&this.B.options().borderVisible){t.save(),t.fillStyle=this.lineColor();var e,n=this.rendererOptions().borderSize;this.Br?(t.translate(-.5,-.5),e=this.kr.w-n-1):(t.translate(.5,-.5),e=0),t.fillRect(e,0,n,this.kr.h),t.restore()}},t.prototype.Ur=function(t){if(null!==this.kr&&null!==this.B){t.save(),t.strokeStyle=this.lineColor();var e=this.B.marks();t.font=this.baseFont(),t.translate(-.5,-.5),t.fillStyle=this.lineColor();var n=this.rendererOptions(),i=this.B.options().borderVisible,r=this.Br?this.kr.w-n.offsetSize-n.borderSize-n.tickLength:n.borderSize+n.offsetSize,o=this.Br?r-n.paddingInner:r+n.tickLength+n.paddingInner,s=this.Br?"right":"left";if(i){t.beginPath();for(var a=0,u=e;a<u.length;a++){var l=u[a];t.rect(r,l.coord,n.tickLength,1)}t.fill()}t.fillStyle=this.textColor();for(var h=0,c=e;h<c.length;h++)this.Cr.paintTo(t,(l=c[h]).label,o,l.coord,s);t.restore()}},t.prototype.Rr=function(){if(null!==this.kr&&null!==this.B){var t=this.kr.h/2,e=[],n=this.B.orderedSources().slice(),i=this.P.state(),r=this.rendererOptions();this.B===i.defaultPriceScale()&&this.P.state().orderedSources().forEach((function(t){i.isOverlay(t)&&n.push(t)}));var o=this.B.mainSource(),s=this.B;n.forEach((function(n){var r=n.priceAxisViews(i,s);r.forEach((function(t){t.setFixedCoordinate(null),t.isVisible()&&e.push(t)})),o===n&&r.length>0&&(t=r[0].floatCoordinate())}));var a=e.filter((function(e){return e.floatCoordinate()<=t})),u=e.filter((function(e){return e.floatCoordinate()>t}));if(a.sort((function(t,e){return e.floatCoordinate()-t.floatCoordinate()})),a.length&&u.length&&u.push(a[0]),u.sort((function(t,e){return t.floatCoordinate()-e.floatCoordinate()})),e.forEach((function(t){return t.setFixedCoordinate(t.coordinate())})),this.B.options().alignLabels){for(var l=1;l<a.length;l++){var h=a[l],c=(f=a[l-1]).height(r,!1);h.coordinate()>(p=f.getFixedCoordinate())-c&&h.setFixedCoordinate(p-c)}for(var d=1;d<u.length;d++){var f,p;h=u[d],c=(f=u[d-1]).height(r,!0),h.coordinate()<(p=f.getFixedCoordinate())+c&&h.setFixedCoordinate(p+c)}}}},t.prototype.jr=function(t){var e=this;if(null!==this.kr){var n=this.kr,i=this.Wr(),r=this.rendererOptions(),o=this.Br?"right":"left";i.forEach((function(i){if(i.isAxisLabelVisible()){var s=i.renderer();t.save(),s.draw(t,r,e.Dr,n.w,o),t.restore()}}))}},t.prototype.Hr=function(t){var e=this;if(null!==this.kr&&null!==this.B){var n=this.kr,i=this.P.chart().model(),r=[],o=this.P.state(),s=i.crosshairSource().priceAxisViews(o,this.B);s.length&&r.push(s);var a=this.rendererOptions(),u=this.Br?"right":"left";r.forEach((function(i){i.forEach((function(i){t.save(),i.renderer().draw(t,a,e.Dr,n.w,u),t.restore()}))}))}},t.prototype.Yr=function(t){this.cr.style.cursor=1===t?"ns-resize":"default"},t.prototype.cn=function(){var t=this,e=this.optimalWidth();if(this.Er<e){var n=this.P.chart();null===this.Nr&&(this.Nr=setTimeout((function(){n&&n.model().fullUpdate(),t.Nr=null}),100))}this.Er=e},t.prototype.Ar=function(t){this.Cr.destroy(),this.Cr=new dd(t.fontSize,t.color,t.fontFamily)},t}(),yd=nd,gd=function(){function t(t,e){var n=this;this.kr=new Uc(0,0),this.Kr=null,this.$r=null,this._r=!1,this.Xr="none",this.Zr=new Nl,this.Jr=0,this.Gr=!1,this.Qr=null,this.tu=!1,this.iu=null,this.Tr=function(){return n.nu&&n.V().lightUpdate()},this.Lr=function(){return n.nu&&n.V().lightUpdate()},this.su=t,this.nu=e,this.nu.onDestroyed().subscribe(this.hu.bind(this),this,!0),this.ru=document.createElement("td"),this.ru.style.padding="0",this.ru.style.position="relative";var i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.uu=document.createElement("td"),this.uu.style.padding="0",this.eu=document.createElement("td"),this.eu.style.padding="0",this.ru.appendChild(i),this.zr=Qc(i,new Uc(16,16)),this.zr.subscribeCanvasConfigured(this.Tr);var r=this.zr.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Fr=Qc(i,new Uc(16,16)),this.Fr.subscribeCanvasConfigured(this.Lr);var o=this.Fr.canvas;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0",this.ar=document.createElement("tr"),this.ar.appendChild(this.uu),this.ar.appendChild(this.ru),this.ar.appendChild(this.eu),this.ou(),t.model().mainPriceScaleOptionsChanged().subscribe(this.fu.bind(this),this),this.updatePriceAxisWidget();var s=this.chart().options().handleScroll;this.dr=new id(this.Fr.canvas,this,{treatVertTouchDragAsPageScroll:!s.vertTouchDrag,treatHorzTouchDragAsPageScroll:!s.horzTouchDrag})}return t.prototype.destroy=function(){null!==this.Kr&&this.Kr.destroy(),this.Fr.unsubscribeCanvasConfigured(this.Lr),this.Fr.destroy(),this.zr.unsubscribeCanvasConfigured(this.Tr),this.zr.destroy(),null!==this.nu&&this.nu.onDestroyed().unsubscribeAll(this),this.dr.destroy()},t.prototype.state=function(){return Xu(this.nu)},t.prototype.stateOrNull=function(){return this.nu},t.prototype.setState=function(e){null!==this.nu&&this.nu.onDestroyed().unsubscribeAll(this),this.nu=e,null!==this.nu&&this.nu.onDestroyed().subscribe(t.prototype.hu.bind(this),this,!0),this.updatePriceAxisWidget()},t.prototype.chart=function(){return this.su},t.prototype.getElement=function(){return this.ar},t.prototype.updatePriceAxisWidget=function(){if(null!==this.nu&&null!==this.Kr&&0!==this.V().serieses().length){var t=this.nu.defaultPriceScale();this.Kr.setPriceScale(Xu(t))}},t.prototype.stretchFactor=function(){return null!==this.nu?this.nu.stretchFactor():0},t.prototype.setStretchFactor=function(t){this.nu&&this.nu.setStretchFactor(t)},t.prototype.mouseEnterEvent=function(t){this.nu&&(Jc||this.au(t.localX,t.localY))},t.prototype.mouseDownEvent=function(t){if(this.Gr=!1,this.tu=null!==this.Qr,this.nu){if(document.activeElement!==document.body&&document.activeElement!==document.documentElement)Xu(document.activeElement).blur();else{var e=document.getSelection();null!==e&&e.removeAllRanges()}var n=this.V();if(!this.nu.defaultPriceScale().isEmpty()&&!n.timeScale().isEmpty()){if(null!==this.Qr){var i=n.crosshairSource();this.iu={x:i.appliedX(),y:i.appliedY()},this.Qr={x:t.localX,y:t.localY}}Jc||this.au(t.localX,t.localY)}}},t.prototype.mouseMoveEvent=function(t){if(this.nu){var e=t.localX,n=t.localY;if(this.cu()&&this.lu(),!Jc){this.au(e,n);var i=this.hitTest(e,n);this.V().setHoveredSource(i&&{source:i.source,object:i.object}),null!==i&&void 0!==i.view.moveHandler&&i.view.moveHandler(e,n)}}},t.prototype.mouseClickEvent=function(t){if(null!==this.nu){var e=t.localX,n=t.localY,i=this.hitTest(e,n);if(null!==i&&void 0!==i.view.clickHandler&&i.view.clickHandler(e,n),this.Zr.hasListeners()){var r=this.V().crosshairSource().appliedIndex();this.Zr.fire(r,{x:e,y:n})}this.vu()}},t.prototype.pressedMouseMoveEvent=function(t){if(null!==this.nu){var e=this.V(),n=t.localX,i=t.localY;if(null!==this.Qr){this.tu=!1;var r=Xu(this.iu);this.au(r.x+(n-this.Qr.x),r.y+(i-this.Qr.y))}else this.cu()||this.au(n,i);if(!e.timeScale().isEmpty()){var o=this.su.options().handleScroll;if(o.pressedMouseMove&&"touch"!==t.type||(o.horzTouchDrag||o.vertTouchDrag)&&"mouse"!==t.type){var s=this.nu.defaultPriceScale();null!==this.$r||this.du()||(this.$r={x:t.clientX,y:t.clientY}),null===this.$r||this.$r.x===t.clientX&&this.$r.y===t.clientY||this._r||(s.isEmpty()||e.startScrollPrice(this.nu,s,t.localY),e.startScrollTime(t.localX),this._r=!0),this._r&&(s.isEmpty()||e.scrollPriceTo(this.nu,s,t.localY),e.scrollTimeTo(t.localX))}}}},t.prototype.mouseUpEvent=function(t){if(null!==this.nu){this.Gr=!1;var e=this.V();if(this._r){var n=this.nu.defaultPriceScale();e.endScrollPrice(this.nu,n),e.endScrollTime(),this.$r=null,this._r=!1}}},t.prototype.longTapEvent=function(t){if(this.Gr=!0,null===this.Qr&&yd){var e={x:t.localX,y:t.localY};this.wu(e,e)}},t.prototype.mouseLeaveEvent=function(t){null!==this.nu&&(this.nu.model().setHoveredSource(null),nd||this.lu())},t.prototype.clicked=function(){return this.Zr},t.prototype.pinchStartEvent=function(){this.Jr=1},t.prototype.pinchEvent=function(t,e){if(this.su.options().handleScale.pinch){var n=5*(e-this.Jr);this.Jr=e,this.V().zoomTime(t.x,n)}},t.prototype.hitTest=function(t,e){var n=this.nu;if(null===n)return null;for(var i=0,r=n.orderedSources();i<r.length;i++){var o=r[i],s=this.bu(o.paneViews(n),t,e);if(null!==s)return{source:o,view:s.view,object:s.object}}return null},t.prototype.setPriceAxisSize=function(t){Xu(this.Kr).setSize(new Uc(t,this.kr.h))},t.prototype.getSize=function(){return this.kr},t.prototype.setSize=function(t){if(t.w<0||t.h<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.kr.equals(t)||(this.kr=t,this.zr.resizeCanvas({width:t.w,height:t.h}),this.Fr.resizeCanvas({width:t.w,height:t.h}),this.ru.style.width=t.w+"px",this.ru.style.height=t.h+"px")},t.prototype.recalculatePriceScale=function(){var t=Xu(this.nu);t.recalculatePriceScale(t.defaultPriceScale());for(var e=0,n=t.dataSources();e<n.length;e++){var i=n[e];if(t.isOverlay(i)){var r=i.priceScale();null!==r&&t.recalculatePriceScale(r),i.updateAllViews()}}},t.prototype.getImage=function(){return this.zr.canvas},t.prototype.paint=function(t){if(0!==t&&null!==this.nu){if(t>1&&this.recalculatePriceScale(),null!==this.Kr&&this.Kr.paint(t),1!==t){var e=qc(this.zr);this.qr(e,this.mu()),this.nu&&(this.Mu(e),this.pu(e),this.gu(e))}var n=qc(this.Fr);n.clearRect(-.5,-.5,this.kr.w,this.kr.h),this.yu(n)}},t.prototype.priceAxisWidget=function(){return this.Kr},t.prototype.mu=function(){return this.su.options().layout.backgroundColor},t.prototype.hu=function(){null!==this.nu&&this.nu.onDestroyed().unsubscribeAll(this),this.nu=null},t.prototype.qr=function(t,e){Zc(t,0,0,this.kr.w,this.kr.h,e)},t.prototype.Mu=function(t){for(var e=Xu(this.nu),n=this.V().gridSource().paneViews(e),i=e.height(),r=e.width(),o=0,s=n;o<s.length;o++){var a=s[o];t.save();var u=a.renderer(i,r);null!==u&&u.draw(t,!1),t.restore()}},t.prototype.pu=function(t){var e=this.V().watermarkSource();if(null!==e){var n=Xu(this.nu);if(n.containsSeries())for(var i=e.paneViews(),r=n.height(),o=n.width(),s=0,a=i;s<a.length;s++){var u=a[s];t.save();var l=u.renderer(r,o);null!==l&&l.draw(t,!1),t.restore()}}},t.prototype.yu=function(t){this.ku(this.V().crosshairSource(),t)},t.prototype.gu=function(t){for(var e=Xu(this.nu).orderedSources(),n=this.V().crosshairSource(),i=0,r=e;i<r.length;i++){var o=r[i];this.Nu(o,t)}for(var s=0,a=e;s<a.length;s++)(o=a[s])!==n&&this.ku(o,t)},t.prototype.ku=function(t,e){for(var n=Xu(this.nu),i=t.paneViews(n),r=n.height(),o=n.width(),s=n.model().hoveredSource(),a=null!==s&&s.source===t,u=null!==s&&a&&void 0!==s.object?s.object.hitTestData:void 0,l=0,h=i;l<h.length;l++){var c=h[l].renderer(r,o);null!==c&&(e.save(),c.draw(e,a,u),e.restore())}},t.prototype.Nu=function(t,e){for(var n=Xu(this.nu),i=t.paneViews(n),r=n.height(),o=n.width(),s=n.model().hoveredSource(),a=null!==s&&s.source===t,u=null!==s&&a&&void 0!==s.object?s.object.hitTestData:void 0,l=0,h=i;l<h.length;l++){var c=h[l].renderer(r,o);null!==c&&void 0!==c.drawBackground&&(e.save(),c.drawBackground(e,a,u),e.restore())}},t.prototype.bu=function(t,e,n){for(var i=0,r=t;i<r.length;i++){var o=r[i],s=o.renderer(this.kr.h,this.kr.w);if(null!==s&&s.hitTest){var a=s.hitTest(e,n);if(null!==a)return{view:o,object:a}}}return null},t.prototype.fu=function(){this.ou(),this.su.adjustSize()},t.prototype.ou=function(){if(null!==this.nu){var t=this.su,e=this.nu.defaultPriceScale().options().position;if(this.Xr!==e){if(null!==this.Kr&&(this.Kr.isLeft()?this.uu.removeChild(this.Kr.getElement()):this.eu.removeChild(this.Kr.getElement()),this.Kr.destroy(),this.Kr=null),"none"!==e){var n=t.model().rendererOptionsProvider();this.Kr=new vd(this,t.options().layout,n,e),"left"===e&&this.uu.appendChild(this.Kr.getElement()),"right"===e&&this.eu.appendChild(this.Kr.getElement())}this.Xr=e}}},t.prototype.cu=function(){return yd&&null===this.Qr},t.prototype.du=function(){return yd&&this.Gr||null!==this.Qr},t.prototype.Su=function(t){return Math.max(0,Math.min(t,this.kr.w-1))},t.prototype.xu=function(t){return Math.max(0,Math.min(t,this.kr.h-1))},t.prototype.au=function(t,e){this.V().setAndSaveCurrentPosition(this.Su(t),this.xu(e),Xu(this.nu))},t.prototype.lu=function(){this.V().clearCurrentPosition()},t.prototype.vu=function(){this.tu&&(this.Qr=null,this.lu())},t.prototype.wu=function(t,e){this.Qr=t,this.tu=!1,this.au(e.x,e.y);var n=this.V().crosshairSource();this.iu={x:n.appliedX(),y:n.appliedY()}},t.prototype.V=function(){return this.su.model()},t}(),md=function(){function t(t,e,n,i){var r=this;this.o=!0,this.kr=new Uc(0,0),this.Tr=function(){return r.paint(3)},this.Br="left"===t,this.ah=n.rendererOptionsProvider,this.$=e,this.Du=i,this.cr=document.createElement("div"),this.cr.style.width="25px",this.cr.style.height="100%",this.cr.style.overflow="hidden",this.zr=Qc(this.cr,new Uc(16,16)),this.zr.subscribeCanvasConfigured(this.Tr)}return t.prototype.destroy=function(){this.zr.unsubscribeCanvasConfigured(this.Tr),this.zr.destroy()},t.prototype.update=function(){this.o=!0},t.prototype.getElement=function(){return this.cr},t.prototype.getSize=function(){return this.kr},t.prototype.setSize=function(t){if(t.w<0||t.h<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.kr.equals(t)||(this.kr=t,this.zr.resizeCanvas({width:t.w,height:t.h}),this.cr.style.width=t.w+"px",this.cr.style.minWidth=t.w+"px",this.cr.style.height=t.h+"px",this.o=!0)},t.prototype.paint=function(t){if((!(t<3)||this.o)&&0!==this.kr.w&&0!==this.kr.h){this.o=!1;var e=qc(this.zr);this.qr(e),this.Lt(e)}},t.prototype.getImage=function(){return this.zr.canvas},t.prototype.isLeft=function(){return this.Br},t.prototype.Lt=function(t){if(this.Du()){var e=this.kr.w;t.save(),t.fillStyle=this.$.timeScale.borderColor;var n,i=this.ah.options().borderSize;this.Br?(t.translate(-.5,-.5),n=e-i-1):(t.translate(-.5,-.5),n=0),t.fillRect(n,0,2*i,1),t.restore()}},t.prototype.qr=function(t){Zc(t,0,0,this.kr.w,this.kr.h,this.$.layout.backgroundColor)},t}();function bd(t,e){return t.span>e.span?t:e}!function(t){t[t.BorderSize=1]="BorderSize",t[t.TickLength=3]="TickLength"}(fd||(fd={})),function(t){t[t.Default=0]="Default",t[t.EwResize=1]="EwResize"}(pd||(pd={}));var _d,wd=function(){function t(t){var e=this;this.Cu=null,this.Eu=70,this.Ht=null,this.Tu=!1,this.kr=new Uc(0,0),this.Xr="none",this.Tr=function(){return e.su.model().lightUpdate()},this.Lr=function(){return e.su.model().lightUpdate()},this.su=t,this.$=t.options().layout,this.Au=document.createElement("tr"),this.Lu=document.createElement("td"),this.Lu.style.padding="0",this.Bu=document.createElement("td"),this.Bu.style.padding="0",this.cr=document.createElement("td"),this.cr.style.height="25px",this.cr.style.padding="0",this.zu=document.createElement("div"),this.zu.style.width="100%",this.zu.style.height="100%",this.zu.style.position="relative",this.zu.style.overflow="hidden",this.cr.appendChild(this.zu),this.zr=Qc(this.zu,new Uc(16,16)),this.zr.subscribeCanvasConfigured(this.Tr);var n=this.zr.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Fr=Qc(this.zu,new Uc(16,16)),this.Fr.subscribeCanvasConfigured(this.Lr);var i=this.Fr.canvas;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Au.appendChild(this.Lu),this.Au.appendChild(this.cr),this.Au.appendChild(this.Bu),this.Fu(),this.su.model().mainPriceScaleOptionsChanged().subscribe(this.Fu.bind(this),this),this.dr=new id(this.Fr.canvas,this,{treatVertTouchDragAsPageScroll:!0,treatHorzTouchDragAsPageScroll:!1})}return t.prototype.destroy=function(){this.dr.destroy(),null!==this.Cu&&this.Cu.destroy(),this.Fr.unsubscribeCanvasConfigured(this.Lr),this.Fr.destroy(),this.zr.unsubscribeCanvasConfigured(this.Tr),this.zr.destroy()},t.prototype.getElement=function(){return this.Au},t.prototype.stub=function(){return this.Cu},t.prototype.mouseDownEvent=function(t){if(!this.Tu){this.Tu=!0;var e=this.su.model();!e.timeScale().isEmpty()&&this.su.options().handleScale.axisPressedMouseMove&&e.startScaleTime(t.localX)}},t.prototype.mouseDownOutsideEvent=function(){var t=this.su.model();!t.timeScale().isEmpty()&&this.Tu&&(this.Tu=!1,this.su.options().handleScale.axisPressedMouseMove&&t.endScaleTime())},t.prototype.pressedMouseMoveEvent=function(t){var e=this.su.model();!e.timeScale().isEmpty()&&this.su.options().handleScale.axisPressedMouseMove&&e.scaleTimeTo(t.localX)},t.prototype.mouseUpEvent=function(t){this.Tu=!1;var e=this.su.model();e.timeScale().isEmpty()&&!this.su.options().handleScale.axisPressedMouseMove||e.endScaleTime()},t.prototype.mouseDoubleClickEvent=function(){this.su.options().handleScale.axisDoubleClickReset&&this.su.model().resetTimeScale()},t.prototype.mouseEnterEvent=function(t){this.su.model().options().handleScale.axisPressedMouseMove&&this.Yr(1)},t.prototype.mouseLeaveEvent=function(t){this.Yr(0)},t.prototype.getSize=function(){return this.kr},t.prototype.setSizes=function(t,e){this.kr&&this.kr.equals(t)||(this.kr=t,this.zr.resizeCanvas({width:t.w,height:t.h}),this.Fr.resizeCanvas({width:t.w,height:t.h}),this.cr.style.width=t.w+"px",this.cr.style.height=t.h+"px"),null!==this.Cu&&this.Cu.setSize(new Uc(e,t.h))},t.prototype.width=function(){return this.kr.w},t.prototype.height=function(){return this.kr.h},t.prototype.optimalHeight=function(){var t=this.Vu();return Math.ceil(t.borderSize+t.tickLength+t.fontSize+t.paddingTop+t.paddingBottom)},t.prototype.update=function(){var t=this,e=this.su.model().timeScale().marks();e&&(this.Eu=70,e.forEach((function(e){t.Eu=Math.min(e.span,t.Eu)})))},t.prototype.getImage=function(){return this.zr.canvas},t.prototype.paint=function(t){if(0!==t){if(1!==t){var e=qc(this.zr);this.qr(e),this.Lt(e),this.Ur(e),this.jr(e),null!==this.Cu&&this.Cu.paint(t)}var n=qc(this.Fr);this.Hr(n)}},t.prototype.qr=function(t){Zc(t,0,0,this.kr.w,this.kr.h,this.mu())},t.prototype.Lt=function(t){this.su.options().timeScale.borderVisible&&(t.save(),t.fillStyle=this.Iu(),t.translate(-.5,-.5),t.fillRect(0,0,this.kr.w,1),t.restore())},t.prototype.Ur=function(t){var e=this.su.model().timeScale().marks();if(e&&0!==e.length){var n=e.reduce(bd,e[0]).span;n>30&&n<40&&(n=30),t.save(),t.strokeStyle=this.Iu();var i=this.Vu(),r=i.borderSize+i.tickLength+i.paddingTop+i.fontSize-i.baselineOffset;if(t.textAlign="center",t.translate(.5,-.5),t.fillStyle=this.Iu(),this.su.model().timeScale().options().borderVisible){t.beginPath();for(var o=e.length;o--;)t.rect(e[o].coord,1,1,i.tickLength);t.fill()}t.fillStyle=this.In(),t.font=this.Pu();for(var s=0,a=e;s<a.length;s++)(h=a[s]).span<n&&t.fillText(h.label,h.coord,r);t.font=this.Ou();for(var u=0,l=e;u<l.length;u++){var h;(h=l[u]).span>=n&&t.fillText(h.label,h.coord,r)}t.restore()}},t.prototype.jr=function(t){t.save();var e=new Set,n=this.su.model(),i=n.dataSources();e.add(n.crosshairSource());for(var r=this.Vu(),o=0,s=i;o<s.length;o++){var a=s[o];if(!e.has(a))for(var u=0,l=a.timeAxisViews();u<l.length;u++)l[u].renderer().draw(t,r)}t.restore()},t.prototype.Hr=function(t){t.clearRect(-.5,-.5,this.kr.w,this.kr.h);var e=[],n=this.su.model().crosshairSource().timeAxisViews();e.push(n);var i=this.Vu();e.forEach((function(e){e.forEach((function(e){t.save(),e.renderer().draw(t,i),t.restore()}))}))},t.prototype.mu=function(){return this.$.backgroundColor},t.prototype.Iu=function(){return this.su.options().timeScale.borderColor},t.prototype.In=function(){return this.$.textColor},t.prototype.Zt=function(){return this.$.fontSize},t.prototype.Pu=function(){return hc(this.Zt(),this.$.fontFamily)},t.prototype.Ou=function(){return hc(this.Zt(),this.$.fontFamily,"bold")},t.prototype.Vu=function(){null===this.Ht&&(this.Ht={borderSize:1,baselineOffset:NaN,paddingTop:NaN,paddingBottom:NaN,paddingHorizontal:NaN,tickLength:3,fontSize:NaN,font:"",widthCache:new wh});var t=this.Ht,e=this.Pu();if(t.font!==e){var n=this.Zt();t.fontSize=n,t.font=e,t.paddingTop=Math.ceil(n/2.5),t.paddingBottom=t.paddingTop,t.paddingHorizontal=Math.ceil(n/2),t.baselineOffset=Math.round(this.Zt()/5),t.widthCache.reset()}return this.Ht},t.prototype.Yr=function(t){this.cr.style.cursor=1===t?"ew-resize":"default"},t.prototype.Fu=function(){var t=this.su.model().mainPriceScale().options().position;if(t!==this.Xr){if(null!==this.Cu&&(this.Cu.isLeft()?this.Lu.removeChild(this.Cu.getElement()):this.Bu.removeChild(this.Cu.getElement()),this.Cu.destroy(),this.Cu=null),"none"!==t){var e={rendererOptionsProvider:this.su.model().rendererOptionsProvider()},n=this.su.model();this.Cu=new md(t,this.su.options(),e,(function(){return n.mainPriceScale().options().borderVisible&&n.timeScale().options().borderVisible})),("left"===t?this.Lu:this.Bu).appendChild(this.Cu.getElement())}this.Xr=t}},t}(),kd=function(){function t(t,e){var n=this;this.Wu=[],this.Ru=[],this.qu=0,this.Uu=new Nl,this.nn=0,this.Kt=0,this.ju=0,this.Hu=null,this.Yu=!1,this.Zr=new Nl,this.oh=new Nl,this.$=e,this.Au=document.createElement("div"),this.Au.classList.add("tv-lightweight-charts"),this.Au.style.overflow="hidden",this.Au.style.width="100%",this.Au.style.height="100%",this.Ku=document.createElement("table"),this.Ku.setAttribute("cellspacing","0"),this.Au.appendChild(this.Ku),this.$u=this._u.bind(this),this.Au.addEventListener("wheel",this.$u,{passive:!1}),this.V=new jc(this.fh.bind(this),this.$),this.model().crosshairMoved().subscribe(this.Xu.bind(this),this),this.Zu=new wd(this),this.Ku.appendChild(this.Zu.getElement());var i=this.$.width,r=this.$.height;if(0===i&&0===r){var o=t.getBoundingClientRect();i=o.width,r=o.height}i=Math.max(70,i),r=Math.max(50,r),this.resize(r,i),this.Ju(),t.appendChild(this.Au),this.Gu(),this.V.timeScale().optionsApplied().subscribe((function(){n.Gu(),n.adjustSize()}),this)}return t.prototype.model=function(){return this.V},t.prototype.options=function(){return this.$},t.prototype.paneWidgets=function(){return this.Wu},t.prototype.destroy=function(){this.Au.removeEventListener("wheel",this.$u),0!==this.qu&&window.cancelAnimationFrame(this.qu),this.V.crosshairMoved().unsubscribeAll(this),this.V.timeScale().optionsApplied().unsubscribeAll(this),this.V.destroy();for(var t=0,e=this.Wu;t<e.length;t++){var n=e[t];this.Ku.removeChild(n.getElement()),n.clicked().unsubscribeAll(this),n.destroy()}this.Wu=[];for(var i=0,r=this.Ru;i<r.length;i++)this.Qu(r[i]);this.Ru=[],Xu(this.Zu).destroy(),null!==this.Au.parentElement&&this.Au.parentElement.removeChild(this.Au),this.oh.destroy(),this.Zr.destroy(),delete this.Au},t.prototype.resize=function(t,e,n){if(void 0===n&&(n=!1),this.nn!==t||this.Kt!==e){this.nn=t,this.Kt=e;var i=t+"px",r=e+"px";Xu(this.Au).style.height=i,Xu(this.Au).style.width=r,this.Ku.style.height=i,this.Ku.style.width=r,n?this.te(new yc(3)):this.V.fullUpdate()}},t.prototype.paint=function(t){void 0===t&&(t=new yc(3));for(var e=0;e<this.Wu.length;e++)this.Wu[e].paint(t.invalidateForPane(e).level);this.Zu.paint(t.fullInvalidation())},t.prototype.adjustSize=function(){this.ie(),this.V.fullUpdate()},t.prototype.applyOptions=function(t){this.V.applyOptions(t),this.Gu(),this.resize(t.height||this.nn,t.width||this.Kt)},t.prototype.clicked=function(){return this.Zr},t.prototype.crosshairMoved=function(){return this.oh},t.prototype.takeScreenshot=function(){var t=this;null!==this.Hu&&(this.te(this.Hu),this.Hu=null);var e=this.Wu[0],n=Yc(document,new Uc(this.Kt,this.nn)),i=$c(n),r=0,o=0,s=function(){for(var e=0;e<t.Wu.length;e++){var n=t.Wu[e],s=n.getSize().h,a=Xu(n.priceAxisWidget()),u=a.getImage();i.drawImage(u,r,o,a.getWidth(),s),o+=s,e<t.Wu.length-1&&(o+=ld)}};"left"===this.$.priceScale.position&&(s(),r=Xu(e.priceAxisWidget()).getWidth()),o=0;for(var a=0;a<this.Wu.length;a++){var u=this.Wu[a],l=u.getSize(),h=u.getImage();if(i.drawImage(h,r,o,l.w,l.h),o+=l.h,a<this.Wu.length-1){var c=this.Ru[a],d=c.getSize(),f=c.getImage();i.drawImage(f,r,o,d.w,d.h),o+=d.h}}r+=e.getSize().w,"right"===this.$.priceScale.position&&(o=0,s());var p=function(){var e=Xu(t.Zu.stub()),n=e.getSize(),s=e.getImage();i.drawImage(s,r,o,n.w,n.h)};if(this.$.timeScale.visible){r=0,"left"===this.$.priceScale.position&&(p(),r=Xu(e.priceAxisWidget()).getWidth());var v=this.Zu.getSize();h=this.Zu.getImage(),i.drawImage(h,r,o,v.w,v.h),"right"===this.$.priceScale.position&&(r=e.getSize().w,p(),i.restore())}return n},t.prototype.ie=function(){for(var t=0,e=0,n=0,i=this.Wu;n<i.length;n++){var r=i[n];"none"!==this.$.priceScale.position&&(e=Math.max(e,Xu(r.priceAxisWidget()).optimalWidth())),t+=r.stretchFactor()}for(var o=this.nn,s=Math.max(this.Kt-e,0),a=ld*this.Ru.length,u=this.$.timeScale.visible?this.Zu.optimalHeight():0,l=a+u,h=o<l?0:o-l,c=h/t,d=0,f=0;f<this.Wu.length;++f){var p,v;(r=this.Wu[f]).setState(this.V.panes()[f]),v=f===this.Wu.length-1?h-d:Math.round(r.stretchFactor()*c),d+=p=Math.max(v,2),r.setSize(new Uc(s,p)),"none"!==this.$.priceScale.position&&r.setPriceAxisSize(e),r.state()&&this.V.setPaneHeight(r.state(),p)}this.Zu.setSizes(new Uc(s,u),e),this.V.setWidth(s),this.ju!==e&&(this.ju=e,this.Uu.fire(e))},t.prototype._u=function(t){var e=t.deltaX/100,n=-t.deltaY/100;if(0!==e&&this.$.handleScroll.mouseWheel||0!==n&&this.$.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:e*=120,n*=120;break;case t.DOM_DELTA_LINE:e*=32,n*=32}if(0!==n&&this.$.handleScale.mouseWheel){var i=Math.sign(n)*Math.min(1,Math.abs(n)),r=t.clientX-this.Au.getBoundingClientRect().left;this.model().zoomTime(r,i)}0!==e&&this.$.handleScroll.mouseWheel&&this.model().scrollChart(-80*e)}},t.prototype.te=function(t){var e=t.fullInvalidation();if(3===e&&this.ne(),3===e||2===e){for(var n=this.V.panes(),i=0;i<n.length;i++)t.invalidateForPane(i).autoScale&&n[i].momentaryAutoScale();t.getFitContent()&&this.V.timeScale().fitContent();var r=t.getTargetTimeRange();null!==r&&this.V.timeScale().setTimePointsRange(r),this.Zu.update()}this.paint(t)},t.prototype.fh=function(t){var e=this;null!==this.Hu?this.Hu.merge(t):this.Hu=t,this.Yu||(this.Yu=!0,this.qu=window.requestAnimationFrame((function(){e.Yu=!1,e.qu=0,null!==e.Hu&&(e.te(e.Hu),e.Hu=null)})))},t.prototype.ne=function(){this.Ju()},t.prototype.Qu=function(t){this.Ku.removeChild(t.getElement()),t.destroy()},t.prototype.Ju=function(){for(var t=this.V.panes(),e=t.length,n=this.Wu.length,i=e;i<n;i++){var r=Qu(this.Wu.pop());this.Ku.removeChild(r.getElement()),r.clicked().unsubscribeAll(this),r.destroy(),void 0!==(o=this.Ru.pop())&&this.Qu(o)}for(i=n;i<e;i++){if((r=new gd(this,t[i])).clicked().subscribe(this.se.bind(this),this),this.Wu.push(r),i>1){var o=new hd(this,i-1,i,!0);this.Ru.push(o),this.Ku.insertBefore(o.getElement(),this.Zu.getElement())}this.Ku.insertBefore(r.getElement(),this.Zu.getElement())}for(i=0;i<e;i++){var s=t[i];(r=this.Wu[i]).state()!==s?r.setState(s):r.updatePriceAxisWidget()}this.Gu(),this.ie()},t.prototype.he=function(t,e){var n,i=new Map;if(null!==t&&this.V.serieses().forEach((function(e){var n=e.dataAt(t);null!==n&&i.set(e,n)})),null!==t){var r=this.V.timeScale().indexToUserTime(t);null!==r&&(n=r)}var o=this.model().hoveredSource();return{time:n,point:e||void 0,hoveredSeries:null!==o&&o.source instanceof ec?o.source:void 0,seriesPrices:i,hoveredObject:null!==o&&void 0!==o.object?o.object.externalId:void 0}},t.prototype.se=function(t,e){var n=this;this.Zr.fire((function(){return n.he(t,e)}))},t.prototype.Xu=function(t,e){var n=this;this.oh.fire((function(){return n.he(t,e)}))},t.prototype.Gu=function(){var t=this.$.timeScale.visible?"":"none";this.Zu.getElement().style.display=t},t}();function Cd(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}function Sd(t){if(!sc(t))throw new Error("time must be of type BusinessDay");var e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{timestamp:Math.round(e.getTime()/1e3),businessDay:t}}function xd(t){if(!ac(t))throw new Error("time must be of type isUTCTimestamp");return{timestamp:t}}function Ed(t){return 0===t.length?null:sc(t[0].time)?Sd:xd}function Td(t){return ac(t)?xd(t):sc(t)?Sd(t):Sd(Ld(t))}function Md(t,e){var n=t.value,i=null;return"color"in t&&void 0!==t.color&&(i=e.addColor(t.color)),[n,n,n,n,i]}function Ad(t,e){return[t.open,t.high,t.low,t.close,null]}!function(t){t[t.LastPriceAndPercentageValue=0]="LastPriceAndPercentageValue",t[t.LastValueAccordingToScale=1]="LastValueAccordingToScale"}(_d||(_d={}));var Pd={Candlestick:Ad,Bar:Ad,Area:Md,Histogram:Md,Line:Md};function Vd(t){return Pd[t]}function Id(t){return 60*t*60*1e3}function Dd(t){return 60*t*1e3}var Rd=[{divisor:1,span:20},{divisor:1e3,span:19},{divisor:Dd(1),span:20},{divisor:Dd(5),span:21},{divisor:Dd(30),span:22},{divisor:Id(1),span:30},{divisor:Id(3),span:31},{divisor:Id(6),span:32},{divisor:Id(12),span:33}];function Od(t,e){if(null!==e){var n=new Date(1e3*e.timestamp),i=new Date(1e3*t.timestamp);if(i.getUTCFullYear()!==n.getUTCFullYear())return 70;if(i.getUTCMonth()!==n.getUTCMonth())return 60;if(i.getUTCDate()!==n.getUTCDate())return 50;for(var r=Rd.length-1;r>=0;--r)if(Math.floor(n.getTime()/Rd[r].divisor)!==Math.floor(i.getTime()/Rd[r].divisor))return Rd[r].span}return 20}function Nd(t,e){return t.timestamp<e.timestamp}function Ld(t){var e=new Date(t);if(isNaN(e.getTime()))throw new Error("Invalid date string="+t+", expected format=yyyy-mm-dd");return console.log(e),console.log(e.getTime()),{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear(),hour:e.getHours(),minute:e.getMinutes()}}function zd(t){nl(t.time)&&(t.time=Ld(t.time))}var Fd,Bd=function(){function t(){this.ue=new Map,this.ee=new Map,this.oe=[]}return t.prototype.destroy=function(){this.ue.clear(),this.ee.clear(),this.oe=[]},t.prototype.setSeriesData=function(t,e){var n=this;t.clearData(),function(t){t.forEach(zd)}(e),this.ue.forEach((function(e){return e.mapping.delete(t)}));var i=Ed(e);null!==i&&e.forEach((function(e){var r=i(e.time),o=n.ue.get(r.timestamp)||{index:0,mapping:new Map,timePoint:r};o.mapping.set(t,e),n.ue.set(r.timestamp,o)}));var r=new Map;return this.ue.forEach((function(t,e){t.mapping.size>0&&r.set(e,t)})),this.fe(r)},t.prototype.removeSeries=function(t){return this.setSeriesData(t,[])},t.prototype.updateSeriesData=function(t,e){zd(e);var n=t.data().bars();if(n.size()>0)if(void 0!==Xu(n.last()).time.businessDay){if(!sc(e.time))throw new Error("time must be of type BusinessDay")}else if(!ac(e.time))throw new Error("time must be of type isUTCTimestamp");var i=Xu(Ed([e]))(e.time),r=this.ue.get(i.timestamp)||{index:0,mapping:new Map,timePoint:i},o=0===r.mapping.size;r.mapping.set(t,e);var s=!1;if(o){var a=this.ue.size;this.oe.length>0&&this.oe[this.oe.length-1].timestamp>i.timestamp?(a=nh(this.oe,i,Nd),this.oe.splice(a,0,i),this.ae(a),s=!0):this.oe.push(i),r.index=a,this.ee.set(r.index,i)}this.ue.set(i.timestamp,r);var u=new Map,l=function(e){var n=Qu(h.ee.get(e));Qu(h.ue.get(n.timestamp)).mapping.forEach((function(i,r){if(s||r===t){var o=Vd(r.seriesType()),a=u.get(r)||{update:[]},l={index:e,time:n,value:o(i,r.palette())};a.update.push(l),u.set(r,a)}}))},h=this;for(a=r.index;a<this.ue.size;++a)l(a);var c=o?this.ce(r.index):[],d=o?this.oe.slice(r.index):[];return{timeScaleUpdate:{seriesUpdates:u,changes:d,index:r.index,marks:c}}},t.prototype.fe=function(t){var e=this;this.ue=t,this.oe=Array.from(this.ue.values()).map((function(t){return t.timePoint})),this.oe.sort((function(t,e){return t.timestamp-e.timestamp}));var n=new Map;this.oe.forEach((function(t,i){var r=Qu(e.ue.get(t.timestamp));r.index=i,r.mapping.forEach((function(e,r){var o=Vd(r.seriesType()),s=n.get(r)||{update:[]},a={index:i,time:t,value:o(e,r.palette())};s.update.push(a),n.set(r,s)}))}));var i=null,r=this.oe.map((function(t,e){var n=Od(t,i);return i=t,{span:n,time:t,index:e}})),o={seriesUpdates:n,changes:this.oe.slice(),index:0,marks:r};return this.le(),{timeScaleUpdate:o}},t.prototype.ae=function(t){for(var e=this.ee.size-1;e>=t;--e){var n=Qu(this.ee.get(e)),i=e+1;Qu(this.ue.get(n.timestamp)).index=i,this.ee.delete(e),this.ee.set(i,n)}},t.prototype.le=function(){var t=this;this.ee.clear(),this.ue.forEach((function(e,n){t.ee.set(e.index,e.timePoint)}))},t.prototype.ce=function(t){for(var e=[],n=this.ee.get(t-1)||null,i=t;i<this.ee.size;++i){var r=Qu(this.ee.get(i)),o=Od(r,n);n=r,e.push({span:o,time:r,index:i})}return e},t}(),Hd={color:"#FF0000",price:0,lineStyle:1,lineWidth:1},jd=function(){function t(t){this.ii=t}return t.prototype.applyOptions=function(t){this.ii.applyOptions(t)},t.prototype.options=function(){return this.ii.options()},t.prototype.priceLine=function(){return this.ii},t}(),Ud=function(){function t(t,e){this._series=t,this._dataUpdatesConsumer=e}return t.prototype.destroy=function(){delete this._series,delete this._dataUpdatesConsumer},t.prototype.priceFormatter=function(){return this._series.formatter()},t.prototype.series=function(){return this._series},t.prototype.priceToCoordinate=function(t){var e=this._series.firstValue();return null===e?null:this._series.priceScale().priceToCoordinate(t,e.value)},t.prototype.coordinateToPrice=function(t){var e=this._series.firstValue();return null===e?null:this._series.priceScale().coordinateToPrice(t,e.value)},t.prototype.setData=function(t){this._dataUpdatesConsumer.applyNewData(this._series,t)},t.prototype.update=function(t){this._dataUpdatesConsumer.updateData(this._series,t)},t.prototype.setMarkers=function(t){var e=t.map((function(t){return Ku(Ku({},t),{time:Td(t.time)})}));this._series.setMarkers(e)},t.prototype.applyOptions=function(t){this._series.applyOptions(t)},t.prototype.options=function(){return rl(this._series.options())},t.prototype.createPriceLine=function(t){var e=Ju(rl(Hd),t),n=this._series.createPriceLine(e);return new jd(n)},t.prototype.removePriceLine=function(t){this._series.removePriceLine(t.priceLine())},t}(),Wd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zu(e,t),e.prototype.applyOptions=function(e){Cd(e),t.prototype.applyOptions.call(this,e)},e}(Ud),$d={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},qd={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Zd={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4},Kd={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4},Yd={color:"#26a69a",base:0,lineWidth:2},Qd={title:"",lastValueVisible:!0,priceLineVisible:!0,priceLineWidth:1,priceLineColor:"",priceLineStyle:1,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},Xd=function(){function t(t){this.l=t}return t.prototype.destroy=function(){delete this.l},t.prototype.applyOptions=function(t){this.l.applyOptions({priceScale:t})},t.prototype.options=function(){return this.B().options()},t.prototype.B=function(){return this.l.mainPriceScale()},t}();!function(t){t[t.AnimationDurationMs=1e3]="AnimationDurationMs"}(Fd||(Fd={}));var Gd=function(){function t(t){this.V=t}return t.prototype.destroy=function(){delete this.V},t.prototype.scrollPosition=function(){return this.$n().rightOffset()},t.prototype.scrollToPosition=function(t,e){e?this.$n().scrollToOffsetAnimated(t,1e3):this.$n().setRightOffset(t)},t.prototype.scrollToRealTime=function(){this.$n().scrollToRealTime()},t.prototype.getVisibleRange=function(){var t=this.$n().visibleBars();if(null===t)return null;var e=this.V.timeScale().points(),n=Xu(e.firstIndex()),i=Xu(e.lastIndex());return{from:Jd(Xu(e.valueAt(Math.max(n,t.firstBar())))),to:Jd(Xu(e.valueAt(Math.min(i,t.lastBar()))))}},t.prototype.setVisibleRange=function(t){var e={from:Td(t.from),to:Td(t.to)};this.V.setTargetTimeRange(e)},t.prototype.resetTimeScale=function(){this.V.resetTimeScale()},t.prototype.fitContent=function(){this.V.fitContent()},t.prototype.applyOptions=function(t){this.$n().applyOptions(t)},t.prototype.options=function(){return rl(this.$n().options())},t.prototype.$n=function(){return this.V.timeScale()},t}();function Jd(t){return t.businessDay||t.timestamp}function tf(t){void 0!==t&&"custom"!==t.type&&void 0!==t.minMove&&void 0===t.precision&&(t.precision=function(t){if(t>=1)return 0;for(var e=0;e<8;e++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return e;t*=10}return e}(t.minMove))}var ef=function(){function t(t,e){var n=this;this.ve=new Bd,this.de=new Nl,this.we=new Map,this.be=new Map,this.me=new Nl,this.Me=new Nl,this.ur=new kd(t,e),this.ur.model().timeScale().visibleBarsChanged().subscribe(this.pe.bind(this)),this.ur.clicked().subscribe((function(t){n.me.hasListeners()&&n.me.fire(n.ge(t()))}),this),this.ur.crosshairMoved().subscribe((function(t){n.Me.hasListeners()&&n.Me.fire(n.ge(t()))}),this);var i=this.ur.model();this.ye=new Xd(i),this.ke=new Gd(i)}return t.prototype.remove=function(){this.ur.model().timeScale().visibleBarsChanged().unsubscribeAll(this),this.ur.clicked().unsubscribeAll(this),this.ur.crosshairMoved().unsubscribeAll(this),this.ye.destroy(),this.ke.destroy(),this.ur.destroy(),delete this.ur,this.we.forEach((function(t,e){e.destroy()})),this.we.clear(),this.be.clear(),this.de.destroy(),this.me.destroy(),this.Me.destroy(),this.ve.destroy(),delete this.ve},t.prototype.resize=function(t,e,n){this.ur.resize(t,e,n)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),tf(t.priceFormat);var e=Ju(rl(Qd),Kd,t),n=this.ur.model().createSeries("Area",e),i=new Ud(n,this);return this.we.set(i,n),this.be.set(n,i),i},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),tf(t.priceFormat);var e=Ju(rl(Qd),qd,t),n=this.ur.model().createSeries("Bar",e),i=new Ud(n,this);return this.we.set(i,n),this.be.set(n,i),i},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),Cd(t),tf(t.priceFormat);var e=Ju(rl(Qd),$d,t),n=this.ur.model().createSeries("Candlestick",e),i=new Wd(n,this);return this.we.set(i,n),this.be.set(n,i),i},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),tf(t.priceFormat);var e=Ju(rl(Qd),Yd,t),n=this.ur.model().createSeries("Histogram",e),i=new Ud(n,this);return this.we.set(i,n),this.be.set(n,i),i},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),tf(t.priceFormat);var e=Ju(rl(Qd),Zd,t),n=this.ur.model().createSeries("Line",e),i=new Ud(n,this);return this.we.set(i,n),this.be.set(n,i),i},t.prototype.removeSeries=function(t){var e=t,n=Qu(this.we.get(e)),i=this.ve.removeSeries(n),r=this.ur.model();r.removeSeries(n);var o=i.timeScaleUpdate;r.updateTimeScale(o.index,o.changes,o.marks,!0),o.seriesUpdates.forEach((function(t,e){e.updateData(t.update)})),r.updateTimeScaleBaseIndex(0),this.we.delete(e),this.be.delete(n)},t.prototype.applyNewData=function(t,e){var n=this.ve.setSeriesData(t,e),i=this.ur.model(),r=n.timeScaleUpdate;i.updateTimeScale(r.index,r.changes,r.marks,!0),r.seriesUpdates.forEach((function(t,e){e.updateData(t.update)})),i.updateTimeScaleBaseIndex(0)},t.prototype.updateData=function(t,e){var n=this.ve.updateSeriesData(t,e),i=this.ur.model(),r=n.timeScaleUpdate;i.updateTimeScale(r.index,r.changes,r.marks,!1),r.seriesUpdates.forEach((function(t,e){e.updateData(t.update)})),i.updateTimeScaleBaseIndex(0)},t.prototype.subscribeClick=function(t){this.me.subscribe(t)},t.prototype.unsubscribeClick=function(t){this.me.unsubscribe(t)},t.prototype.subscribeCrosshairMove=function(t){this.Me.subscribe(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.Me.unsubscribe(t)},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.de.subscribe(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.de.unsubscribe(t)},t.prototype.priceScale=function(){return this.ye},t.prototype.timeScale=function(){return this.ke},t.prototype.applyOptions=function(t){this.ur.applyOptions(t)},t.prototype.options=function(){return this.ur.options()},t.prototype.takeScreenshot=function(){return this.ur.takeScreenshot()},t.prototype.pe=function(){this.de.hasListeners()&&this.de.fire(this.timeScale().getVisibleRange())},t.prototype.Ne=function(t){return Qu(this.be.get(t))},t.prototype.ge=function(t){var e=this,n=new Map;t.seriesPrices.forEach((function(t,i){n.set(e.Ne(i),t)}));var i=void 0===t.hoveredSeries?void 0:this.Ne(t.hoveredSeries);return{time:t.time&&(t.time.businessDay||t.time.timestamp),point:t.point,hoveredSeries:i,hoveredMarkerId:t.hoveredObject,seriesPrices:n}},t}(),nf={width:0,height:0,layout:{backgroundColor:"#FFFFFF",textColor:"#191919",fontSize:11,fontFamily:lc},crosshair:{vertLine:{color:"#758696",width:1,style:2,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:2,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},priceScale:{autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,position:"right",borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,scaleMargins:{bottom:.1,top:.2}},timeScale:{rightOffset:0,barSpacing:6,fixLeftEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0},watermark:{color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,text:"",horzAlign:"center",vertAlign:"center"},localization:{locale:navigator.language,dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:!0,axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0}},rf=function(){function t(e){_classCallCheck(this,t),this.httpClient=e,this.bars=[],this.literalBars=[],this.volumes=[],this.market=[{time:"kraken",label:"kraken"},{time:"bitstamp",label:"bitstamp"},{time:"bitfinex",label:"bitfinex"},{time:"okcoin",label:"okcoin"},{time:"huobi",label:"huobi"}],this.currency=[{label:"BTC/USD",value:"btcusd"},{label:"BTC/EUR",value:"btceur"},{label:"LTC/EUR",value:"ltceur"},{label:"LTC/USD",value:"ltcusd"},{label:"LTC/BTC",value:"ltcbtc"},{label:"ETH/BTC",value:"ethbtc"},{label:"ETH/USD",value:"ethusd"},{label:"DGC/BTC",value:"dogebtc"}],this.timeCandlesStick=[{time:"1800",label:"30m"},{time:"3600",label:"1h"},{time:"14400",label:"4h"},{time:"86400",label:"1D"},{time:"604800",label:"1W"}],this.selectedTimeFrame="1800",this.selectedMarket="kraken",this.selectedCurrency="btcusd"}return _createClass(t,[{key:"get_call",value:function(){var t=this;return this.httpClient.get("https://cryptowatch-server-api.herokuapp.com/api?market=".concat(this.selectedMarket,"&currency=").concat(this.selectedCurrency,"&timeFrame=").concat(this.selectedTimeFrame)).map((function(e){t.bars=e.bars.result[t.selectedTimeFrame],t.createBars()}))}},{key:"createBars",value:function(){function t(t){return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),0)/1e3}for(var e,n=0;n<this.bars.length;n++)e=new Date(1e3*this.bars[n][0]),this.literalBars.push({time:t(e),open:this.bars[n][1],high:this.bars[n][2],low:this.bars[n][3],close:this.bars[n][4]}),this.volumes.push({time:t(e),value:this.bars[n][5]+this.bars[n][6],color:n>0&&this.bars[n][5]+this.bars[n][6]<this.bars[n-1][5]+this.bars[n-1][6]?"rgba(255,82,82, 0.8)":"rgba(0, 150, 136, 0.8)"})}},{key:"ngOnInit",value:function(){var t=this;this.get_call().subscribe((function(e){t.candleSeries.setData(t.literalBars),t.volumeSeries.setData(t.volumes)})),this.chart=function(t,e){var n=Xu(nl(t)?document.getElementById(t):t),i=void 0===e?rl(nf):Ju(rl(nf),e);return new ef(n,i)}(document.body,{width:innerWidth-15,height:innerHeight-60,layout:{backgroundColor:"#000000",textColor:"rgba(255, 255, 255, 0.9)"},grid:{vertLines:{color:"rgba(197, 203, 206, 0.5)"},horzLines:{color:"rgba(197, 203, 206, 0.5)"}},crosshair:{mode:1},priceScale:{borderColor:"rgba(197, 203, 206, 0.8)",mode:1,scaleMargins:{top:.1,bottom:.1}},timeScale:{borderColor:"rgba(197, 203, 206, 0.8)",timeVisible:!0,secondsVisible:!1}}),this.candleSeries=this.chart.addCandlestickSeries({upColor:"rgb(0,255,3)",downColor:"#ff2000",borderDownColor:"#ff2000",borderUpColor:"rgb(0,255,3)",wickDownColor:"#ff2000",wickUpColor:"rgb(0,255,3)"}),this.volumeSeries=this.chart.addHistogramSeries({color:"#26a69a",lineWidth:2,priceFormat:{type:"volume"},overlay:!0,scaleMargins:{top:.8,bottom:0}})}},{key:"selectMarketHandler",value:function(t){var e=this;this.selectedMarket=t.target.value,this.literalBars=[],this.volumes=[],this.get_call().subscribe((function(t){e.resetchart()}))}},{key:"selectCurrencyHandler",value:function(t){var e=this;this.selectedCurrency=t.target.value,this.literalBars=[],this.volumes=[],this.get_call().subscribe((function(t){e.resetchart()}))}},{key:"selectTimeHandler",value:function(t){var e=this;this.selectedTimeFrame=t.target.value,this.literalBars=[],this.volumes=[],this.get_call().subscribe((function(t){e.resetchart()}))}},{key:"resetchart",value:function(){this.chart.timeScale().resetTimeScale(),this.chart.timeScale().scrollPosition(),this.chart.timeScale().fitContent(),this.candleSeries.setData([]),this.volumeSeries.setData([]),this.candleSeries.setData(this.literalBars),this.volumeSeries.setData(this.volumes)}}]),t}(),of=function(){function t(e,n){_classCallCheck(this,t),this.predicate=e,this.thisArg=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new sf(t,this.predicate,this.thisArg))}}]),t}(),sf=function(t){function e(t,n,i){var r;return _classCallCheck(this,e),(r=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))).predicate=n,r.thisArg=i,r.count=0,r}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}]),e}(y),af=function t(){_classCallCheck(this,t)},uf=function t(){_classCallCheck(this,t)},lf=function(){function t(e){var n=this;_classCallCheck(this,t),this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){n.headers=new Map,e.split("\n").forEach((function(t){var e=t.indexOf(":");if(e>0){var i=t.slice(0,e),r=i.toLowerCase(),o=t.slice(e+1).trim();n.maybeSetNormalizedName(i,r),n.headers.has(r)?n.headers.get(r).push(o):n.headers.set(r,[o])}}))}:function(){n.headers=new Map,Object.keys(e).forEach((function(t){var i=e[t],r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(n.headers.set(r,i),n.maybeSetNormalizedName(t,r))}))}:this.headers=new Map}return _createClass(t,[{key:"has",value:function(t){return this.init(),this.headers.has(t.toLowerCase())}},{key:"get",value:function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(t){return this.init(),this.headers.get(t.toLowerCase())||null}},{key:"append",value:function(t,e){return this.clone({name:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({name:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({name:t,value:e,op:"d"})}},{key:"maybeSetNormalizedName",value:function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}},{key:"init",value:function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(t){return e.applyUpdate(t)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach((function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))}))}},{key:"clone",value:function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}},{key:"applyUpdate",value:function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var i=("a"===t.op?this.headers.get(e):void 0)||[];i.push.apply(i,_toConsumableArray(n)),this.headers.set(e,i);break;case"d":var r=t.value;if(r){var o=this.headers.get(e);if(!o)return;0===(o=o.filter((function(t){return-1===r.indexOf(t)}))).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}},{key:"forEach",value:function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return t(e.normalizedNames.get(n),e.headers.get(n))}))}}]),t}(),hf=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"encodeKey",value:function(t){return cf(t)}},{key:"encodeValue",value:function(t){return cf(t)}},{key:"decodeKey",value:function(t){return decodeURIComponent(t)}},{key:"decodeValue",value:function(t){return decodeURIComponent(t)}}]),t}();function cf(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var df=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,t),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new hf,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){var n=new Map;return t.length>0&&t.split("&").forEach((function(t){var i=t.indexOf("="),r=_slicedToArray(-1==i?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,i)),e.decodeValue(t.slice(i+1))],2),o=r[0],s=r[1],a=n.get(o)||[];a.push(s),n.set(o,a)})),n}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach((function(t){var i=n.fromObject[t];e.map.set(t,Array.isArray(i)?i:[i])}))):this.map=null}return _createClass(t,[{key:"has",value:function(t){return this.init(),this.map.has(t)}},{key:"get",value:function(t){this.init();var e=this.map.get(t);return e?e[0]:null}},{key:"getAll",value:function(t){return this.init(),this.map.get(t)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(t,e){return this.clone({param:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({param:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({param:t,value:e,op:"d"})}},{key:"toString",value:function(){var t=this;return this.init(),this.keys().map((function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map((function(e){return n+"="+t.encoder.encodeValue(e)})).join("&")})).join("&")}},{key:"clone",value:function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n}},{key:"init",value:function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(e){return t.map.set(e,t.cloneFrom.map.get(e))})),this.updates.forEach((function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var i=t.map.get(e.param)||[],r=i.indexOf(e.value);-1!==r&&i.splice(r,1),i.length>0?t.map.set(e.param,i):t.map.delete(e.param)}})),this.cloneFrom=this.updates=null)}}]),t}();function ff(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function pf(t){return"undefined"!=typeof Blob&&t instanceof Blob}function vf(t){return"undefined"!=typeof FormData&&t instanceof FormData}var yf=function(){function t(e,n,i,r){var o;if(_classCallCheck(this,t),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.params&&(this.params=o.params)),this.headers||(this.headers=new lf),this.params){var s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{var a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new df,this.urlWithParams=n}return _createClass(t,[{key:"serializeBody",value:function(){return null===this.body?null:ff(this.body)||pf(this.body)||vf(this.body)||"string"==typeof this.body?this.body:this.body instanceof df?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body?null:vf(this.body)?null:pf(this.body)?this.body.type||null:ff(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof df?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((function(t,n){return t.set(n,e.setHeaders[n])}),u)),e.setParams&&(l=Object.keys(e.setParams).reduce((function(t,n){return t.set(n,e.setParams[n])}),l)),new t(n,i,o,{params:l,headers:u,reportProgress:a,responseType:r,withCredentials:s})}}]),t}(),gf=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}(),mf=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";_classCallCheck(this,t),this.headers=e.headers||new lf,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300},bf=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n))).type=gf.ResponseHeader,t}return _inherits(e,t),_createClass(e,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),e}(mf),_f=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,n))).type=gf.Response,t.body=void 0!==n.body?n.body:null,t}return _inherits(e,t),_createClass(e,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),e}(mf),wf=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,0,"Unknown Error"))).name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for ".concat(t.url||"(unknown url)"):"Http failure response for ".concat(t.url||"(unknown url)",": ").concat(t.status," ").concat(t.statusText),n.error=t.error||null,n}return _inherits(e,t),e}(mf);function kf(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var Cf=function(){function t(e){_classCallCheck(this,t),this.handler=e}return _createClass(t,[{key:"request",value:function(t,e){var n,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t instanceof yf)n=t;else{var o=void 0;o=r.headers instanceof lf?r.headers:new lf(r.headers);var s=void 0;r.params&&(s=r.params instanceof df?r.params:new df({fromObject:r.params})),n=new yf(t,e,void 0!==r.body?r.body:null,{headers:o,params:s,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}var a=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i,r,o=e[e.length-1];switch(P(o)?e.pop():o=void 0,e.length){case 0:return function(t){return t?function(t){return new w((function(e){return t.schedule((function(){return e.complete()}))}))}(t):vu}(o);case 1:return o?$(e,o):(i=e[0],(r=new w((function(t){t.next(i),t.complete()})))._isScalar=!0,r.value=i,r);default:return $(e,o)}}(n).pipe(Z((function(t){return i.handler.handle(t)}),void 0,1));if(t instanceof yf||"events"===r.observe)return a;var u,l=a.pipe((u=function(t){return t instanceof _f},function(t){return t.lift(new of(u,void 0))}));switch(r.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return l.pipe(j((function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body})));case"blob":return l.pipe(j((function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body})));case"text":return l.pipe(j((function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body})));case"json":default:return l.pipe(j((function(t){return t.body})))}case"response":return l;default:throw new Error("Unreachable: unhandled observe type ".concat(r.observe,"}"))}}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",t,e)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",t,e)}},{key:"head",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",t,e)}},{key:"jsonp",value:function(t,e){return this.request("JSONP",t,{params:(new df).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",t,e)}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",t,kf(n,e))}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",t,kf(n,e))}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",t,kf(n,e))}}]),t}(),Sf=function(){function t(e,n){_classCallCheck(this,t),this.next=e,this.interceptor=n}return _createClass(t,[{key:"handle",value:function(t){return this.interceptor.intercept(t,this.next)}}]),t}(),xf=new St("HTTP_INTERCEPTORS"),Ef=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"intercept",value:function(t,e){return e.handle(t)}}]),t}(),Tf=/^\)\]\}',?\n/,Mf=function t(){_classCallCheck(this,t)},Af=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"build",value:function(){return new XMLHttpRequest}}]),t}(),Pf=function(){function t(e){_classCallCheck(this,t),this.xhrFactory=e}return _createClass(t,[{key:"handle",value:function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new w((function(n){var i=e.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((function(t,e){return i.setRequestHeader(t,e.join(","))})),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var r=t.detectContentTypeHeader();null!==r&&i.setRequestHeader("Content-Type",r)}if(t.responseType){var o=t.responseType.toLowerCase();i.responseType="json"!==o?o:"text"}var s=t.serializeBody(),a=null,u=function(){if(null!==a)return a;var e=1223===i.status?204:i.status,n=i.statusText||"OK",r=new lf(i.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(i)||t.url;return a=new bf({headers:r,status:e,statusText:n,url:o})},l=function(){var e=u(),r=e.headers,o=e.status,s=e.statusText,a=e.url,l=null;204!==o&&(l=void 0===i.response?i.responseText:i.response),0===o&&(o=l?200:0);var h=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof l){var c=l;l=l.replace(Tf,"");try{l=""!==l?JSON.parse(l):null}catch(d){l=c,h&&(h=!1,l={error:d,text:l})}}h?(n.next(new _f({body:l,headers:r,status:o,statusText:s,url:a||void 0})),n.complete()):n.error(new wf({error:l,headers:r,status:o,statusText:s,url:a||void 0}))},h=function(t){var e=u().url,r=new wf({error:t,status:i.status||0,statusText:i.statusText||"Unknown Error",url:e||void 0});n.error(r)},c=!1,d=function(e){c||(n.next(u()),c=!0);var r={type:gf.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(r.total=e.total),"text"===t.responseType&&i.responseText&&(r.partialText=i.responseText),n.next(r)},f=function(t){var e={type:gf.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return i.addEventListener("load",l),i.addEventListener("error",h),t.reportProgress&&(i.addEventListener("progress",d),null!==s&&i.upload&&i.upload.addEventListener("progress",f)),i.send(s),n.next({type:gf.Sent}),function(){i.removeEventListener("error",h),i.removeEventListener("load",l),t.reportProgress&&(i.removeEventListener("progress",d),null!==s&&i.upload&&i.upload.removeEventListener("progress",f)),i.abort()}}))}}]),t}(),Vf=new St("XSRF_COOKIE_NAME"),If=new St("XSRF_HEADER_NAME"),Df=function t(){_classCallCheck(this,t)},Rf=function(){function t(e,n,i){_classCallCheck(this,t),this.doc=e,this.platform=n,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return _createClass(t,[{key:"getToken",value:function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ta(t,this.cookieName),this.lastCookieString=t),this.lastToken}}]),t}(),Of=function(){function t(e,n){_classCallCheck(this,t),this.tokenService=e,this.headerName=n}return _createClass(t,[{key:"intercept",value:function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var i=this.tokenService.getToken();return null===i||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,i)})),e.handle(t)}}]),t}(),Nf=function(){function t(e,n){_classCallCheck(this,t),this.backend=e,this.injector=n,this.chain=null}return _createClass(t,[{key:"handle",value:function(t){if(null===this.chain){var e=this.injector.get(xf,[]);this.chain=e.reduceRight((function(t,e){return new Sf(t,e)}),this.backend)}return this.chain.handle(t)}}]),t}(),Lf=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"disable",value:function(){return{ngModule:t,providers:[{provide:Of,useClass:Ef}]}}},{key:"withOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:t,providers:[e.cookieName?{provide:Vf,useValue:e.cookieName}:[],e.headerName?{provide:If,useValue:e.headerName}:[]]}}}]),t}(),zf=function t(){_classCallCheck(this,t)},Ff=$n({encapsulation:2,styles:[],data:{}});function Bf(t){return Ho(0,[(t()(),Mo(0,0,null,null,3,"option",[],null,null,null,null,null)),Qi(1,147456,null,0,Eu,[nn,an,[8,null]],{value:[0,"value"]},null),Qi(2,147456,null,0,Mu,[nn,an,[8,null]],{value:[0,"value"]},null),(t()(),zo(3,null,[" "," "]))],(function(t,e){var n=e.component;t(e,1,0,n.market[e.context.index].time),t(e,2,0,n.market[e.context.index].time)}),(function(t,e){t(e,3,0,e.component.market[e.context.index].label)}))}function Hf(t){return Ho(0,[(t()(),Mo(0,0,null,null,3,"option",[],null,null,null,null,null)),Qi(1,147456,null,0,Eu,[nn,an,[8,null]],{value:[0,"value"]},null),Qi(2,147456,null,0,Mu,[nn,an,[8,null]],{value:[0,"value"]},null),(t()(),zo(3,null,[" "," "]))],(function(t,e){var n=e.component;t(e,1,0,n.currency[e.context.index].value),t(e,2,0,n.currency[e.context.index].value)}),(function(t,e){t(e,3,0,e.component.currency[e.context.index].label)}))}function jf(t){return Ho(0,[(t()(),Mo(0,0,null,null,3,"option",[],null,null,null,null,null)),Qi(1,147456,null,0,Eu,[nn,an,[8,null]],{value:[0,"value"]},null),Qi(2,147456,null,0,Mu,[nn,an,[8,null]],{value:[0,"value"]},null),(t()(),zo(3,null,[" "," "]))],(function(t,e){var n=e.component;t(e,1,0,n.timeCandlesStick[e.context.index].time),t(e,2,0,n.timeCandlesStick[e.context.index].time)}),(function(t,e){t(e,3,0,e.component.timeCandlesStick[e.context.index].label)}))}function Uf(t){return Ho(0,[(t()(),Mo(0,0,null,null,13,"div",[["class","padding-20"]],null,null,null,null,null)),(t()(),Mo(1,0,null,null,12,"div",[["class","row"]],null,null,null,null,null)),(t()(),Mo(2,0,null,null,3,"div",[["class","col-4"]],null,null,null,null,null)),(t()(),Mo(3,0,null,null,2,"select",[["id","market"]],null,[[null,"change"]],(function(t,e,n){var i=!0;return"change"===e&&(i=!1!==t.component.selectMarketHandler(n)&&i),i}),null,null)),(t()(),To(16777216,null,null,1,null,Bf)),Qi(5,278528,null,0,na,[Tn,xn,_n],{ngForOf:[0,"ngForOf"]},null),(t()(),Mo(6,0,null,null,3,"div",[["class","col-4"]],null,null,null,null,null)),(t()(),Mo(7,0,null,null,2,"select",[["id","currency"]],null,[[null,"change"]],(function(t,e,n){var i=!0;return"change"===e&&(i=!1!==t.component.selectCurrencyHandler(n)&&i),i}),null,null)),(t()(),To(16777216,null,null,1,null,Hf)),Qi(9,278528,null,0,na,[Tn,xn,_n],{ngForOf:[0,"ngForOf"]},null),(t()(),Mo(10,0,null,null,3,"div",[["class","col-4"]],null,null,null,null,null)),(t()(),Mo(11,0,null,null,2,"select",[["id","timeCandlesStick"]],null,[[null,"change"]],(function(t,e,n){var i=!0;return"change"===e&&(i=!1!==t.component.selectTimeHandler(n)&&i),i}),null,null)),(t()(),To(16777216,null,null,1,null,jf)),Qi(13,278528,null,0,na,[Tn,xn,_n],{ngForOf:[0,"ngForOf"]},null),(t()(),Mo(14,0,null,null,0,"div",[["id","canvas"]],null,null,null,null,null))],(function(t,e){var n=e.component;t(e,5,0,n.market),t(e,9,0,n.currency),t(e,13,0,n.timeCandlesStick)}),null)}var Wf=$n({encapsulation:2,styles:[],data:{}});function $f(t){return Ho(0,[(t()(),Mo(0,0,null,null,1,"app-chart",[],null,null,null,Uf,Ff)),Qi(1,114688,null,0,rf,[Cf],null,null)],(function(t,e){t(e,1,0)}),null)}var qf=new Mi("app-root",Ks,(function(t){return Ho(0,[(t()(),Mo(0,0,null,null,1,"app-root",[],null,null,null,$f,Wf)),Qi(1,49152,null,0,Ks,[],null,null)],null,null)}),{},{},[]),Zf=new qs(Zs,[Ks],(function(t){return function(t){for(var e={},n=[],i=!1,r=0;r<t.length;r++){var o=t[r];o.token===Te&&!0===o.value&&(i=!0),1073741824&o.flags&&n.push(o.token),o.index=r,e[jn(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:i}}([wi(512,Ge,Je,[[8,[qf]],[3,Ge],Nt]),wi(5120,Ar,So,[[3,Ar]]),wi(4608,Gs,Js,[Ar,[2,Xs]]),wi(5120,hr,xo,[Zr]),wi(4608,zr,zr,[]),wi(5120,kr,Cr,[]),wi(5120,_n,ko,[]),wi(5120,wn,Co,[]),wi(4608,ru,ou,[oa]),wi(6144,_e,null,[ru]),wi(4608,Xa,Ja,[]),wi(5120,Sa,(function(t,e,n,i,r,o,s,a){return[new Ya(t,e,n),new iu(i),new tu(r,o,s,a)]}),[oa,Zr,Er,oa,oa,Xa,Mr,[2,Ga]]),wi(4608,xa,xa,[Sa,Zr]),wi(135680,Ma,Ma,[oa]),wi(4608,Oa,Oa,[xa,Ma,kr]),wi(6144,on,null,[Oa]),wi(6144,Ta,null,[Ma]),wi(4608,eo,eo,[Zr]),wi(4608,Df,Rf,[oa,Er,Vf]),wi(4608,Of,Of,[Df,If]),wi(5120,xf,(function(t){return[t]}),[Of]),wi(4608,Af,Af,[]),wi(6144,Mf,null,[Af]),wi(4608,Pf,Pf,[Mf]),wi(6144,uf,null,[Pf]),wi(4608,af,Nf,[uf,Ae]),wi(4608,Cf,Cf,[af]),wi(4608,Hu,Hu,[]),wi(4608,xu,xu,[]),wi(1073742336,ra,ra,[]),wi(1024,Kt,fu,[]),wi(1024,_r,(function(t){return[(e=t,wa("probe",Ca),wa("coreTokens",Object.assign({},ka,(e||[]).reduce((function(t,e){return t[e.name]=e.token,t}),{}))),function(){return Ca})];var e}),[[2,so]]),wi(512,wr,wr,[[2,_r]]),wi(131584,fo,fo,[Zr,Mr,Ae,Kt,Ge,wr]),wi(1073742336,Eo,Eo,[fo]),wi(1073742336,pu,pu,[[3,pu]]),wi(1073742336,Lf,Lf,[]),wi(1073742336,zf,zf,[]),wi(1073742336,Bu,Bu,[]),wi(1073742336,ju,ju,[]),wi(1073742336,Zs,Zs,[]),wi(256,Te,!0,[]),wi(256,Vf,"XSRF-TOKEN",[]),wi(256,If,"X-XSRF-TOKEN",[])])}));(function(){if(Qt)throw new Error("Cannot enable prod mode after platform setup.");Yt=!1})(),du().bootstrapModuleFactory(Zf).catch((function(t){return console.error(t)}))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);